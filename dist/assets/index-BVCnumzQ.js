(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function sA(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var pp={exports:{}},Rl={},mp={exports:{}},Le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var av;function iA(){if(av)return Le;av=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.iterator;function T(O){return O===null||typeof O!="object"?null:(O=E&&O[E]||O["@@iterator"],typeof O=="function"?O:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,j={};function V(O,Q,ue){this.props=O,this.context=Q,this.refs=j,this.updater=ue||x}V.prototype.isReactComponent={},V.prototype.setState=function(O,Q){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,Q,"setState")},V.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function H(){}H.prototype=V.prototype;function F(O,Q,ue){this.props=O,this.context=Q,this.refs=j,this.updater=ue||x}var X=F.prototype=new H;X.constructor=F,M(X,V.prototype),X.isPureReactComponent=!0;var re=Array.isArray,_e=Object.prototype.hasOwnProperty,ge={current:null},b={key:!0,ref:!0,__self:!0,__source:!0};function A(O,Q,ue){var Ee,Oe={},Ve=null,He=null;if(Q!=null)for(Ee in Q.ref!==void 0&&(He=Q.ref),Q.key!==void 0&&(Ve=""+Q.key),Q)_e.call(Q,Ee)&&!b.hasOwnProperty(Ee)&&(Oe[Ee]=Q[Ee]);var Ke=arguments.length-2;if(Ke===1)Oe.children=ue;else if(1<Ke){for(var Ze=Array(Ke),Dt=0;Dt<Ke;Dt++)Ze[Dt]=arguments[Dt+2];Oe.children=Ze}if(O&&O.defaultProps)for(Ee in Ke=O.defaultProps,Ke)Oe[Ee]===void 0&&(Oe[Ee]=Ke[Ee]);return{$$typeof:n,type:O,key:Ve,ref:He,props:Oe,_owner:ge.current}}function R(O,Q){return{$$typeof:n,type:O.type,key:Q,ref:O.ref,props:O.props,_owner:O._owner}}function P(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function N(O){var Q={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ue){return Q[ue]})}var U=/\/+/g;function C(O,Q){return typeof O=="object"&&O!==null&&O.key!=null?N(""+O.key):Q.toString(36)}function Re(O,Q,ue,Ee,Oe){var Ve=typeof O;(Ve==="undefined"||Ve==="boolean")&&(O=null);var He=!1;if(O===null)He=!0;else switch(Ve){case"string":case"number":He=!0;break;case"object":switch(O.$$typeof){case n:case e:He=!0}}if(He)return He=O,Oe=Oe(He),O=Ee===""?"."+C(He,0):Ee,re(Oe)?(ue="",O!=null&&(ue=O.replace(U,"$&/")+"/"),Re(Oe,Q,ue,"",function(Dt){return Dt})):Oe!=null&&(P(Oe)&&(Oe=R(Oe,ue+(!Oe.key||He&&He.key===Oe.key?"":(""+Oe.key).replace(U,"$&/")+"/")+O)),Q.push(Oe)),1;if(He=0,Ee=Ee===""?".":Ee+":",re(O))for(var Ke=0;Ke<O.length;Ke++){Ve=O[Ke];var Ze=Ee+C(Ve,Ke);He+=Re(Ve,Q,ue,Ze,Oe)}else if(Ze=T(O),typeof Ze=="function")for(O=Ze.call(O),Ke=0;!(Ve=O.next()).done;)Ve=Ve.value,Ze=Ee+C(Ve,Ke++),He+=Re(Ve,Q,ue,Ze,Oe);else if(Ve==="object")throw Q=String(O),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return He}function De(O,Q,ue){if(O==null)return O;var Ee=[],Oe=0;return Re(O,Ee,"","",function(Ve){return Q.call(ue,Ve,Oe++)}),Ee}function rt(O){if(O._status===-1){var Q=O._result;Q=Q(),Q.then(function(ue){(O._status===0||O._status===-1)&&(O._status=1,O._result=ue)},function(ue){(O._status===0||O._status===-1)&&(O._status=2,O._result=ue)}),O._status===-1&&(O._status=0,O._result=Q)}if(O._status===1)return O._result.default;throw O._result}var Ge={current:null},le={transition:null},Y={ReactCurrentDispatcher:Ge,ReactCurrentBatchConfig:le,ReactCurrentOwner:ge};function ie(){throw Error("act(...) is not supported in production builds of React.")}return Le.Children={map:De,forEach:function(O,Q,ue){De(O,function(){Q.apply(this,arguments)},ue)},count:function(O){var Q=0;return De(O,function(){Q++}),Q},toArray:function(O){return De(O,function(Q){return Q})||[]},only:function(O){if(!P(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Le.Component=V,Le.Fragment=t,Le.Profiler=o,Le.PureComponent=F,Le.StrictMode=r,Le.Suspense=p,Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,Le.act=ie,Le.cloneElement=function(O,Q,ue){if(O==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+O+".");var Ee=M({},O.props),Oe=O.key,Ve=O.ref,He=O._owner;if(Q!=null){if(Q.ref!==void 0&&(Ve=Q.ref,He=ge.current),Q.key!==void 0&&(Oe=""+Q.key),O.type&&O.type.defaultProps)var Ke=O.type.defaultProps;for(Ze in Q)_e.call(Q,Ze)&&!b.hasOwnProperty(Ze)&&(Ee[Ze]=Q[Ze]===void 0&&Ke!==void 0?Ke[Ze]:Q[Ze])}var Ze=arguments.length-2;if(Ze===1)Ee.children=ue;else if(1<Ze){Ke=Array(Ze);for(var Dt=0;Dt<Ze;Dt++)Ke[Dt]=arguments[Dt+2];Ee.children=Ke}return{$$typeof:n,type:O.type,key:Oe,ref:Ve,props:Ee,_owner:He}},Le.createContext=function(O){return O={$$typeof:c,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},O.Provider={$$typeof:a,_context:O},O.Consumer=O},Le.createElement=A,Le.createFactory=function(O){var Q=A.bind(null,O);return Q.type=O,Q},Le.createRef=function(){return{current:null}},Le.forwardRef=function(O){return{$$typeof:d,render:O}},Le.isValidElement=P,Le.lazy=function(O){return{$$typeof:v,_payload:{_status:-1,_result:O},_init:rt}},Le.memo=function(O,Q){return{$$typeof:g,type:O,compare:Q===void 0?null:Q}},Le.startTransition=function(O){var Q=le.transition;le.transition={};try{O()}finally{le.transition=Q}},Le.unstable_act=ie,Le.useCallback=function(O,Q){return Ge.current.useCallback(O,Q)},Le.useContext=function(O){return Ge.current.useContext(O)},Le.useDebugValue=function(){},Le.useDeferredValue=function(O){return Ge.current.useDeferredValue(O)},Le.useEffect=function(O,Q){return Ge.current.useEffect(O,Q)},Le.useId=function(){return Ge.current.useId()},Le.useImperativeHandle=function(O,Q,ue){return Ge.current.useImperativeHandle(O,Q,ue)},Le.useInsertionEffect=function(O,Q){return Ge.current.useInsertionEffect(O,Q)},Le.useLayoutEffect=function(O,Q){return Ge.current.useLayoutEffect(O,Q)},Le.useMemo=function(O,Q){return Ge.current.useMemo(O,Q)},Le.useReducer=function(O,Q,ue){return Ge.current.useReducer(O,Q,ue)},Le.useRef=function(O){return Ge.current.useRef(O)},Le.useState=function(O){return Ge.current.useState(O)},Le.useSyncExternalStore=function(O,Q,ue){return Ge.current.useSyncExternalStore(O,Q,ue)},Le.useTransition=function(){return Ge.current.useTransition()},Le.version="18.3.1",Le}var lv;function Dm(){return lv||(lv=1,mp.exports=iA()),mp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uv;function oA(){if(uv)return Rl;uv=1;var n=Dm(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(d,p,g){var v,E={},T=null,x=null;g!==void 0&&(T=""+g),p.key!==void 0&&(T=""+p.key),p.ref!==void 0&&(x=p.ref);for(v in p)r.call(p,v)&&!a.hasOwnProperty(v)&&(E[v]=p[v]);if(d&&d.defaultProps)for(v in p=d.defaultProps,p)E[v]===void 0&&(E[v]=p[v]);return{$$typeof:e,type:d,key:T,ref:x,props:E,_owner:o.current}}return Rl.Fragment=t,Rl.jsx=c,Rl.jsxs=c,Rl}var cv;function aA(){return cv||(cv=1,pp.exports=oA()),pp.exports}var I=aA(),q=Dm();const hv=sA(q);var Gc={},gp={exports:{}},yn={},yp={exports:{}},_p={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dv;function lA(){return dv||(dv=1,(function(n){function e(le,Y){var ie=le.length;le.push(Y);e:for(;0<ie;){var O=ie-1>>>1,Q=le[O];if(0<o(Q,Y))le[O]=Y,le[ie]=Q,ie=O;else break e}}function t(le){return le.length===0?null:le[0]}function r(le){if(le.length===0)return null;var Y=le[0],ie=le.pop();if(ie!==Y){le[0]=ie;e:for(var O=0,Q=le.length,ue=Q>>>1;O<ue;){var Ee=2*(O+1)-1,Oe=le[Ee],Ve=Ee+1,He=le[Ve];if(0>o(Oe,ie))Ve<Q&&0>o(He,Oe)?(le[O]=He,le[Ve]=ie,O=Ve):(le[O]=Oe,le[Ee]=ie,O=Ee);else if(Ve<Q&&0>o(He,ie))le[O]=He,le[Ve]=ie,O=Ve;else break e}}return Y}function o(le,Y){var ie=le.sortIndex-Y.sortIndex;return ie!==0?ie:le.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var p=[],g=[],v=1,E=null,T=3,x=!1,M=!1,j=!1,V=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function X(le){for(var Y=t(g);Y!==null;){if(Y.callback===null)r(g);else if(Y.startTime<=le)r(g),Y.sortIndex=Y.expirationTime,e(p,Y);else break;Y=t(g)}}function re(le){if(j=!1,X(le),!M)if(t(p)!==null)M=!0,rt(_e);else{var Y=t(g);Y!==null&&Ge(re,Y.startTime-le)}}function _e(le,Y){M=!1,j&&(j=!1,H(A),A=-1),x=!0;var ie=T;try{for(X(Y),E=t(p);E!==null&&(!(E.expirationTime>Y)||le&&!N());){var O=E.callback;if(typeof O=="function"){E.callback=null,T=E.priorityLevel;var Q=O(E.expirationTime<=Y);Y=n.unstable_now(),typeof Q=="function"?E.callback=Q:E===t(p)&&r(p),X(Y)}else r(p);E=t(p)}if(E!==null)var ue=!0;else{var Ee=t(g);Ee!==null&&Ge(re,Ee.startTime-Y),ue=!1}return ue}finally{E=null,T=ie,x=!1}}var ge=!1,b=null,A=-1,R=5,P=-1;function N(){return!(n.unstable_now()-P<R)}function U(){if(b!==null){var le=n.unstable_now();P=le;var Y=!0;try{Y=b(!0,le)}finally{Y?C():(ge=!1,b=null)}}else ge=!1}var C;if(typeof F=="function")C=function(){F(U)};else if(typeof MessageChannel<"u"){var Re=new MessageChannel,De=Re.port2;Re.port1.onmessage=U,C=function(){De.postMessage(null)}}else C=function(){V(U,0)};function rt(le){b=le,ge||(ge=!0,C())}function Ge(le,Y){A=V(function(){le(n.unstable_now())},Y)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(le){le.callback=null},n.unstable_continueExecution=function(){M||x||(M=!0,rt(_e))},n.unstable_forceFrameRate=function(le){0>le||125<le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<le?Math.floor(1e3/le):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(le){switch(T){case 1:case 2:case 3:var Y=3;break;default:Y=T}var ie=T;T=Y;try{return le()}finally{T=ie}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(le,Y){switch(le){case 1:case 2:case 3:case 4:case 5:break;default:le=3}var ie=T;T=le;try{return Y()}finally{T=ie}},n.unstable_scheduleCallback=function(le,Y,ie){var O=n.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?O+ie:O):ie=O,le){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=ie+Q,le={id:v++,callback:Y,priorityLevel:le,startTime:ie,expirationTime:Q,sortIndex:-1},ie>O?(le.sortIndex=ie,e(g,le),t(p)===null&&le===t(g)&&(j?(H(A),A=-1):j=!0,Ge(re,ie-O))):(le.sortIndex=Q,e(p,le),M||x||(M=!0,rt(_e))),le},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(le){var Y=T;return function(){var ie=T;T=Y;try{return le.apply(this,arguments)}finally{T=ie}}}})(_p)),_p}var fv;function uA(){return fv||(fv=1,yp.exports=lA()),yp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pv;function cA(){if(pv)return yn;pv=1;var n=Dm(),e=uA();function t(s){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+s,l=1;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+s+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function a(s,i){c(s,i),c(s+"Capture",i)}function c(s,i){for(o[s]=i,s=0;s<i.length;s++)r.add(i[s])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},E={};function T(s){return p.call(E,s)?!0:p.call(v,s)?!1:g.test(s)?E[s]=!0:(v[s]=!0,!1)}function x(s,i,l,h){if(l!==null&&l.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function M(s,i,l,h){if(i===null||typeof i>"u"||x(s,i,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function j(s,i,l,h,f,y,w){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=h,this.attributeNamespace=f,this.mustUseProperty=l,this.propertyName=s,this.type=i,this.sanitizeURL=y,this.removeEmptyString=w}var V={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){V[s]=new j(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var i=s[0];V[i]=new j(i,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){V[s]=new j(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){V[s]=new j(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){V[s]=new j(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){V[s]=new j(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){V[s]=new j(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){V[s]=new j(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){V[s]=new j(s,5,!1,s.toLowerCase(),null,!1,!1)});var H=/[\-:]([a-z])/g;function F(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var i=s.replace(H,F);V[i]=new j(i,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var i=s.replace(H,F);V[i]=new j(i,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var i=s.replace(H,F);V[i]=new j(i,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){V[s]=new j(s,1,!1,s.toLowerCase(),null,!1,!1)}),V.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){V[s]=new j(s,1,!1,s.toLowerCase(),null,!0,!0)});function X(s,i,l,h){var f=V.hasOwnProperty(i)?V[i]:null;(f!==null?f.type!==0:h||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(M(i,l,f,h)&&(l=null),h||f===null?T(i)&&(l===null?s.removeAttribute(i):s.setAttribute(i,""+l)):f.mustUseProperty?s[f.propertyName]=l===null?f.type===3?!1:"":l:(i=f.attributeName,h=f.attributeNamespace,l===null?s.removeAttribute(i):(f=f.type,l=f===3||f===4&&l===!0?"":""+l,h?s.setAttributeNS(h,i,l):s.setAttribute(i,l))))}var re=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_e=Symbol.for("react.element"),ge=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),N=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),Re=Symbol.for("react.suspense_list"),De=Symbol.for("react.memo"),rt=Symbol.for("react.lazy"),Ge=Symbol.for("react.offscreen"),le=Symbol.iterator;function Y(s){return s===null||typeof s!="object"?null:(s=le&&s[le]||s["@@iterator"],typeof s=="function"?s:null)}var ie=Object.assign,O;function Q(s){if(O===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);O=i&&i[1]||""}return`
`+O+s}var ue=!1;function Ee(s,i){if(!s||ue)return"";ue=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(K){var h=K}Reflect.construct(s,[],i)}else{try{i.call()}catch(K){h=K}s.call(i.prototype)}else{try{throw Error()}catch(K){h=K}s()}}catch(K){if(K&&h&&typeof K.stack=="string"){for(var f=K.stack.split(`
`),y=h.stack.split(`
`),w=f.length-1,k=y.length-1;1<=w&&0<=k&&f[w]!==y[k];)k--;for(;1<=w&&0<=k;w--,k--)if(f[w]!==y[k]){if(w!==1||k!==1)do if(w--,k--,0>k||f[w]!==y[k]){var D=`
`+f[w].replace(" at new "," at ");return s.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",s.displayName)),D}while(1<=w&&0<=k);break}}}finally{ue=!1,Error.prepareStackTrace=l}return(s=s?s.displayName||s.name:"")?Q(s):""}function Oe(s){switch(s.tag){case 5:return Q(s.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return s=Ee(s.type,!1),s;case 11:return s=Ee(s.type.render,!1),s;case 1:return s=Ee(s.type,!0),s;default:return""}}function Ve(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case b:return"Fragment";case ge:return"Portal";case R:return"Profiler";case A:return"StrictMode";case C:return"Suspense";case Re:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case N:return(s.displayName||"Context")+".Consumer";case P:return(s._context.displayName||"Context")+".Provider";case U:var i=s.render;return s=s.displayName,s||(s=i.displayName||i.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case De:return i=s.displayName||null,i!==null?i:Ve(s.type)||"Memo";case rt:i=s._payload,s=s._init;try{return Ve(s(i))}catch{}}return null}function He(s){var i=s.type;switch(s.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=i.render,s=s.displayName||s.name||"",i.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ve(i);case 8:return i===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Ke(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ze(s){var i=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Dt(s){var i=Ze(s)?"checked":"value",l=Object.getOwnPropertyDescriptor(s.constructor.prototype,i),h=""+s[i];if(!s.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,y=l.set;return Object.defineProperty(s,i,{configurable:!0,get:function(){return f.call(this)},set:function(w){h=""+w,y.call(this,w)}}),Object.defineProperty(s,i,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(w){h=""+w},stopTracking:function(){s._valueTracker=null,delete s[i]}}}}function Fr(s){s._valueTracker||(s._valueTracker=Dt(s))}function oo(s){if(!s)return!1;var i=s._valueTracker;if(!i)return!0;var l=i.getValue(),h="";return s&&(h=Ze(s)?s.checked?"true":"false":s.value),s=h,s!==l?(i.setValue(s),!0):!1}function ws(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function fi(s,i){var l=i.checked;return ie({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??s._wrapperState.initialChecked})}function ao(s,i){var l=i.defaultValue==null?"":i.defaultValue,h=i.checked!=null?i.checked:i.defaultChecked;l=Ke(i.value!=null?i.value:l),s._wrapperState={initialChecked:h,initialValue:l,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Oa(s,i){i=i.checked,i!=null&&X(s,"checked",i,!1)}function La(s,i){Oa(s,i);var l=Ke(i.value),h=i.type;if(l!=null)h==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+l):s.value!==""+l&&(s.value=""+l);else if(h==="submit"||h==="reset"){s.removeAttribute("value");return}i.hasOwnProperty("value")?lo(s,i.type,l):i.hasOwnProperty("defaultValue")&&lo(s,i.type,Ke(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(s.defaultChecked=!!i.defaultChecked)}function Du(s,i,l){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var h=i.type;if(!(h!=="submit"&&h!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+s._wrapperState.initialValue,l||i===s.value||(s.value=i),s.defaultValue=i}l=s.name,l!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,l!==""&&(s.name=l)}function lo(s,i,l){(i!=="number"||ws(s.ownerDocument)!==s)&&(l==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+l&&(s.defaultValue=""+l))}var jr=Array.isArray;function Ur(s,i,l,h){if(s=s.options,i){i={};for(var f=0;f<l.length;f++)i["$"+l[f]]=!0;for(l=0;l<s.length;l++)f=i.hasOwnProperty("$"+s[l].value),s[l].selected!==f&&(s[l].selected=f),f&&h&&(s[l].defaultSelected=!0)}else{for(l=""+Ke(l),i=null,f=0;f<s.length;f++){if(s[f].value===l){s[f].selected=!0,h&&(s[f].defaultSelected=!0);return}i!==null||s[f].disabled||(i=s[f])}i!==null&&(i.selected=!0)}}function Ma(s,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return ie({},i,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function uo(s,i){var l=i.value;if(l==null){if(l=i.children,i=i.defaultValue,l!=null){if(i!=null)throw Error(t(92));if(jr(l)){if(1<l.length)throw Error(t(93));l=l[0]}i=l}i==null&&(i=""),l=i}s._wrapperState={initialValue:Ke(l)}}function co(s,i){var l=Ke(i.value),h=Ke(i.defaultValue);l!=null&&(l=""+l,l!==s.value&&(s.value=l),i.defaultValue==null&&s.defaultValue!==l&&(s.defaultValue=l)),h!=null&&(s.defaultValue=""+h)}function Va(s){var i=s.textContent;i===s._wrapperState.initialValue&&i!==""&&i!==null&&(s.value=i)}function At(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xt(s,i){return s==null||s==="http://www.w3.org/1999/xhtml"?At(i):s==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var $r,Fa=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,l,h,f){MSApp.execUnsafeLocalFunction(function(){return s(i,l,h,f)})}:s})(function(s,i){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=i;else{for($r=$r||document.createElement("div"),$r.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=$r.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;i.firstChild;)s.appendChild(i.firstChild)}});function Es(s,i){if(i){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=i;return}}s.textContent=i}var pi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mi=["Webkit","ms","Moz","O"];Object.keys(pi).forEach(function(s){mi.forEach(function(i){i=i+s.charAt(0).toUpperCase()+s.substring(1),pi[i]=pi[s]})});function ja(s,i,l){return i==null||typeof i=="boolean"||i===""?"":l||typeof i!="number"||i===0||pi.hasOwnProperty(s)&&pi[s]?(""+i).trim():i+"px"}function Ua(s,i){s=s.style;for(var l in i)if(i.hasOwnProperty(l)){var h=l.indexOf("--")===0,f=ja(l,i[l],h);l==="float"&&(l="cssFloat"),h?s.setProperty(l,f):s[l]=f}}var $a=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ba(s,i){if(i){if($a[s]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function za(s,i){if(s.indexOf("-")===-1)return typeof i.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gi=null;function ho(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var fo=null,Dn=null,pr=null;function po(s){if(s=fl(s)){if(typeof fo!="function")throw Error(t(280));var i=s.stateNode;i&&(i=uc(i),fo(s.stateNode,s.type,i))}}function mr(s){Dn?pr?pr.push(s):pr=[s]:Dn=s}function Wa(){if(Dn){var s=Dn,i=pr;if(pr=Dn=null,po(s),i)for(s=0;s<i.length;s++)po(i[s])}}function yi(s,i){return s(i)}function qa(){}var Br=!1;function Ha(s,i,l){if(Br)return s(i,l);Br=!0;try{return yi(s,i,l)}finally{Br=!1,(Dn!==null||pr!==null)&&(qa(),Wa())}}function mt(s,i){var l=s.stateNode;if(l===null)return null;var h=uc(l);if(h===null)return null;l=h[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(t(231,i,typeof l));return l}var mo=!1;if(d)try{var Qn={};Object.defineProperty(Qn,"passive",{get:function(){mo=!0}}),window.addEventListener("test",Qn,Qn),window.removeEventListener("test",Qn,Qn)}catch{mo=!1}function _i(s,i,l,h,f,y,w,k,D){var K=Array.prototype.slice.call(arguments,3);try{i.apply(l,K)}catch(te){this.onError(te)}}var vi=!1,go=null,Xn=!1,Ka=null,$d={onError:function(s){vi=!0,go=s}};function yo(s,i,l,h,f,y,w,k,D){vi=!1,go=null,_i.apply($d,arguments)}function Ou(s,i,l,h,f,y,w,k,D){if(yo.apply(this,arguments),vi){if(vi){var K=go;vi=!1,go=null}else throw Error(t(198));Xn||(Xn=!0,Ka=K)}}function Jn(s){var i=s,l=s;if(s.alternate)for(;i.return;)i=i.return;else{s=i;do i=s,(i.flags&4098)!==0&&(l=i.return),s=i.return;while(s)}return i.tag===3?l:null}function wi(s){if(s.tag===13){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function Yn(s){if(Jn(s)!==s)throw Error(t(188))}function Lu(s){var i=s.alternate;if(!i){if(i=Jn(s),i===null)throw Error(t(188));return i!==s?null:s}for(var l=s,h=i;;){var f=l.return;if(f===null)break;var y=f.alternate;if(y===null){if(h=f.return,h!==null){l=h;continue}break}if(f.child===y.child){for(y=f.child;y;){if(y===l)return Yn(f),s;if(y===h)return Yn(f),i;y=y.sibling}throw Error(t(188))}if(l.return!==h.return)l=f,h=y;else{for(var w=!1,k=f.child;k;){if(k===l){w=!0,l=f,h=y;break}if(k===h){w=!0,h=f,l=y;break}k=k.sibling}if(!w){for(k=y.child;k;){if(k===l){w=!0,l=y,h=f;break}if(k===h){w=!0,h=y,l=f;break}k=k.sibling}if(!w)throw Error(t(189))}}if(l.alternate!==h)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?s:i}function Ga(s){return s=Lu(s),s!==null?_o(s):null}function _o(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var i=_o(s);if(i!==null)return i;s=s.sibling}return null}var vo=e.unstable_scheduleCallback,Qa=e.unstable_cancelCallback,Mu=e.unstable_shouldYield,Bd=e.unstable_requestPaint,et=e.unstable_now,Vu=e.unstable_getCurrentPriorityLevel,Ei=e.unstable_ImmediatePriority,Is=e.unstable_UserBlockingPriority,On=e.unstable_NormalPriority,Xa=e.unstable_LowPriority,Fu=e.unstable_IdlePriority,Ii=null,En=null;function ju(s){if(En&&typeof En.onCommitFiberRoot=="function")try{En.onCommitFiberRoot(Ii,s,void 0,(s.current.flags&128)===128)}catch{}}var sn=Math.clz32?Math.clz32:$u,Ja=Math.log,Uu=Math.LN2;function $u(s){return s>>>=0,s===0?32:31-(Ja(s)/Uu|0)|0}var wo=64,Eo=4194304;function Ts(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Ti(s,i){var l=s.pendingLanes;if(l===0)return 0;var h=0,f=s.suspendedLanes,y=s.pingedLanes,w=l&268435455;if(w!==0){var k=w&~f;k!==0?h=Ts(k):(y&=w,y!==0&&(h=Ts(y)))}else w=l&~f,w!==0?h=Ts(w):y!==0&&(h=Ts(y));if(h===0)return 0;if(i!==0&&i!==h&&(i&f)===0&&(f=h&-h,y=i&-i,f>=y||f===16&&(y&4194240)!==0))return i;if((h&4)!==0&&(h|=l&16),i=s.entangledLanes,i!==0)for(s=s.entanglements,i&=h;0<i;)l=31-sn(i),f=1<<l,h|=s[l],i&=~f;return h}function zd(s,i){switch(s){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zr(s,i){for(var l=s.suspendedLanes,h=s.pingedLanes,f=s.expirationTimes,y=s.pendingLanes;0<y;){var w=31-sn(y),k=1<<w,D=f[w];D===-1?((k&l)===0||(k&h)!==0)&&(f[w]=zd(k,i)):D<=i&&(s.expiredLanes|=k),y&=~k}}function In(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Si(){var s=wo;return wo<<=1,(wo&4194240)===0&&(wo=64),s}function Ss(s){for(var i=[],l=0;31>l;l++)i.push(s);return i}function As(s,i,l){s.pendingLanes|=i,i!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,i=31-sn(i),s[i]=l}function Ye(s,i){var l=s.pendingLanes&~i;s.pendingLanes=i,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=i,s.mutableReadLanes&=i,s.entangledLanes&=i,i=s.entanglements;var h=s.eventTimes;for(s=s.expirationTimes;0<l;){var f=31-sn(l),y=1<<f;i[f]=0,h[f]=-1,s[f]=-1,l&=~y}}function xs(s,i){var l=s.entangledLanes|=i;for(s=s.entanglements;l;){var h=31-sn(l),f=1<<h;f&i|s[h]&i&&(s[h]|=i),l&=~f}}var $e=0;function Cs(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var Bu,Io,zu,Wu,qu,Ya=!1,gr=[],Ut=null,Zn=null,er=null,Rs=new Map,Ln=new Map,yr=[],Wd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hu(s,i){switch(s){case"focusin":case"focusout":Ut=null;break;case"dragenter":case"dragleave":Zn=null;break;case"mouseover":case"mouseout":er=null;break;case"pointerover":case"pointerout":Rs.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ln.delete(i.pointerId)}}function cn(s,i,l,h,f,y){return s===null||s.nativeEvent!==y?(s={blockedOn:i,domEventName:l,eventSystemFlags:h,nativeEvent:y,targetContainers:[f]},i!==null&&(i=fl(i),i!==null&&Io(i)),s):(s.eventSystemFlags|=h,i=s.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),s)}function qd(s,i,l,h,f){switch(i){case"focusin":return Ut=cn(Ut,s,i,l,h,f),!0;case"dragenter":return Zn=cn(Zn,s,i,l,h,f),!0;case"mouseover":return er=cn(er,s,i,l,h,f),!0;case"pointerover":var y=f.pointerId;return Rs.set(y,cn(Rs.get(y)||null,s,i,l,h,f)),!0;case"gotpointercapture":return y=f.pointerId,Ln.set(y,cn(Ln.get(y)||null,s,i,l,h,f)),!0}return!1}function Ku(s){var i=ki(s.target);if(i!==null){var l=Jn(i);if(l!==null){if(i=l.tag,i===13){if(i=wi(l),i!==null){s.blockedOn=i,qu(s.priority,function(){zu(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Wr(s){if(s.blockedOn!==null)return!1;for(var i=s.targetContainers;0<i.length;){var l=To(s.domEventName,s.eventSystemFlags,i[0],s.nativeEvent);if(l===null){l=s.nativeEvent;var h=new l.constructor(l.type,l);gi=h,l.target.dispatchEvent(h),gi=null}else return i=fl(l),i!==null&&Io(i),s.blockedOn=l,!1;i.shift()}return!0}function Ai(s,i,l){Wr(s)&&l.delete(i)}function Gu(){Ya=!1,Ut!==null&&Wr(Ut)&&(Ut=null),Zn!==null&&Wr(Zn)&&(Zn=null),er!==null&&Wr(er)&&(er=null),Rs.forEach(Ai),Ln.forEach(Ai)}function tr(s,i){s.blockedOn===i&&(s.blockedOn=null,Ya||(Ya=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Gu)))}function nr(s){function i(f){return tr(f,s)}if(0<gr.length){tr(gr[0],s);for(var l=1;l<gr.length;l++){var h=gr[l];h.blockedOn===s&&(h.blockedOn=null)}}for(Ut!==null&&tr(Ut,s),Zn!==null&&tr(Zn,s),er!==null&&tr(er,s),Rs.forEach(i),Ln.forEach(i),l=0;l<yr.length;l++)h=yr[l],h.blockedOn===s&&(h.blockedOn=null);for(;0<yr.length&&(l=yr[0],l.blockedOn===null);)Ku(l),l.blockedOn===null&&yr.shift()}var qr=re.ReactCurrentBatchConfig,ks=!0;function at(s,i,l,h){var f=$e,y=qr.transition;qr.transition=null;try{$e=1,Za(s,i,l,h)}finally{$e=f,qr.transition=y}}function Hd(s,i,l,h){var f=$e,y=qr.transition;qr.transition=null;try{$e=4,Za(s,i,l,h)}finally{$e=f,qr.transition=y}}function Za(s,i,l,h){if(ks){var f=To(s,i,l,h);if(f===null)rf(s,i,h,xi,l),Hu(s,h);else if(qd(f,s,i,l,h))h.stopPropagation();else if(Hu(s,h),i&4&&-1<Wd.indexOf(s)){for(;f!==null;){var y=fl(f);if(y!==null&&Bu(y),y=To(s,i,l,h),y===null&&rf(s,i,h,xi,l),y===f)break;f=y}f!==null&&h.stopPropagation()}else rf(s,i,h,null,l)}}var xi=null;function To(s,i,l,h){if(xi=null,s=ho(h),s=ki(s),s!==null)if(i=Jn(s),i===null)s=null;else if(l=i.tag,l===13){if(s=wi(i),s!==null)return s;s=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;s=null}else i!==s&&(s=null);return xi=s,null}function el(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Vu()){case Ei:return 1;case Is:return 4;case On:case Xa:return 16;case Fu:return 536870912;default:return 16}default:return 16}}var Tn=null,So=null,hn=null;function tl(){if(hn)return hn;var s,i=So,l=i.length,h,f="value"in Tn?Tn.value:Tn.textContent,y=f.length;for(s=0;s<l&&i[s]===f[s];s++);var w=l-s;for(h=1;h<=w&&i[l-h]===f[y-h];h++);return hn=f.slice(s,1<h?1-h:void 0)}function Ao(s){var i=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&i===13&&(s=13)):s=i,s===10&&(s=13),32<=s||s===13?s:0}function _r(){return!0}function nl(){return!1}function $t(s){function i(l,h,f,y,w){this._reactName=l,this._targetInst=f,this.type=h,this.nativeEvent=y,this.target=w,this.currentTarget=null;for(var k in s)s.hasOwnProperty(k)&&(l=s[k],this[k]=l?l(y):y[k]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?_r:nl,this.isPropagationStopped=nl,this}return ie(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=_r)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=_r)},persist:function(){},isPersistent:_r}),i}var rr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xo=$t(rr),vr=ie({},rr,{view:0,detail:0}),Kd=$t(vr),Co,Hr,bs,Ci=ie({},vr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==bs&&(bs&&s.type==="mousemove"?(Co=s.screenX-bs.screenX,Hr=s.screenY-bs.screenY):Hr=Co=0,bs=s),Co)},movementY:function(s){return"movementY"in s?s.movementY:Hr}}),Ro=$t(Ci),rl=ie({},Ci,{dataTransfer:0}),Qu=$t(rl),ko=ie({},vr,{relatedTarget:0}),bo=$t(ko),Xu=ie({},rr,{animationName:0,elapsedTime:0,pseudoElement:0}),Kr=$t(Xu),Ju=ie({},rr,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Yu=$t(Ju),Zu=ie({},rr,{data:0}),sl=$t(Zu),Po={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},on={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ec={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tc(s){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(s):(s=ec[s])?!!i[s]:!1}function wr(){return tc}var u=ie({},vr,{key:function(s){if(s.key){var i=Po[s.key]||s.key;if(i!=="Unidentified")return i}return s.type==="keypress"?(s=Ao(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?on[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wr,charCode:function(s){return s.type==="keypress"?Ao(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ao(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),m=$t(u),_=ie({},Ci,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),S=$t(_),$=ie({},vr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wr}),G=$t($),ae=ie({},rr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xe=$t(ae),Ct=ie({},Ci,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Be=$t(Ct),Ot=[9,13,27,32],_t=d&&"CompositionEvent"in window,Mn=null;d&&"documentMode"in document&&(Mn=document.documentMode);var Sn=d&&"TextEvent"in window&&!Mn,Ri=d&&(!_t||Mn&&8<Mn&&11>=Mn),No=" ",ey=!1;function ty(s,i){switch(s){case"keyup":return Ot.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ny(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Do=!1;function tS(s,i){switch(s){case"compositionend":return ny(i);case"keypress":return i.which!==32?null:(ey=!0,No);case"textInput":return s=i.data,s===No&&ey?null:s;default:return null}}function nS(s,i){if(Do)return s==="compositionend"||!_t&&ty(s,i)?(s=tl(),hn=So=Tn=null,Do=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ri&&i.locale!=="ko"?null:i.data;default:return null}}var rS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ry(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i==="input"?!!rS[s.type]:i==="textarea"}function sy(s,i,l,h){mr(h),i=oc(i,"onChange"),0<i.length&&(l=new xo("onChange","change",null,l,h),s.push({event:l,listeners:i}))}var il=null,ol=null;function sS(s){Iy(s,0)}function nc(s){var i=Fo(s);if(oo(i))return s}function iS(s,i){if(s==="change")return i}var iy=!1;if(d){var Gd;if(d){var Qd="oninput"in document;if(!Qd){var oy=document.createElement("div");oy.setAttribute("oninput","return;"),Qd=typeof oy.oninput=="function"}Gd=Qd}else Gd=!1;iy=Gd&&(!document.documentMode||9<document.documentMode)}function ay(){il&&(il.detachEvent("onpropertychange",ly),ol=il=null)}function ly(s){if(s.propertyName==="value"&&nc(ol)){var i=[];sy(i,ol,s,ho(s)),Ha(sS,i)}}function oS(s,i,l){s==="focusin"?(ay(),il=i,ol=l,il.attachEvent("onpropertychange",ly)):s==="focusout"&&ay()}function aS(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return nc(ol)}function lS(s,i){if(s==="click")return nc(i)}function uS(s,i){if(s==="input"||s==="change")return nc(i)}function cS(s,i){return s===i&&(s!==0||1/s===1/i)||s!==s&&i!==i}var sr=typeof Object.is=="function"?Object.is:cS;function al(s,i){if(sr(s,i))return!0;if(typeof s!="object"||s===null||typeof i!="object"||i===null)return!1;var l=Object.keys(s),h=Object.keys(i);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var f=l[h];if(!p.call(i,f)||!sr(s[f],i[f]))return!1}return!0}function uy(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function cy(s,i){var l=uy(s);s=0;for(var h;l;){if(l.nodeType===3){if(h=s+l.textContent.length,s<=i&&h>=i)return{node:l,offset:i-s};s=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=uy(l)}}function hy(s,i){return s&&i?s===i?!0:s&&s.nodeType===3?!1:i&&i.nodeType===3?hy(s,i.parentNode):"contains"in s?s.contains(i):s.compareDocumentPosition?!!(s.compareDocumentPosition(i)&16):!1:!1}function dy(){for(var s=window,i=ws();i instanceof s.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)s=i.contentWindow;else break;i=ws(s.document)}return i}function Xd(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i&&(i==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||i==="textarea"||s.contentEditable==="true")}function hS(s){var i=dy(),l=s.focusedElem,h=s.selectionRange;if(i!==l&&l&&l.ownerDocument&&hy(l.ownerDocument.documentElement,l)){if(h!==null&&Xd(l)){if(i=h.start,s=h.end,s===void 0&&(s=i),"selectionStart"in l)l.selectionStart=i,l.selectionEnd=Math.min(s,l.value.length);else if(s=(i=l.ownerDocument||document)&&i.defaultView||window,s.getSelection){s=s.getSelection();var f=l.textContent.length,y=Math.min(h.start,f);h=h.end===void 0?y:Math.min(h.end,f),!s.extend&&y>h&&(f=h,h=y,y=f),f=cy(l,y);var w=cy(l,h);f&&w&&(s.rangeCount!==1||s.anchorNode!==f.node||s.anchorOffset!==f.offset||s.focusNode!==w.node||s.focusOffset!==w.offset)&&(i=i.createRange(),i.setStart(f.node,f.offset),s.removeAllRanges(),y>h?(s.addRange(i),s.extend(w.node,w.offset)):(i.setEnd(w.node,w.offset),s.addRange(i)))}}for(i=[],s=l;s=s.parentNode;)s.nodeType===1&&i.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<i.length;l++)s=i[l],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var dS=d&&"documentMode"in document&&11>=document.documentMode,Oo=null,Jd=null,ll=null,Yd=!1;function fy(s,i,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Yd||Oo==null||Oo!==ws(h)||(h=Oo,"selectionStart"in h&&Xd(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),ll&&al(ll,h)||(ll=h,h=oc(Jd,"onSelect"),0<h.length&&(i=new xo("onSelect","select",null,i,l),s.push({event:i,listeners:h}),i.target=Oo)))}function rc(s,i){var l={};return l[s.toLowerCase()]=i.toLowerCase(),l["Webkit"+s]="webkit"+i,l["Moz"+s]="moz"+i,l}var Lo={animationend:rc("Animation","AnimationEnd"),animationiteration:rc("Animation","AnimationIteration"),animationstart:rc("Animation","AnimationStart"),transitionend:rc("Transition","TransitionEnd")},Zd={},py={};d&&(py=document.createElement("div").style,"AnimationEvent"in window||(delete Lo.animationend.animation,delete Lo.animationiteration.animation,delete Lo.animationstart.animation),"TransitionEvent"in window||delete Lo.transitionend.transition);function sc(s){if(Zd[s])return Zd[s];if(!Lo[s])return s;var i=Lo[s],l;for(l in i)if(i.hasOwnProperty(l)&&l in py)return Zd[s]=i[l];return s}var my=sc("animationend"),gy=sc("animationiteration"),yy=sc("animationstart"),_y=sc("transitionend"),vy=new Map,wy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ps(s,i){vy.set(s,i),a(i,[s])}for(var ef=0;ef<wy.length;ef++){var tf=wy[ef],fS=tf.toLowerCase(),pS=tf[0].toUpperCase()+tf.slice(1);Ps(fS,"on"+pS)}Ps(my,"onAnimationEnd"),Ps(gy,"onAnimationIteration"),Ps(yy,"onAnimationStart"),Ps("dblclick","onDoubleClick"),Ps("focusin","onFocus"),Ps("focusout","onBlur"),Ps(_y,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ul="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mS=new Set("cancel close invalid load scroll toggle".split(" ").concat(ul));function Ey(s,i,l){var h=s.type||"unknown-event";s.currentTarget=l,Ou(h,i,void 0,s),s.currentTarget=null}function Iy(s,i){i=(i&4)!==0;for(var l=0;l<s.length;l++){var h=s[l],f=h.event;h=h.listeners;e:{var y=void 0;if(i)for(var w=h.length-1;0<=w;w--){var k=h[w],D=k.instance,K=k.currentTarget;if(k=k.listener,D!==y&&f.isPropagationStopped())break e;Ey(f,k,K),y=D}else for(w=0;w<h.length;w++){if(k=h[w],D=k.instance,K=k.currentTarget,k=k.listener,D!==y&&f.isPropagationStopped())break e;Ey(f,k,K),y=D}}}if(Xn)throw s=Ka,Xn=!1,Ka=null,s}function st(s,i){var l=i[cf];l===void 0&&(l=i[cf]=new Set);var h=s+"__bubble";l.has(h)||(Ty(i,s,2,!1),l.add(h))}function nf(s,i,l){var h=0;i&&(h|=4),Ty(l,s,h,i)}var ic="_reactListening"+Math.random().toString(36).slice(2);function cl(s){if(!s[ic]){s[ic]=!0,r.forEach(function(l){l!=="selectionchange"&&(mS.has(l)||nf(l,!1,s),nf(l,!0,s))});var i=s.nodeType===9?s:s.ownerDocument;i===null||i[ic]||(i[ic]=!0,nf("selectionchange",!1,i))}}function Ty(s,i,l,h){switch(el(i)){case 1:var f=at;break;case 4:f=Hd;break;default:f=Za}l=f.bind(null,i,l,s),f=void 0,!mo||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),h?f!==void 0?s.addEventListener(i,l,{capture:!0,passive:f}):s.addEventListener(i,l,!0):f!==void 0?s.addEventListener(i,l,{passive:f}):s.addEventListener(i,l,!1)}function rf(s,i,l,h,f){var y=h;if((i&1)===0&&(i&2)===0&&h!==null)e:for(;;){if(h===null)return;var w=h.tag;if(w===3||w===4){var k=h.stateNode.containerInfo;if(k===f||k.nodeType===8&&k.parentNode===f)break;if(w===4)for(w=h.return;w!==null;){var D=w.tag;if((D===3||D===4)&&(D=w.stateNode.containerInfo,D===f||D.nodeType===8&&D.parentNode===f))return;w=w.return}for(;k!==null;){if(w=ki(k),w===null)return;if(D=w.tag,D===5||D===6){h=y=w;continue e}k=k.parentNode}}h=h.return}Ha(function(){var K=y,te=ho(l),ne=[];e:{var ee=vy.get(s);if(ee!==void 0){var ce=xo,pe=s;switch(s){case"keypress":if(Ao(l)===0)break e;case"keydown":case"keyup":ce=m;break;case"focusin":pe="focus",ce=bo;break;case"focusout":pe="blur",ce=bo;break;case"beforeblur":case"afterblur":ce=bo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=Ro;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=Qu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=G;break;case my:case gy:case yy:ce=Kr;break;case _y:ce=Xe;break;case"scroll":ce=Kd;break;case"wheel":ce=Be;break;case"copy":case"cut":case"paste":ce=Yu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=S}var me=(i&4)!==0,gt=!me&&s==="scroll",B=me?ee!==null?ee+"Capture":null:ee;me=[];for(var L=K,z;L!==null;){z=L;var se=z.stateNode;if(z.tag===5&&se!==null&&(z=se,B!==null&&(se=mt(L,B),se!=null&&me.push(hl(L,se,z)))),gt)break;L=L.return}0<me.length&&(ee=new ce(ee,pe,null,l,te),ne.push({event:ee,listeners:me}))}}if((i&7)===0){e:{if(ee=s==="mouseover"||s==="pointerover",ce=s==="mouseout"||s==="pointerout",ee&&l!==gi&&(pe=l.relatedTarget||l.fromElement)&&(ki(pe)||pe[Gr]))break e;if((ce||ee)&&(ee=te.window===te?te:(ee=te.ownerDocument)?ee.defaultView||ee.parentWindow:window,ce?(pe=l.relatedTarget||l.toElement,ce=K,pe=pe?ki(pe):null,pe!==null&&(gt=Jn(pe),pe!==gt||pe.tag!==5&&pe.tag!==6)&&(pe=null)):(ce=null,pe=K),ce!==pe)){if(me=Ro,se="onMouseLeave",B="onMouseEnter",L="mouse",(s==="pointerout"||s==="pointerover")&&(me=S,se="onPointerLeave",B="onPointerEnter",L="pointer"),gt=ce==null?ee:Fo(ce),z=pe==null?ee:Fo(pe),ee=new me(se,L+"leave",ce,l,te),ee.target=gt,ee.relatedTarget=z,se=null,ki(te)===K&&(me=new me(B,L+"enter",pe,l,te),me.target=z,me.relatedTarget=gt,se=me),gt=se,ce&&pe)t:{for(me=ce,B=pe,L=0,z=me;z;z=Mo(z))L++;for(z=0,se=B;se;se=Mo(se))z++;for(;0<L-z;)me=Mo(me),L--;for(;0<z-L;)B=Mo(B),z--;for(;L--;){if(me===B||B!==null&&me===B.alternate)break t;me=Mo(me),B=Mo(B)}me=null}else me=null;ce!==null&&Sy(ne,ee,ce,me,!1),pe!==null&&gt!==null&&Sy(ne,gt,pe,me,!0)}}e:{if(ee=K?Fo(K):window,ce=ee.nodeName&&ee.nodeName.toLowerCase(),ce==="select"||ce==="input"&&ee.type==="file")var ye=iS;else if(ry(ee))if(iy)ye=uS;else{ye=aS;var Ie=oS}else(ce=ee.nodeName)&&ce.toLowerCase()==="input"&&(ee.type==="checkbox"||ee.type==="radio")&&(ye=lS);if(ye&&(ye=ye(s,K))){sy(ne,ye,l,te);break e}Ie&&Ie(s,ee,K),s==="focusout"&&(Ie=ee._wrapperState)&&Ie.controlled&&ee.type==="number"&&lo(ee,"number",ee.value)}switch(Ie=K?Fo(K):window,s){case"focusin":(ry(Ie)||Ie.contentEditable==="true")&&(Oo=Ie,Jd=K,ll=null);break;case"focusout":ll=Jd=Oo=null;break;case"mousedown":Yd=!0;break;case"contextmenu":case"mouseup":case"dragend":Yd=!1,fy(ne,l,te);break;case"selectionchange":if(dS)break;case"keydown":case"keyup":fy(ne,l,te)}var Te;if(_t)e:{switch(s){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else Do?ty(s,l)&&(be="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(be="onCompositionStart");be&&(Ri&&l.locale!=="ko"&&(Do||be!=="onCompositionStart"?be==="onCompositionEnd"&&Do&&(Te=tl()):(Tn=te,So="value"in Tn?Tn.value:Tn.textContent,Do=!0)),Ie=oc(K,be),0<Ie.length&&(be=new sl(be,s,null,l,te),ne.push({event:be,listeners:Ie}),Te?be.data=Te:(Te=ny(l),Te!==null&&(be.data=Te)))),(Te=Sn?tS(s,l):nS(s,l))&&(K=oc(K,"onBeforeInput"),0<K.length&&(te=new sl("onBeforeInput","beforeinput",null,l,te),ne.push({event:te,listeners:K}),te.data=Te))}Iy(ne,i)})}function hl(s,i,l){return{instance:s,listener:i,currentTarget:l}}function oc(s,i){for(var l=i+"Capture",h=[];s!==null;){var f=s,y=f.stateNode;f.tag===5&&y!==null&&(f=y,y=mt(s,l),y!=null&&h.unshift(hl(s,y,f)),y=mt(s,i),y!=null&&h.push(hl(s,y,f))),s=s.return}return h}function Mo(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Sy(s,i,l,h,f){for(var y=i._reactName,w=[];l!==null&&l!==h;){var k=l,D=k.alternate,K=k.stateNode;if(D!==null&&D===h)break;k.tag===5&&K!==null&&(k=K,f?(D=mt(l,y),D!=null&&w.unshift(hl(l,D,k))):f||(D=mt(l,y),D!=null&&w.push(hl(l,D,k)))),l=l.return}w.length!==0&&s.push({event:i,listeners:w})}var gS=/\r\n?/g,yS=/\u0000|\uFFFD/g;function Ay(s){return(typeof s=="string"?s:""+s).replace(gS,`
`).replace(yS,"")}function ac(s,i,l){if(i=Ay(i),Ay(s)!==i&&l)throw Error(t(425))}function lc(){}var sf=null,of=null;function af(s,i){return s==="textarea"||s==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var lf=typeof setTimeout=="function"?setTimeout:void 0,_S=typeof clearTimeout=="function"?clearTimeout:void 0,xy=typeof Promise=="function"?Promise:void 0,vS=typeof queueMicrotask=="function"?queueMicrotask:typeof xy<"u"?function(s){return xy.resolve(null).then(s).catch(wS)}:lf;function wS(s){setTimeout(function(){throw s})}function uf(s,i){var l=i,h=0;do{var f=l.nextSibling;if(s.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"){if(h===0){s.removeChild(f),nr(i);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=f}while(l);nr(i)}function Ns(s){for(;s!=null;s=s.nextSibling){var i=s.nodeType;if(i===1||i===3)break;if(i===8){if(i=s.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return s}function Cy(s){s=s.previousSibling;for(var i=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return s;i--}else l==="/$"&&i++}s=s.previousSibling}return null}var Vo=Math.random().toString(36).slice(2),Er="__reactFiber$"+Vo,dl="__reactProps$"+Vo,Gr="__reactContainer$"+Vo,cf="__reactEvents$"+Vo,ES="__reactListeners$"+Vo,IS="__reactHandles$"+Vo;function ki(s){var i=s[Er];if(i)return i;for(var l=s.parentNode;l;){if(i=l[Gr]||l[Er]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(s=Cy(s);s!==null;){if(l=s[Er])return l;s=Cy(s)}return i}s=l,l=s.parentNode}return null}function fl(s){return s=s[Er]||s[Gr],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Fo(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function uc(s){return s[dl]||null}var hf=[],jo=-1;function Ds(s){return{current:s}}function it(s){0>jo||(s.current=hf[jo],hf[jo]=null,jo--)}function tt(s,i){jo++,hf[jo]=s.current,s.current=i}var Os={},Xt=Ds(Os),dn=Ds(!1),bi=Os;function Uo(s,i){var l=s.type.contextTypes;if(!l)return Os;var h=s.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===i)return h.__reactInternalMemoizedMaskedChildContext;var f={},y;for(y in l)f[y]=i[y];return h&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=i,s.__reactInternalMemoizedMaskedChildContext=f),f}function fn(s){return s=s.childContextTypes,s!=null}function cc(){it(dn),it(Xt)}function Ry(s,i,l){if(Xt.current!==Os)throw Error(t(168));tt(Xt,i),tt(dn,l)}function ky(s,i,l){var h=s.stateNode;if(i=i.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var f in h)if(!(f in i))throw Error(t(108,He(s)||"Unknown",f));return ie({},l,h)}function hc(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Os,bi=Xt.current,tt(Xt,s),tt(dn,dn.current),!0}function by(s,i,l){var h=s.stateNode;if(!h)throw Error(t(169));l?(s=ky(s,i,bi),h.__reactInternalMemoizedMergedChildContext=s,it(dn),it(Xt),tt(Xt,s)):it(dn),tt(dn,l)}var Qr=null,dc=!1,df=!1;function Py(s){Qr===null?Qr=[s]:Qr.push(s)}function TS(s){dc=!0,Py(s)}function Ls(){if(!df&&Qr!==null){df=!0;var s=0,i=$e;try{var l=Qr;for($e=1;s<l.length;s++){var h=l[s];do h=h(!0);while(h!==null)}Qr=null,dc=!1}catch(f){throw Qr!==null&&(Qr=Qr.slice(s+1)),vo(Ei,Ls),f}finally{$e=i,df=!1}}return null}var $o=[],Bo=0,fc=null,pc=0,Vn=[],Fn=0,Pi=null,Xr=1,Jr="";function Ni(s,i){$o[Bo++]=pc,$o[Bo++]=fc,fc=s,pc=i}function Ny(s,i,l){Vn[Fn++]=Xr,Vn[Fn++]=Jr,Vn[Fn++]=Pi,Pi=s;var h=Xr;s=Jr;var f=32-sn(h)-1;h&=~(1<<f),l+=1;var y=32-sn(i)+f;if(30<y){var w=f-f%5;y=(h&(1<<w)-1).toString(32),h>>=w,f-=w,Xr=1<<32-sn(i)+f|l<<f|h,Jr=y+s}else Xr=1<<y|l<<f|h,Jr=s}function ff(s){s.return!==null&&(Ni(s,1),Ny(s,1,0))}function pf(s){for(;s===fc;)fc=$o[--Bo],$o[Bo]=null,pc=$o[--Bo],$o[Bo]=null;for(;s===Pi;)Pi=Vn[--Fn],Vn[Fn]=null,Jr=Vn[--Fn],Vn[Fn]=null,Xr=Vn[--Fn],Vn[Fn]=null}var An=null,xn=null,lt=!1,ir=null;function Dy(s,i){var l=Bn(5,null,null,0);l.elementType="DELETED",l.stateNode=i,l.return=s,i=s.deletions,i===null?(s.deletions=[l],s.flags|=16):i.push(l)}function Oy(s,i){switch(s.tag){case 5:var l=s.type;return i=i.nodeType!==1||l.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(s.stateNode=i,An=s,xn=Ns(i.firstChild),!0):!1;case 6:return i=s.pendingProps===""||i.nodeType!==3?null:i,i!==null?(s.stateNode=i,An=s,xn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(l=Pi!==null?{id:Xr,overflow:Jr}:null,s.memoizedState={dehydrated:i,treeContext:l,retryLane:1073741824},l=Bn(18,null,null,0),l.stateNode=i,l.return=s,s.child=l,An=s,xn=null,!0):!1;default:return!1}}function mf(s){return(s.mode&1)!==0&&(s.flags&128)===0}function gf(s){if(lt){var i=xn;if(i){var l=i;if(!Oy(s,i)){if(mf(s))throw Error(t(418));i=Ns(l.nextSibling);var h=An;i&&Oy(s,i)?Dy(h,l):(s.flags=s.flags&-4097|2,lt=!1,An=s)}}else{if(mf(s))throw Error(t(418));s.flags=s.flags&-4097|2,lt=!1,An=s}}}function Ly(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;An=s}function mc(s){if(s!==An)return!1;if(!lt)return Ly(s),lt=!0,!1;var i;if((i=s.tag!==3)&&!(i=s.tag!==5)&&(i=s.type,i=i!=="head"&&i!=="body"&&!af(s.type,s.memoizedProps)),i&&(i=xn)){if(mf(s))throw My(),Error(t(418));for(;i;)Dy(s,i),i=Ns(i.nextSibling)}if(Ly(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,i=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"){if(i===0){xn=Ns(s.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++}s=s.nextSibling}xn=null}}else xn=An?Ns(s.stateNode.nextSibling):null;return!0}function My(){for(var s=xn;s;)s=Ns(s.nextSibling)}function zo(){xn=An=null,lt=!1}function yf(s){ir===null?ir=[s]:ir.push(s)}var SS=re.ReactCurrentBatchConfig;function or(s,i){if(s&&s.defaultProps){i=ie({},i),s=s.defaultProps;for(var l in s)i[l]===void 0&&(i[l]=s[l]);return i}return i}var gc=Ds(null),yc=null,Wo=null,_f=null;function vf(){_f=Wo=yc=null}function wf(s){var i=gc.current;it(gc),s._currentValue=i}function Ef(s,i,l){for(;s!==null;){var h=s.alternate;if((s.childLanes&i)!==i?(s.childLanes|=i,h!==null&&(h.childLanes|=i)):h!==null&&(h.childLanes&i)!==i&&(h.childLanes|=i),s===l)break;s=s.return}}function qo(s,i){yc=s,_f=Wo=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&i)!==0&&(pn=!0),s.firstContext=null)}function jn(s){var i=s._currentValue;if(_f!==s)if(s={context:s,memoizedValue:i,next:null},Wo===null){if(yc===null)throw Error(t(308));Wo=s,yc.dependencies={lanes:0,firstContext:s}}else Wo=Wo.next=s;return i}var Di=null;function If(s){Di===null?Di=[s]:Di.push(s)}function Vy(s,i,l,h){var f=i.interleaved;return f===null?(l.next=l,If(i)):(l.next=f.next,f.next=l),i.interleaved=l,Yr(s,h)}function Yr(s,i){s.lanes|=i;var l=s.alternate;for(l!==null&&(l.lanes|=i),l=s,s=s.return;s!==null;)s.childLanes|=i,l=s.alternate,l!==null&&(l.childLanes|=i),l=s,s=s.return;return l.tag===3?l.stateNode:null}var Ms=!1;function Tf(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fy(s,i){s=s.updateQueue,i.updateQueue===s&&(i.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Zr(s,i){return{eventTime:s,lane:i,tag:0,payload:null,callback:null,next:null}}function Vs(s,i,l){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,(We&2)!==0){var f=h.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),h.pending=i,Yr(s,l)}return f=h.interleaved,f===null?(i.next=i,If(h)):(i.next=f.next,f.next=i),h.interleaved=i,Yr(s,l)}function _c(s,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194240)!==0)){var h=i.lanes;h&=s.pendingLanes,l|=h,i.lanes=l,xs(s,l)}}function jy(s,i){var l=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var f=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var w={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};y===null?f=y=w:y=y.next=w,l=l.next}while(l!==null);y===null?f=y=i:y=y.next=i}else f=y=i;l={baseState:h.baseState,firstBaseUpdate:f,lastBaseUpdate:y,shared:h.shared,effects:h.effects},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=i:s.next=i,l.lastBaseUpdate=i}function vc(s,i,l,h){var f=s.updateQueue;Ms=!1;var y=f.firstBaseUpdate,w=f.lastBaseUpdate,k=f.shared.pending;if(k!==null){f.shared.pending=null;var D=k,K=D.next;D.next=null,w===null?y=K:w.next=K,w=D;var te=s.alternate;te!==null&&(te=te.updateQueue,k=te.lastBaseUpdate,k!==w&&(k===null?te.firstBaseUpdate=K:k.next=K,te.lastBaseUpdate=D))}if(y!==null){var ne=f.baseState;w=0,te=K=D=null,k=y;do{var ee=k.lane,ce=k.eventTime;if((h&ee)===ee){te!==null&&(te=te.next={eventTime:ce,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var pe=s,me=k;switch(ee=i,ce=l,me.tag){case 1:if(pe=me.payload,typeof pe=="function"){ne=pe.call(ce,ne,ee);break e}ne=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=me.payload,ee=typeof pe=="function"?pe.call(ce,ne,ee):pe,ee==null)break e;ne=ie({},ne,ee);break e;case 2:Ms=!0}}k.callback!==null&&k.lane!==0&&(s.flags|=64,ee=f.effects,ee===null?f.effects=[k]:ee.push(k))}else ce={eventTime:ce,lane:ee,tag:k.tag,payload:k.payload,callback:k.callback,next:null},te===null?(K=te=ce,D=ne):te=te.next=ce,w|=ee;if(k=k.next,k===null){if(k=f.shared.pending,k===null)break;ee=k,k=ee.next,ee.next=null,f.lastBaseUpdate=ee,f.shared.pending=null}}while(!0);if(te===null&&(D=ne),f.baseState=D,f.firstBaseUpdate=K,f.lastBaseUpdate=te,i=f.shared.interleaved,i!==null){f=i;do w|=f.lane,f=f.next;while(f!==i)}else y===null&&(f.shared.lanes=0);Mi|=w,s.lanes=w,s.memoizedState=ne}}function Uy(s,i,l){if(s=i.effects,i.effects=null,s!==null)for(i=0;i<s.length;i++){var h=s[i],f=h.callback;if(f!==null){if(h.callback=null,h=l,typeof f!="function")throw Error(t(191,f));f.call(h)}}}var $y=new n.Component().refs;function Sf(s,i,l,h){i=s.memoizedState,l=l(h,i),l=l==null?i:ie({},i,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var wc={isMounted:function(s){return(s=s._reactInternals)?Jn(s)===s:!1},enqueueSetState:function(s,i,l){s=s._reactInternals;var h=ln(),f=$s(s),y=Zr(h,f);y.payload=i,l!=null&&(y.callback=l),i=Vs(s,y,f),i!==null&&(ur(i,s,f,h),_c(i,s,f))},enqueueReplaceState:function(s,i,l){s=s._reactInternals;var h=ln(),f=$s(s),y=Zr(h,f);y.tag=1,y.payload=i,l!=null&&(y.callback=l),i=Vs(s,y,f),i!==null&&(ur(i,s,f,h),_c(i,s,f))},enqueueForceUpdate:function(s,i){s=s._reactInternals;var l=ln(),h=$s(s),f=Zr(l,h);f.tag=2,i!=null&&(f.callback=i),i=Vs(s,f,h),i!==null&&(ur(i,s,h,l),_c(i,s,h))}};function By(s,i,l,h,f,y,w){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,y,w):i.prototype&&i.prototype.isPureReactComponent?!al(l,h)||!al(f,y):!0}function zy(s,i,l){var h=!1,f=Os,y=i.contextType;return typeof y=="object"&&y!==null?y=jn(y):(f=fn(i)?bi:Xt.current,h=i.contextTypes,y=(h=h!=null)?Uo(s,f):Os),i=new i(l,y),s.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=wc,s.stateNode=i,i._reactInternals=s,h&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=f,s.__reactInternalMemoizedMaskedChildContext=y),i}function Wy(s,i,l,h){s=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,h),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,h),i.state!==s&&wc.enqueueReplaceState(i,i.state,null)}function Af(s,i,l,h){var f=s.stateNode;f.props=l,f.state=s.memoizedState,f.refs=$y,Tf(s);var y=i.contextType;typeof y=="object"&&y!==null?f.context=jn(y):(y=fn(i)?bi:Xt.current,f.context=Uo(s,y)),f.state=s.memoizedState,y=i.getDerivedStateFromProps,typeof y=="function"&&(Sf(s,i,y,l),f.state=s.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(i=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),i!==f.state&&wc.enqueueReplaceState(f,f.state,null),vc(s,l,f,h),f.state=s.memoizedState),typeof f.componentDidMount=="function"&&(s.flags|=4194308)}function pl(s,i,l){if(s=l.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var h=l.stateNode}if(!h)throw Error(t(147,s));var f=h,y=""+s;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===y?i.ref:(i=function(w){var k=f.refs;k===$y&&(k=f.refs={}),w===null?delete k[y]:k[y]=w},i._stringRef=y,i)}if(typeof s!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,s))}return s}function Ec(s,i){throw s=Object.prototype.toString.call(i),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":s))}function qy(s){var i=s._init;return i(s._payload)}function Hy(s){function i(B,L){if(s){var z=B.deletions;z===null?(B.deletions=[L],B.flags|=16):z.push(L)}}function l(B,L){if(!s)return null;for(;L!==null;)i(B,L),L=L.sibling;return null}function h(B,L){for(B=new Map;L!==null;)L.key!==null?B.set(L.key,L):B.set(L.index,L),L=L.sibling;return B}function f(B,L){return B=zs(B,L),B.index=0,B.sibling=null,B}function y(B,L,z){return B.index=z,s?(z=B.alternate,z!==null?(z=z.index,z<L?(B.flags|=2,L):z):(B.flags|=2,L)):(B.flags|=1048576,L)}function w(B){return s&&B.alternate===null&&(B.flags|=2),B}function k(B,L,z,se){return L===null||L.tag!==6?(L=lp(z,B.mode,se),L.return=B,L):(L=f(L,z),L.return=B,L)}function D(B,L,z,se){var ye=z.type;return ye===b?te(B,L,z.props.children,se,z.key):L!==null&&(L.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===rt&&qy(ye)===L.type)?(se=f(L,z.props),se.ref=pl(B,L,z),se.return=B,se):(se=Uc(z.type,z.key,z.props,null,B.mode,se),se.ref=pl(B,L,z),se.return=B,se)}function K(B,L,z,se){return L===null||L.tag!==4||L.stateNode.containerInfo!==z.containerInfo||L.stateNode.implementation!==z.implementation?(L=up(z,B.mode,se),L.return=B,L):(L=f(L,z.children||[]),L.return=B,L)}function te(B,L,z,se,ye){return L===null||L.tag!==7?(L=Ui(z,B.mode,se,ye),L.return=B,L):(L=f(L,z),L.return=B,L)}function ne(B,L,z){if(typeof L=="string"&&L!==""||typeof L=="number")return L=lp(""+L,B.mode,z),L.return=B,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case _e:return z=Uc(L.type,L.key,L.props,null,B.mode,z),z.ref=pl(B,null,L),z.return=B,z;case ge:return L=up(L,B.mode,z),L.return=B,L;case rt:var se=L._init;return ne(B,se(L._payload),z)}if(jr(L)||Y(L))return L=Ui(L,B.mode,z,null),L.return=B,L;Ec(B,L)}return null}function ee(B,L,z,se){var ye=L!==null?L.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return ye!==null?null:k(B,L,""+z,se);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case _e:return z.key===ye?D(B,L,z,se):null;case ge:return z.key===ye?K(B,L,z,se):null;case rt:return ye=z._init,ee(B,L,ye(z._payload),se)}if(jr(z)||Y(z))return ye!==null?null:te(B,L,z,se,null);Ec(B,z)}return null}function ce(B,L,z,se,ye){if(typeof se=="string"&&se!==""||typeof se=="number")return B=B.get(z)||null,k(L,B,""+se,ye);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case _e:return B=B.get(se.key===null?z:se.key)||null,D(L,B,se,ye);case ge:return B=B.get(se.key===null?z:se.key)||null,K(L,B,se,ye);case rt:var Ie=se._init;return ce(B,L,z,Ie(se._payload),ye)}if(jr(se)||Y(se))return B=B.get(z)||null,te(L,B,se,ye,null);Ec(L,se)}return null}function pe(B,L,z,se){for(var ye=null,Ie=null,Te=L,be=L=0,Vt=null;Te!==null&&be<z.length;be++){Te.index>be?(Vt=Te,Te=null):Vt=Te.sibling;var qe=ee(B,Te,z[be],se);if(qe===null){Te===null&&(Te=Vt);break}s&&Te&&qe.alternate===null&&i(B,Te),L=y(qe,L,be),Ie===null?ye=qe:Ie.sibling=qe,Ie=qe,Te=Vt}if(be===z.length)return l(B,Te),lt&&Ni(B,be),ye;if(Te===null){for(;be<z.length;be++)Te=ne(B,z[be],se),Te!==null&&(L=y(Te,L,be),Ie===null?ye=Te:Ie.sibling=Te,Ie=Te);return lt&&Ni(B,be),ye}for(Te=h(B,Te);be<z.length;be++)Vt=ce(Te,B,be,z[be],se),Vt!==null&&(s&&Vt.alternate!==null&&Te.delete(Vt.key===null?be:Vt.key),L=y(Vt,L,be),Ie===null?ye=Vt:Ie.sibling=Vt,Ie=Vt);return s&&Te.forEach(function(Ws){return i(B,Ws)}),lt&&Ni(B,be),ye}function me(B,L,z,se){var ye=Y(z);if(typeof ye!="function")throw Error(t(150));if(z=ye.call(z),z==null)throw Error(t(151));for(var Ie=ye=null,Te=L,be=L=0,Vt=null,qe=z.next();Te!==null&&!qe.done;be++,qe=z.next()){Te.index>be?(Vt=Te,Te=null):Vt=Te.sibling;var Ws=ee(B,Te,qe.value,se);if(Ws===null){Te===null&&(Te=Vt);break}s&&Te&&Ws.alternate===null&&i(B,Te),L=y(Ws,L,be),Ie===null?ye=Ws:Ie.sibling=Ws,Ie=Ws,Te=Vt}if(qe.done)return l(B,Te),lt&&Ni(B,be),ye;if(Te===null){for(;!qe.done;be++,qe=z.next())qe=ne(B,qe.value,se),qe!==null&&(L=y(qe,L,be),Ie===null?ye=qe:Ie.sibling=qe,Ie=qe);return lt&&Ni(B,be),ye}for(Te=h(B,Te);!qe.done;be++,qe=z.next())qe=ce(Te,B,be,qe.value,se),qe!==null&&(s&&qe.alternate!==null&&Te.delete(qe.key===null?be:qe.key),L=y(qe,L,be),Ie===null?ye=qe:Ie.sibling=qe,Ie=qe);return s&&Te.forEach(function(rA){return i(B,rA)}),lt&&Ni(B,be),ye}function gt(B,L,z,se){if(typeof z=="object"&&z!==null&&z.type===b&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case _e:e:{for(var ye=z.key,Ie=L;Ie!==null;){if(Ie.key===ye){if(ye=z.type,ye===b){if(Ie.tag===7){l(B,Ie.sibling),L=f(Ie,z.props.children),L.return=B,B=L;break e}}else if(Ie.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===rt&&qy(ye)===Ie.type){l(B,Ie.sibling),L=f(Ie,z.props),L.ref=pl(B,Ie,z),L.return=B,B=L;break e}l(B,Ie);break}else i(B,Ie);Ie=Ie.sibling}z.type===b?(L=Ui(z.props.children,B.mode,se,z.key),L.return=B,B=L):(se=Uc(z.type,z.key,z.props,null,B.mode,se),se.ref=pl(B,L,z),se.return=B,B=se)}return w(B);case ge:e:{for(Ie=z.key;L!==null;){if(L.key===Ie)if(L.tag===4&&L.stateNode.containerInfo===z.containerInfo&&L.stateNode.implementation===z.implementation){l(B,L.sibling),L=f(L,z.children||[]),L.return=B,B=L;break e}else{l(B,L);break}else i(B,L);L=L.sibling}L=up(z,B.mode,se),L.return=B,B=L}return w(B);case rt:return Ie=z._init,gt(B,L,Ie(z._payload),se)}if(jr(z))return pe(B,L,z,se);if(Y(z))return me(B,L,z,se);Ec(B,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,L!==null&&L.tag===6?(l(B,L.sibling),L=f(L,z),L.return=B,B=L):(l(B,L),L=lp(z,B.mode,se),L.return=B,B=L),w(B)):l(B,L)}return gt}var Ho=Hy(!0),Ky=Hy(!1),ml={},Ir=Ds(ml),gl=Ds(ml),yl=Ds(ml);function Oi(s){if(s===ml)throw Error(t(174));return s}function xf(s,i){switch(tt(yl,i),tt(gl,s),tt(Ir,ml),s=i.nodeType,s){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:xt(null,"");break;default:s=s===8?i.parentNode:i,i=s.namespaceURI||null,s=s.tagName,i=xt(i,s)}it(Ir),tt(Ir,i)}function Ko(){it(Ir),it(gl),it(yl)}function Gy(s){Oi(yl.current);var i=Oi(Ir.current),l=xt(i,s.type);i!==l&&(tt(gl,s),tt(Ir,l))}function Cf(s){gl.current===s&&(it(Ir),it(gl))}var ut=Ds(0);function Ic(s){for(var i=s;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Rf=[];function kf(){for(var s=0;s<Rf.length;s++)Rf[s]._workInProgressVersionPrimary=null;Rf.length=0}var Tc=re.ReactCurrentDispatcher,bf=re.ReactCurrentBatchConfig,Li=0,ct=null,Rt=null,Lt=null,Sc=!1,_l=!1,vl=0,AS=0;function Jt(){throw Error(t(321))}function Pf(s,i){if(i===null)return!1;for(var l=0;l<i.length&&l<s.length;l++)if(!sr(s[l],i[l]))return!1;return!0}function Nf(s,i,l,h,f,y){if(Li=y,ct=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Tc.current=s===null||s.memoizedState===null?kS:bS,s=l(h,f),_l){y=0;do{if(_l=!1,vl=0,25<=y)throw Error(t(301));y+=1,Lt=Rt=null,i.updateQueue=null,Tc.current=PS,s=l(h,f)}while(_l)}if(Tc.current=Cc,i=Rt!==null&&Rt.next!==null,Li=0,Lt=Rt=ct=null,Sc=!1,i)throw Error(t(300));return s}function Df(){var s=vl!==0;return vl=0,s}function Tr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?ct.memoizedState=Lt=s:Lt=Lt.next=s,Lt}function Un(){if(Rt===null){var s=ct.alternate;s=s!==null?s.memoizedState:null}else s=Rt.next;var i=Lt===null?ct.memoizedState:Lt.next;if(i!==null)Lt=i,Rt=s;else{if(s===null)throw Error(t(310));Rt=s,s={memoizedState:Rt.memoizedState,baseState:Rt.baseState,baseQueue:Rt.baseQueue,queue:Rt.queue,next:null},Lt===null?ct.memoizedState=Lt=s:Lt=Lt.next=s}return Lt}function wl(s,i){return typeof i=="function"?i(s):i}function Of(s){var i=Un(),l=i.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=s;var h=Rt,f=h.baseQueue,y=l.pending;if(y!==null){if(f!==null){var w=f.next;f.next=y.next,y.next=w}h.baseQueue=f=y,l.pending=null}if(f!==null){y=f.next,h=h.baseState;var k=w=null,D=null,K=y;do{var te=K.lane;if((Li&te)===te)D!==null&&(D=D.next={lane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),h=K.hasEagerState?K.eagerState:s(h,K.action);else{var ne={lane:te,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null};D===null?(k=D=ne,w=h):D=D.next=ne,ct.lanes|=te,Mi|=te}K=K.next}while(K!==null&&K!==y);D===null?w=h:D.next=k,sr(h,i.memoizedState)||(pn=!0),i.memoizedState=h,i.baseState=w,i.baseQueue=D,l.lastRenderedState=h}if(s=l.interleaved,s!==null){f=s;do y=f.lane,ct.lanes|=y,Mi|=y,f=f.next;while(f!==s)}else f===null&&(l.lanes=0);return[i.memoizedState,l.dispatch]}function Lf(s){var i=Un(),l=i.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=s;var h=l.dispatch,f=l.pending,y=i.memoizedState;if(f!==null){l.pending=null;var w=f=f.next;do y=s(y,w.action),w=w.next;while(w!==f);sr(y,i.memoizedState)||(pn=!0),i.memoizedState=y,i.baseQueue===null&&(i.baseState=y),l.lastRenderedState=y}return[y,h]}function Qy(){}function Xy(s,i){var l=ct,h=Un(),f=i(),y=!sr(h.memoizedState,f);if(y&&(h.memoizedState=f,pn=!0),h=h.queue,Mf(Zy.bind(null,l,h,s),[s]),h.getSnapshot!==i||y||Lt!==null&&Lt.memoizedState.tag&1){if(l.flags|=2048,El(9,Yy.bind(null,l,h,f,i),void 0,null),Mt===null)throw Error(t(349));(Li&30)!==0||Jy(l,i,f)}return f}function Jy(s,i,l){s.flags|=16384,s={getSnapshot:i,value:l},i=ct.updateQueue,i===null?(i={lastEffect:null,stores:null},ct.updateQueue=i,i.stores=[s]):(l=i.stores,l===null?i.stores=[s]:l.push(s))}function Yy(s,i,l,h){i.value=l,i.getSnapshot=h,e_(i)&&t_(s)}function Zy(s,i,l){return l(function(){e_(i)&&t_(s)})}function e_(s){var i=s.getSnapshot;s=s.value;try{var l=i();return!sr(s,l)}catch{return!0}}function t_(s){var i=Yr(s,1);i!==null&&ur(i,s,1,-1)}function n_(s){var i=Tr();return typeof s=="function"&&(s=s()),i.memoizedState=i.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wl,lastRenderedState:s},i.queue=s,s=s.dispatch=RS.bind(null,ct,s),[i.memoizedState,s]}function El(s,i,l,h){return s={tag:s,create:i,destroy:l,deps:h,next:null},i=ct.updateQueue,i===null?(i={lastEffect:null,stores:null},ct.updateQueue=i,i.lastEffect=s.next=s):(l=i.lastEffect,l===null?i.lastEffect=s.next=s:(h=l.next,l.next=s,s.next=h,i.lastEffect=s)),s}function r_(){return Un().memoizedState}function Ac(s,i,l,h){var f=Tr();ct.flags|=s,f.memoizedState=El(1|i,l,void 0,h===void 0?null:h)}function xc(s,i,l,h){var f=Un();h=h===void 0?null:h;var y=void 0;if(Rt!==null){var w=Rt.memoizedState;if(y=w.destroy,h!==null&&Pf(h,w.deps)){f.memoizedState=El(i,l,y,h);return}}ct.flags|=s,f.memoizedState=El(1|i,l,y,h)}function s_(s,i){return Ac(8390656,8,s,i)}function Mf(s,i){return xc(2048,8,s,i)}function i_(s,i){return xc(4,2,s,i)}function o_(s,i){return xc(4,4,s,i)}function a_(s,i){if(typeof i=="function")return s=s(),i(s),function(){i(null)};if(i!=null)return s=s(),i.current=s,function(){i.current=null}}function l_(s,i,l){return l=l!=null?l.concat([s]):null,xc(4,4,a_.bind(null,i,s),l)}function Vf(){}function u_(s,i){var l=Un();i=i===void 0?null:i;var h=l.memoizedState;return h!==null&&i!==null&&Pf(i,h[1])?h[0]:(l.memoizedState=[s,i],s)}function c_(s,i){var l=Un();i=i===void 0?null:i;var h=l.memoizedState;return h!==null&&i!==null&&Pf(i,h[1])?h[0]:(s=s(),l.memoizedState=[s,i],s)}function h_(s,i,l){return(Li&21)===0?(s.baseState&&(s.baseState=!1,pn=!0),s.memoizedState=l):(sr(l,i)||(l=Si(),ct.lanes|=l,Mi|=l,s.baseState=!0),i)}function xS(s,i){var l=$e;$e=l!==0&&4>l?l:4,s(!0);var h=bf.transition;bf.transition={};try{s(!1),i()}finally{$e=l,bf.transition=h}}function d_(){return Un().memoizedState}function CS(s,i,l){var h=$s(s);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},f_(s))p_(i,l);else if(l=Vy(s,i,l,h),l!==null){var f=ln();ur(l,s,h,f),m_(l,i,h)}}function RS(s,i,l){var h=$s(s),f={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(f_(s))p_(i,f);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=i.lastRenderedReducer,y!==null))try{var w=i.lastRenderedState,k=y(w,l);if(f.hasEagerState=!0,f.eagerState=k,sr(k,w)){var D=i.interleaved;D===null?(f.next=f,If(i)):(f.next=D.next,D.next=f),i.interleaved=f;return}}catch{}finally{}l=Vy(s,i,f,h),l!==null&&(f=ln(),ur(l,s,h,f),m_(l,i,h))}}function f_(s){var i=s.alternate;return s===ct||i!==null&&i===ct}function p_(s,i){_l=Sc=!0;var l=s.pending;l===null?i.next=i:(i.next=l.next,l.next=i),s.pending=i}function m_(s,i,l){if((l&4194240)!==0){var h=i.lanes;h&=s.pendingLanes,l|=h,i.lanes=l,xs(s,l)}}var Cc={readContext:jn,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useInsertionEffect:Jt,useLayoutEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useMutableSource:Jt,useSyncExternalStore:Jt,useId:Jt,unstable_isNewReconciler:!1},kS={readContext:jn,useCallback:function(s,i){return Tr().memoizedState=[s,i===void 0?null:i],s},useContext:jn,useEffect:s_,useImperativeHandle:function(s,i,l){return l=l!=null?l.concat([s]):null,Ac(4194308,4,a_.bind(null,i,s),l)},useLayoutEffect:function(s,i){return Ac(4194308,4,s,i)},useInsertionEffect:function(s,i){return Ac(4,2,s,i)},useMemo:function(s,i){var l=Tr();return i=i===void 0?null:i,s=s(),l.memoizedState=[s,i],s},useReducer:function(s,i,l){var h=Tr();return i=l!==void 0?l(i):i,h.memoizedState=h.baseState=i,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:i},h.queue=s,s=s.dispatch=CS.bind(null,ct,s),[h.memoizedState,s]},useRef:function(s){var i=Tr();return s={current:s},i.memoizedState=s},useState:n_,useDebugValue:Vf,useDeferredValue:function(s){return Tr().memoizedState=s},useTransition:function(){var s=n_(!1),i=s[0];return s=xS.bind(null,s[1]),Tr().memoizedState=s,[i,s]},useMutableSource:function(){},useSyncExternalStore:function(s,i,l){var h=ct,f=Tr();if(lt){if(l===void 0)throw Error(t(407));l=l()}else{if(l=i(),Mt===null)throw Error(t(349));(Li&30)!==0||Jy(h,i,l)}f.memoizedState=l;var y={value:l,getSnapshot:i};return f.queue=y,s_(Zy.bind(null,h,y,s),[s]),h.flags|=2048,El(9,Yy.bind(null,h,y,l,i),void 0,null),l},useId:function(){var s=Tr(),i=Mt.identifierPrefix;if(lt){var l=Jr,h=Xr;l=(h&~(1<<32-sn(h)-1)).toString(32)+l,i=":"+i+"R"+l,l=vl++,0<l&&(i+="H"+l.toString(32)),i+=":"}else l=AS++,i=":"+i+"r"+l.toString(32)+":";return s.memoizedState=i},unstable_isNewReconciler:!1},bS={readContext:jn,useCallback:u_,useContext:jn,useEffect:Mf,useImperativeHandle:l_,useInsertionEffect:i_,useLayoutEffect:o_,useMemo:c_,useReducer:Of,useRef:r_,useState:function(){return Of(wl)},useDebugValue:Vf,useDeferredValue:function(s){var i=Un();return h_(i,Rt.memoizedState,s)},useTransition:function(){var s=Of(wl)[0],i=Un().memoizedState;return[s,i]},useMutableSource:Qy,useSyncExternalStore:Xy,useId:d_,unstable_isNewReconciler:!1},PS={readContext:jn,useCallback:u_,useContext:jn,useEffect:Mf,useImperativeHandle:l_,useInsertionEffect:i_,useLayoutEffect:o_,useMemo:c_,useReducer:Lf,useRef:r_,useState:function(){return Lf(wl)},useDebugValue:Vf,useDeferredValue:function(s){var i=Un();return Rt===null?i.memoizedState=s:h_(i,Rt.memoizedState,s)},useTransition:function(){var s=Lf(wl)[0],i=Un().memoizedState;return[s,i]},useMutableSource:Qy,useSyncExternalStore:Xy,useId:d_,unstable_isNewReconciler:!1};function Go(s,i){try{var l="",h=i;do l+=Oe(h),h=h.return;while(h);var f=l}catch(y){f=`
Error generating stack: `+y.message+`
`+y.stack}return{value:s,source:i,stack:f,digest:null}}function Ff(s,i,l){return{value:s,source:null,stack:l??null,digest:i??null}}function jf(s,i){try{console.error(i.value)}catch(l){setTimeout(function(){throw l})}}var NS=typeof WeakMap=="function"?WeakMap:Map;function g_(s,i,l){l=Zr(-1,l),l.tag=3,l.payload={element:null};var h=i.value;return l.callback=function(){Oc||(Oc=!0,ep=h),jf(s,i)},l}function y_(s,i,l){l=Zr(-1,l),l.tag=3;var h=s.type.getDerivedStateFromError;if(typeof h=="function"){var f=i.value;l.payload=function(){return h(f)},l.callback=function(){jf(s,i)}}var y=s.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(l.callback=function(){jf(s,i),typeof h!="function"&&(js===null?js=new Set([this]):js.add(this));var w=i.stack;this.componentDidCatch(i.value,{componentStack:w!==null?w:""})}),l}function __(s,i,l){var h=s.pingCache;if(h===null){h=s.pingCache=new NS;var f=new Set;h.set(i,f)}else f=h.get(i),f===void 0&&(f=new Set,h.set(i,f));f.has(l)||(f.add(l),s=HS.bind(null,s,i,l),i.then(s,s))}function v_(s){do{var i;if((i=s.tag===13)&&(i=s.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return s;s=s.return}while(s!==null);return null}function w_(s,i,l,h,f){return(s.mode&1)===0?(s===i?s.flags|=65536:(s.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(i=Zr(-1,1),i.tag=2,Vs(l,i,1))),l.lanes|=1),s):(s.flags|=65536,s.lanes=f,s)}var DS=re.ReactCurrentOwner,pn=!1;function an(s,i,l,h){i.child=s===null?Ky(i,null,l,h):Ho(i,s.child,l,h)}function E_(s,i,l,h,f){l=l.render;var y=i.ref;return qo(i,f),h=Nf(s,i,l,h,y,f),l=Df(),s!==null&&!pn?(i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~f,es(s,i,f)):(lt&&l&&ff(i),i.flags|=1,an(s,i,h,f),i.child)}function I_(s,i,l,h,f){if(s===null){var y=l.type;return typeof y=="function"&&!ap(y)&&y.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(i.tag=15,i.type=y,T_(s,i,y,h,f)):(s=Uc(l.type,null,h,i,i.mode,f),s.ref=i.ref,s.return=i,i.child=s)}if(y=s.child,(s.lanes&f)===0){var w=y.memoizedProps;if(l=l.compare,l=l!==null?l:al,l(w,h)&&s.ref===i.ref)return es(s,i,f)}return i.flags|=1,s=zs(y,h),s.ref=i.ref,s.return=i,i.child=s}function T_(s,i,l,h,f){if(s!==null){var y=s.memoizedProps;if(al(y,h)&&s.ref===i.ref)if(pn=!1,i.pendingProps=h=y,(s.lanes&f)!==0)(s.flags&131072)!==0&&(pn=!0);else return i.lanes=s.lanes,es(s,i,f)}return Uf(s,i,l,h,f)}function S_(s,i,l){var h=i.pendingProps,f=h.children,y=s!==null?s.memoizedState:null;if(h.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt(Xo,Cn),Cn|=l;else{if((l&1073741824)===0)return s=y!==null?y.baseLanes|l:l,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:s,cachePool:null,transitions:null},i.updateQueue=null,tt(Xo,Cn),Cn|=s,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=y!==null?y.baseLanes:l,tt(Xo,Cn),Cn|=h}else y!==null?(h=y.baseLanes|l,i.memoizedState=null):h=l,tt(Xo,Cn),Cn|=h;return an(s,i,f,l),i.child}function A_(s,i){var l=i.ref;(s===null&&l!==null||s!==null&&s.ref!==l)&&(i.flags|=512,i.flags|=2097152)}function Uf(s,i,l,h,f){var y=fn(l)?bi:Xt.current;return y=Uo(i,y),qo(i,f),l=Nf(s,i,l,h,y,f),h=Df(),s!==null&&!pn?(i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~f,es(s,i,f)):(lt&&h&&ff(i),i.flags|=1,an(s,i,l,f),i.child)}function x_(s,i,l,h,f){if(fn(l)){var y=!0;hc(i)}else y=!1;if(qo(i,f),i.stateNode===null)kc(s,i),zy(i,l,h),Af(i,l,h,f),h=!0;else if(s===null){var w=i.stateNode,k=i.memoizedProps;w.props=k;var D=w.context,K=l.contextType;typeof K=="object"&&K!==null?K=jn(K):(K=fn(l)?bi:Xt.current,K=Uo(i,K));var te=l.getDerivedStateFromProps,ne=typeof te=="function"||typeof w.getSnapshotBeforeUpdate=="function";ne||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(k!==h||D!==K)&&Wy(i,w,h,K),Ms=!1;var ee=i.memoizedState;w.state=ee,vc(i,h,w,f),D=i.memoizedState,k!==h||ee!==D||dn.current||Ms?(typeof te=="function"&&(Sf(i,l,te,h),D=i.memoizedState),(k=Ms||By(i,l,k,h,ee,D,K))?(ne||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(i.flags|=4194308)):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=h,i.memoizedState=D),w.props=h,w.state=D,w.context=K,h=k):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),h=!1)}else{w=i.stateNode,Fy(s,i),k=i.memoizedProps,K=i.type===i.elementType?k:or(i.type,k),w.props=K,ne=i.pendingProps,ee=w.context,D=l.contextType,typeof D=="object"&&D!==null?D=jn(D):(D=fn(l)?bi:Xt.current,D=Uo(i,D));var ce=l.getDerivedStateFromProps;(te=typeof ce=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(k!==ne||ee!==D)&&Wy(i,w,h,D),Ms=!1,ee=i.memoizedState,w.state=ee,vc(i,h,w,f);var pe=i.memoizedState;k!==ne||ee!==pe||dn.current||Ms?(typeof ce=="function"&&(Sf(i,l,ce,h),pe=i.memoizedState),(K=Ms||By(i,l,K,h,ee,pe,D)||!1)?(te||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,pe,D),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,pe,D)),typeof w.componentDidUpdate=="function"&&(i.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof w.componentDidUpdate!="function"||k===s.memoizedProps&&ee===s.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||k===s.memoizedProps&&ee===s.memoizedState||(i.flags|=1024),i.memoizedProps=h,i.memoizedState=pe),w.props=h,w.state=pe,w.context=D,h=K):(typeof w.componentDidUpdate!="function"||k===s.memoizedProps&&ee===s.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||k===s.memoizedProps&&ee===s.memoizedState||(i.flags|=1024),h=!1)}return $f(s,i,l,h,y,f)}function $f(s,i,l,h,f,y){A_(s,i);var w=(i.flags&128)!==0;if(!h&&!w)return f&&by(i,l,!1),es(s,i,y);h=i.stateNode,DS.current=i;var k=w&&typeof l.getDerivedStateFromError!="function"?null:h.render();return i.flags|=1,s!==null&&w?(i.child=Ho(i,s.child,null,y),i.child=Ho(i,null,k,y)):an(s,i,k,y),i.memoizedState=h.state,f&&by(i,l,!0),i.child}function C_(s){var i=s.stateNode;i.pendingContext?Ry(s,i.pendingContext,i.pendingContext!==i.context):i.context&&Ry(s,i.context,!1),xf(s,i.containerInfo)}function R_(s,i,l,h,f){return zo(),yf(f),i.flags|=256,an(s,i,l,h),i.child}var Bf={dehydrated:null,treeContext:null,retryLane:0};function zf(s){return{baseLanes:s,cachePool:null,transitions:null}}function k_(s,i,l){var h=i.pendingProps,f=ut.current,y=!1,w=(i.flags&128)!==0,k;if((k=w)||(k=s!==null&&s.memoizedState===null?!1:(f&2)!==0),k?(y=!0,i.flags&=-129):(s===null||s.memoizedState!==null)&&(f|=1),tt(ut,f&1),s===null)return gf(i),s=i.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((i.mode&1)===0?i.lanes=1:s.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(w=h.children,s=h.fallback,y?(h=i.mode,y=i.child,w={mode:"hidden",children:w},(h&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=w):y=$c(w,h,0,null),s=Ui(s,h,l,null),y.return=i,s.return=i,y.sibling=s,i.child=y,i.child.memoizedState=zf(l),i.memoizedState=Bf,s):Wf(i,w));if(f=s.memoizedState,f!==null&&(k=f.dehydrated,k!==null))return OS(s,i,w,h,k,f,l);if(y){y=h.fallback,w=i.mode,f=s.child,k=f.sibling;var D={mode:"hidden",children:h.children};return(w&1)===0&&i.child!==f?(h=i.child,h.childLanes=0,h.pendingProps=D,i.deletions=null):(h=zs(f,D),h.subtreeFlags=f.subtreeFlags&14680064),k!==null?y=zs(k,y):(y=Ui(y,w,l,null),y.flags|=2),y.return=i,h.return=i,h.sibling=y,i.child=h,h=y,y=i.child,w=s.child.memoizedState,w=w===null?zf(l):{baseLanes:w.baseLanes|l,cachePool:null,transitions:w.transitions},y.memoizedState=w,y.childLanes=s.childLanes&~l,i.memoizedState=Bf,h}return y=s.child,s=y.sibling,h=zs(y,{mode:"visible",children:h.children}),(i.mode&1)===0&&(h.lanes=l),h.return=i,h.sibling=null,s!==null&&(l=i.deletions,l===null?(i.deletions=[s],i.flags|=16):l.push(s)),i.child=h,i.memoizedState=null,h}function Wf(s,i){return i=$c({mode:"visible",children:i},s.mode,0,null),i.return=s,s.child=i}function Rc(s,i,l,h){return h!==null&&yf(h),Ho(i,s.child,null,l),s=Wf(i,i.pendingProps.children),s.flags|=2,i.memoizedState=null,s}function OS(s,i,l,h,f,y,w){if(l)return i.flags&256?(i.flags&=-257,h=Ff(Error(t(422))),Rc(s,i,w,h)):i.memoizedState!==null?(i.child=s.child,i.flags|=128,null):(y=h.fallback,f=i.mode,h=$c({mode:"visible",children:h.children},f,0,null),y=Ui(y,f,w,null),y.flags|=2,h.return=i,y.return=i,h.sibling=y,i.child=h,(i.mode&1)!==0&&Ho(i,s.child,null,w),i.child.memoizedState=zf(w),i.memoizedState=Bf,y);if((i.mode&1)===0)return Rc(s,i,w,null);if(f.data==="$!"){if(h=f.nextSibling&&f.nextSibling.dataset,h)var k=h.dgst;return h=k,y=Error(t(419)),h=Ff(y,h,void 0),Rc(s,i,w,h)}if(k=(w&s.childLanes)!==0,pn||k){if(h=Mt,h!==null){switch(w&-w){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(h.suspendedLanes|w))!==0?0:f,f!==0&&f!==y.retryLane&&(y.retryLane=f,Yr(s,f),ur(h,s,f,-1))}return op(),h=Ff(Error(t(421))),Rc(s,i,w,h)}return f.data==="$?"?(i.flags|=128,i.child=s.child,i=KS.bind(null,s),f._reactRetry=i,null):(s=y.treeContext,xn=Ns(f.nextSibling),An=i,lt=!0,ir=null,s!==null&&(Vn[Fn++]=Xr,Vn[Fn++]=Jr,Vn[Fn++]=Pi,Xr=s.id,Jr=s.overflow,Pi=i),i=Wf(i,h.children),i.flags|=4096,i)}function b_(s,i,l){s.lanes|=i;var h=s.alternate;h!==null&&(h.lanes|=i),Ef(s.return,i,l)}function qf(s,i,l,h,f){var y=s.memoizedState;y===null?s.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:f}:(y.isBackwards=i,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=l,y.tailMode=f)}function P_(s,i,l){var h=i.pendingProps,f=h.revealOrder,y=h.tail;if(an(s,i,h.children,l),h=ut.current,(h&2)!==0)h=h&1|2,i.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=i.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&b_(s,l,i);else if(s.tag===19)b_(s,l,i);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}h&=1}if(tt(ut,h),(i.mode&1)===0)i.memoizedState=null;else switch(f){case"forwards":for(l=i.child,f=null;l!==null;)s=l.alternate,s!==null&&Ic(s)===null&&(f=l),l=l.sibling;l=f,l===null?(f=i.child,i.child=null):(f=l.sibling,l.sibling=null),qf(i,!1,f,l,y);break;case"backwards":for(l=null,f=i.child,i.child=null;f!==null;){if(s=f.alternate,s!==null&&Ic(s)===null){i.child=f;break}s=f.sibling,f.sibling=l,l=f,f=s}qf(i,!0,l,null,y);break;case"together":qf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function kc(s,i){(i.mode&1)===0&&s!==null&&(s.alternate=null,i.alternate=null,i.flags|=2)}function es(s,i,l){if(s!==null&&(i.dependencies=s.dependencies),Mi|=i.lanes,(l&i.childLanes)===0)return null;if(s!==null&&i.child!==s.child)throw Error(t(153));if(i.child!==null){for(s=i.child,l=zs(s,s.pendingProps),i.child=l,l.return=i;s.sibling!==null;)s=s.sibling,l=l.sibling=zs(s,s.pendingProps),l.return=i;l.sibling=null}return i.child}function LS(s,i,l){switch(i.tag){case 3:C_(i),zo();break;case 5:Gy(i);break;case 1:fn(i.type)&&hc(i);break;case 4:xf(i,i.stateNode.containerInfo);break;case 10:var h=i.type._context,f=i.memoizedProps.value;tt(gc,h._currentValue),h._currentValue=f;break;case 13:if(h=i.memoizedState,h!==null)return h.dehydrated!==null?(tt(ut,ut.current&1),i.flags|=128,null):(l&i.child.childLanes)!==0?k_(s,i,l):(tt(ut,ut.current&1),s=es(s,i,l),s!==null?s.sibling:null);tt(ut,ut.current&1);break;case 19:if(h=(l&i.childLanes)!==0,(s.flags&128)!==0){if(h)return P_(s,i,l);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),tt(ut,ut.current),h)break;return null;case 22:case 23:return i.lanes=0,S_(s,i,l)}return es(s,i,l)}var N_,Hf,D_,O_;N_=function(s,i){for(var l=i.child;l!==null;){if(l.tag===5||l.tag===6)s.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Hf=function(){},D_=function(s,i,l,h){var f=s.memoizedProps;if(f!==h){s=i.stateNode,Oi(Ir.current);var y=null;switch(l){case"input":f=fi(s,f),h=fi(s,h),y=[];break;case"select":f=ie({},f,{value:void 0}),h=ie({},h,{value:void 0}),y=[];break;case"textarea":f=Ma(s,f),h=Ma(s,h),y=[];break;default:typeof f.onClick!="function"&&typeof h.onClick=="function"&&(s.onclick=lc)}Ba(l,h);var w;l=null;for(K in f)if(!h.hasOwnProperty(K)&&f.hasOwnProperty(K)&&f[K]!=null)if(K==="style"){var k=f[K];for(w in k)k.hasOwnProperty(w)&&(l||(l={}),l[w]="")}else K!=="dangerouslySetInnerHTML"&&K!=="children"&&K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(o.hasOwnProperty(K)?y||(y=[]):(y=y||[]).push(K,null));for(K in h){var D=h[K];if(k=f?.[K],h.hasOwnProperty(K)&&D!==k&&(D!=null||k!=null))if(K==="style")if(k){for(w in k)!k.hasOwnProperty(w)||D&&D.hasOwnProperty(w)||(l||(l={}),l[w]="");for(w in D)D.hasOwnProperty(w)&&k[w]!==D[w]&&(l||(l={}),l[w]=D[w])}else l||(y||(y=[]),y.push(K,l)),l=D;else K==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,k=k?k.__html:void 0,D!=null&&k!==D&&(y=y||[]).push(K,D)):K==="children"?typeof D!="string"&&typeof D!="number"||(y=y||[]).push(K,""+D):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&(o.hasOwnProperty(K)?(D!=null&&K==="onScroll"&&st("scroll",s),y||k===D||(y=[])):(y=y||[]).push(K,D))}l&&(y=y||[]).push("style",l);var K=y;(i.updateQueue=K)&&(i.flags|=4)}},O_=function(s,i,l,h){l!==h&&(i.flags|=4)};function Il(s,i){if(!lt)switch(s.tailMode){case"hidden":i=s.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?i||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function Yt(s){var i=s.alternate!==null&&s.alternate.child===s.child,l=0,h=0;if(i)for(var f=s.child;f!==null;)l|=f.lanes|f.childLanes,h|=f.subtreeFlags&14680064,h|=f.flags&14680064,f.return=s,f=f.sibling;else for(f=s.child;f!==null;)l|=f.lanes|f.childLanes,h|=f.subtreeFlags,h|=f.flags,f.return=s,f=f.sibling;return s.subtreeFlags|=h,s.childLanes=l,i}function MS(s,i,l){var h=i.pendingProps;switch(pf(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(i),null;case 1:return fn(i.type)&&cc(),Yt(i),null;case 3:return h=i.stateNode,Ko(),it(dn),it(Xt),kf(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(s===null||s.child===null)&&(mc(i)?i.flags|=4:s===null||s.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,ir!==null&&(rp(ir),ir=null))),Hf(s,i),Yt(i),null;case 5:Cf(i);var f=Oi(yl.current);if(l=i.type,s!==null&&i.stateNode!=null)D_(s,i,l,h,f),s.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!h){if(i.stateNode===null)throw Error(t(166));return Yt(i),null}if(s=Oi(Ir.current),mc(i)){h=i.stateNode,l=i.type;var y=i.memoizedProps;switch(h[Er]=i,h[dl]=y,s=(i.mode&1)!==0,l){case"dialog":st("cancel",h),st("close",h);break;case"iframe":case"object":case"embed":st("load",h);break;case"video":case"audio":for(f=0;f<ul.length;f++)st(ul[f],h);break;case"source":st("error",h);break;case"img":case"image":case"link":st("error",h),st("load",h);break;case"details":st("toggle",h);break;case"input":ao(h,y),st("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!y.multiple},st("invalid",h);break;case"textarea":uo(h,y),st("invalid",h)}Ba(l,y),f=null;for(var w in y)if(y.hasOwnProperty(w)){var k=y[w];w==="children"?typeof k=="string"?h.textContent!==k&&(y.suppressHydrationWarning!==!0&&ac(h.textContent,k,s),f=["children",k]):typeof k=="number"&&h.textContent!==""+k&&(y.suppressHydrationWarning!==!0&&ac(h.textContent,k,s),f=["children",""+k]):o.hasOwnProperty(w)&&k!=null&&w==="onScroll"&&st("scroll",h)}switch(l){case"input":Fr(h),Du(h,y,!0);break;case"textarea":Fr(h),Va(h);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(h.onclick=lc)}h=f,i.updateQueue=h,h!==null&&(i.flags|=4)}else{w=f.nodeType===9?f:f.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=At(l)),s==="http://www.w3.org/1999/xhtml"?l==="script"?(s=w.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof h.is=="string"?s=w.createElement(l,{is:h.is}):(s=w.createElement(l),l==="select"&&(w=s,h.multiple?w.multiple=!0:h.size&&(w.size=h.size))):s=w.createElementNS(s,l),s[Er]=i,s[dl]=h,N_(s,i,!1,!1),i.stateNode=s;e:{switch(w=za(l,h),l){case"dialog":st("cancel",s),st("close",s),f=h;break;case"iframe":case"object":case"embed":st("load",s),f=h;break;case"video":case"audio":for(f=0;f<ul.length;f++)st(ul[f],s);f=h;break;case"source":st("error",s),f=h;break;case"img":case"image":case"link":st("error",s),st("load",s),f=h;break;case"details":st("toggle",s),f=h;break;case"input":ao(s,h),f=fi(s,h),st("invalid",s);break;case"option":f=h;break;case"select":s._wrapperState={wasMultiple:!!h.multiple},f=ie({},h,{value:void 0}),st("invalid",s);break;case"textarea":uo(s,h),f=Ma(s,h),st("invalid",s);break;default:f=h}Ba(l,f),k=f;for(y in k)if(k.hasOwnProperty(y)){var D=k[y];y==="style"?Ua(s,D):y==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&Fa(s,D)):y==="children"?typeof D=="string"?(l!=="textarea"||D!=="")&&Es(s,D):typeof D=="number"&&Es(s,""+D):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(o.hasOwnProperty(y)?D!=null&&y==="onScroll"&&st("scroll",s):D!=null&&X(s,y,D,w))}switch(l){case"input":Fr(s),Du(s,h,!1);break;case"textarea":Fr(s),Va(s);break;case"option":h.value!=null&&s.setAttribute("value",""+Ke(h.value));break;case"select":s.multiple=!!h.multiple,y=h.value,y!=null?Ur(s,!!h.multiple,y,!1):h.defaultValue!=null&&Ur(s,!!h.multiple,h.defaultValue,!0);break;default:typeof f.onClick=="function"&&(s.onclick=lc)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Yt(i),null;case 6:if(s&&i.stateNode!=null)O_(s,i,s.memoizedProps,h);else{if(typeof h!="string"&&i.stateNode===null)throw Error(t(166));if(l=Oi(yl.current),Oi(Ir.current),mc(i)){if(h=i.stateNode,l=i.memoizedProps,h[Er]=i,(y=h.nodeValue!==l)&&(s=An,s!==null))switch(s.tag){case 3:ac(h.nodeValue,l,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&ac(h.nodeValue,l,(s.mode&1)!==0)}y&&(i.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[Er]=i,i.stateNode=h}return Yt(i),null;case 13:if(it(ut),h=i.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(lt&&xn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)My(),zo(),i.flags|=98560,y=!1;else if(y=mc(i),h!==null&&h.dehydrated!==null){if(s===null){if(!y)throw Error(t(318));if(y=i.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[Er]=i}else zo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Yt(i),y=!1}else ir!==null&&(rp(ir),ir=null),y=!0;if(!y)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=l,i):(h=h!==null,h!==(s!==null&&s.memoizedState!==null)&&h&&(i.child.flags|=8192,(i.mode&1)!==0&&(s===null||(ut.current&1)!==0?kt===0&&(kt=3):op())),i.updateQueue!==null&&(i.flags|=4),Yt(i),null);case 4:return Ko(),Hf(s,i),s===null&&cl(i.stateNode.containerInfo),Yt(i),null;case 10:return wf(i.type._context),Yt(i),null;case 17:return fn(i.type)&&cc(),Yt(i),null;case 19:if(it(ut),y=i.memoizedState,y===null)return Yt(i),null;if(h=(i.flags&128)!==0,w=y.rendering,w===null)if(h)Il(y,!1);else{if(kt!==0||s!==null&&(s.flags&128)!==0)for(s=i.child;s!==null;){if(w=Ic(s),w!==null){for(i.flags|=128,Il(y,!1),h=w.updateQueue,h!==null&&(i.updateQueue=h,i.flags|=4),i.subtreeFlags=0,h=l,l=i.child;l!==null;)y=l,s=h,y.flags&=14680066,w=y.alternate,w===null?(y.childLanes=0,y.lanes=s,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=w.childLanes,y.lanes=w.lanes,y.child=w.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=w.memoizedProps,y.memoizedState=w.memoizedState,y.updateQueue=w.updateQueue,y.type=w.type,s=w.dependencies,y.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),l=l.sibling;return tt(ut,ut.current&1|2),i.child}s=s.sibling}y.tail!==null&&et()>Jo&&(i.flags|=128,h=!0,Il(y,!1),i.lanes=4194304)}else{if(!h)if(s=Ic(w),s!==null){if(i.flags|=128,h=!0,l=s.updateQueue,l!==null&&(i.updateQueue=l,i.flags|=4),Il(y,!0),y.tail===null&&y.tailMode==="hidden"&&!w.alternate&&!lt)return Yt(i),null}else 2*et()-y.renderingStartTime>Jo&&l!==1073741824&&(i.flags|=128,h=!0,Il(y,!1),i.lanes=4194304);y.isBackwards?(w.sibling=i.child,i.child=w):(l=y.last,l!==null?l.sibling=w:i.child=w,y.last=w)}return y.tail!==null?(i=y.tail,y.rendering=i,y.tail=i.sibling,y.renderingStartTime=et(),i.sibling=null,l=ut.current,tt(ut,h?l&1|2:l&1),i):(Yt(i),null);case 22:case 23:return ip(),h=i.memoizedState!==null,s!==null&&s.memoizedState!==null!==h&&(i.flags|=8192),h&&(i.mode&1)!==0?(Cn&1073741824)!==0&&(Yt(i),i.subtreeFlags&6&&(i.flags|=8192)):Yt(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function VS(s,i){switch(pf(i),i.tag){case 1:return fn(i.type)&&cc(),s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 3:return Ko(),it(dn),it(Xt),kf(),s=i.flags,(s&65536)!==0&&(s&128)===0?(i.flags=s&-65537|128,i):null;case 5:return Cf(i),null;case 13:if(it(ut),s=i.memoizedState,s!==null&&s.dehydrated!==null){if(i.alternate===null)throw Error(t(340));zo()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 19:return it(ut),null;case 4:return Ko(),null;case 10:return wf(i.type._context),null;case 22:case 23:return ip(),null;case 24:return null;default:return null}}var bc=!1,Zt=!1,FS=typeof WeakSet=="function"?WeakSet:Set,fe=null;function Qo(s,i){var l=s.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){ft(s,i,h)}else l.current=null}function Kf(s,i,l){try{l()}catch(h){ft(s,i,h)}}var L_=!1;function jS(s,i){if(sf=ks,s=dy(),Xd(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var f=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var w=0,k=-1,D=-1,K=0,te=0,ne=s,ee=null;t:for(;;){for(var ce;ne!==l||f!==0&&ne.nodeType!==3||(k=w+f),ne!==y||h!==0&&ne.nodeType!==3||(D=w+h),ne.nodeType===3&&(w+=ne.nodeValue.length),(ce=ne.firstChild)!==null;)ee=ne,ne=ce;for(;;){if(ne===s)break t;if(ee===l&&++K===f&&(k=w),ee===y&&++te===h&&(D=w),(ce=ne.nextSibling)!==null)break;ne=ee,ee=ne.parentNode}ne=ce}l=k===-1||D===-1?null:{start:k,end:D}}else l=null}l=l||{start:0,end:0}}else l=null;for(of={focusedElem:s,selectionRange:l},ks=!1,fe=i;fe!==null;)if(i=fe,s=i.child,(i.subtreeFlags&1028)!==0&&s!==null)s.return=i,fe=s;else for(;fe!==null;){i=fe;try{var pe=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(pe!==null){var me=pe.memoizedProps,gt=pe.memoizedState,B=i.stateNode,L=B.getSnapshotBeforeUpdate(i.elementType===i.type?me:or(i.type,me),gt);B.__reactInternalSnapshotBeforeUpdate=L}break;case 3:var z=i.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(se){ft(i,i.return,se)}if(s=i.sibling,s!==null){s.return=i.return,fe=s;break}fe=i.return}return pe=L_,L_=!1,pe}function Tl(s,i,l){var h=i.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var f=h=h.next;do{if((f.tag&s)===s){var y=f.destroy;f.destroy=void 0,y!==void 0&&Kf(i,l,y)}f=f.next}while(f!==h)}}function Pc(s,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var l=i=i.next;do{if((l.tag&s)===s){var h=l.create;l.destroy=h()}l=l.next}while(l!==i)}}function Gf(s){var i=s.ref;if(i!==null){var l=s.stateNode;switch(s.tag){case 5:s=l;break;default:s=l}typeof i=="function"?i(s):i.current=s}}function M_(s){var i=s.alternate;i!==null&&(s.alternate=null,M_(i)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(i=s.stateNode,i!==null&&(delete i[Er],delete i[dl],delete i[cf],delete i[ES],delete i[IS])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function V_(s){return s.tag===5||s.tag===3||s.tag===4}function F_(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||V_(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Qf(s,i,l){var h=s.tag;if(h===5||h===6)s=s.stateNode,i?l.nodeType===8?l.parentNode.insertBefore(s,i):l.insertBefore(s,i):(l.nodeType===8?(i=l.parentNode,i.insertBefore(s,l)):(i=l,i.appendChild(s)),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=lc));else if(h!==4&&(s=s.child,s!==null))for(Qf(s,i,l),s=s.sibling;s!==null;)Qf(s,i,l),s=s.sibling}function Xf(s,i,l){var h=s.tag;if(h===5||h===6)s=s.stateNode,i?l.insertBefore(s,i):l.appendChild(s);else if(h!==4&&(s=s.child,s!==null))for(Xf(s,i,l),s=s.sibling;s!==null;)Xf(s,i,l),s=s.sibling}var Bt=null,ar=!1;function Fs(s,i,l){for(l=l.child;l!==null;)j_(s,i,l),l=l.sibling}function j_(s,i,l){if(En&&typeof En.onCommitFiberUnmount=="function")try{En.onCommitFiberUnmount(Ii,l)}catch{}switch(l.tag){case 5:Zt||Qo(l,i);case 6:var h=Bt,f=ar;Bt=null,Fs(s,i,l),Bt=h,ar=f,Bt!==null&&(ar?(s=Bt,l=l.stateNode,s.nodeType===8?s.parentNode.removeChild(l):s.removeChild(l)):Bt.removeChild(l.stateNode));break;case 18:Bt!==null&&(ar?(s=Bt,l=l.stateNode,s.nodeType===8?uf(s.parentNode,l):s.nodeType===1&&uf(s,l),nr(s)):uf(Bt,l.stateNode));break;case 4:h=Bt,f=ar,Bt=l.stateNode.containerInfo,ar=!0,Fs(s,i,l),Bt=h,ar=f;break;case 0:case 11:case 14:case 15:if(!Zt&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){f=h=h.next;do{var y=f,w=y.destroy;y=y.tag,w!==void 0&&((y&2)!==0||(y&4)!==0)&&Kf(l,i,w),f=f.next}while(f!==h)}Fs(s,i,l);break;case 1:if(!Zt&&(Qo(l,i),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(k){ft(l,i,k)}Fs(s,i,l);break;case 21:Fs(s,i,l);break;case 22:l.mode&1?(Zt=(h=Zt)||l.memoizedState!==null,Fs(s,i,l),Zt=h):Fs(s,i,l);break;default:Fs(s,i,l)}}function U_(s){var i=s.updateQueue;if(i!==null){s.updateQueue=null;var l=s.stateNode;l===null&&(l=s.stateNode=new FS),i.forEach(function(h){var f=GS.bind(null,s,h);l.has(h)||(l.add(h),h.then(f,f))})}}function lr(s,i){var l=i.deletions;if(l!==null)for(var h=0;h<l.length;h++){var f=l[h];try{var y=s,w=i,k=w;e:for(;k!==null;){switch(k.tag){case 5:Bt=k.stateNode,ar=!1;break e;case 3:Bt=k.stateNode.containerInfo,ar=!0;break e;case 4:Bt=k.stateNode.containerInfo,ar=!0;break e}k=k.return}if(Bt===null)throw Error(t(160));j_(y,w,f),Bt=null,ar=!1;var D=f.alternate;D!==null&&(D.return=null),f.return=null}catch(K){ft(f,i,K)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)$_(i,s),i=i.sibling}function $_(s,i){var l=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(lr(i,s),Sr(s),h&4){try{Tl(3,s,s.return),Pc(3,s)}catch(me){ft(s,s.return,me)}try{Tl(5,s,s.return)}catch(me){ft(s,s.return,me)}}break;case 1:lr(i,s),Sr(s),h&512&&l!==null&&Qo(l,l.return);break;case 5:if(lr(i,s),Sr(s),h&512&&l!==null&&Qo(l,l.return),s.flags&32){var f=s.stateNode;try{Es(f,"")}catch(me){ft(s,s.return,me)}}if(h&4&&(f=s.stateNode,f!=null)){var y=s.memoizedProps,w=l!==null?l.memoizedProps:y,k=s.type,D=s.updateQueue;if(s.updateQueue=null,D!==null)try{k==="input"&&y.type==="radio"&&y.name!=null&&Oa(f,y),za(k,w);var K=za(k,y);for(w=0;w<D.length;w+=2){var te=D[w],ne=D[w+1];te==="style"?Ua(f,ne):te==="dangerouslySetInnerHTML"?Fa(f,ne):te==="children"?Es(f,ne):X(f,te,ne,K)}switch(k){case"input":La(f,y);break;case"textarea":co(f,y);break;case"select":var ee=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!y.multiple;var ce=y.value;ce!=null?Ur(f,!!y.multiple,ce,!1):ee!==!!y.multiple&&(y.defaultValue!=null?Ur(f,!!y.multiple,y.defaultValue,!0):Ur(f,!!y.multiple,y.multiple?[]:"",!1))}f[dl]=y}catch(me){ft(s,s.return,me)}}break;case 6:if(lr(i,s),Sr(s),h&4){if(s.stateNode===null)throw Error(t(162));f=s.stateNode,y=s.memoizedProps;try{f.nodeValue=y}catch(me){ft(s,s.return,me)}}break;case 3:if(lr(i,s),Sr(s),h&4&&l!==null&&l.memoizedState.isDehydrated)try{nr(i.containerInfo)}catch(me){ft(s,s.return,me)}break;case 4:lr(i,s),Sr(s);break;case 13:lr(i,s),Sr(s),f=s.child,f.flags&8192&&(y=f.memoizedState!==null,f.stateNode.isHidden=y,!y||f.alternate!==null&&f.alternate.memoizedState!==null||(Zf=et())),h&4&&U_(s);break;case 22:if(te=l!==null&&l.memoizedState!==null,s.mode&1?(Zt=(K=Zt)||te,lr(i,s),Zt=K):lr(i,s),Sr(s),h&8192){if(K=s.memoizedState!==null,(s.stateNode.isHidden=K)&&!te&&(s.mode&1)!==0)for(fe=s,te=s.child;te!==null;){for(ne=fe=te;fe!==null;){switch(ee=fe,ce=ee.child,ee.tag){case 0:case 11:case 14:case 15:Tl(4,ee,ee.return);break;case 1:Qo(ee,ee.return);var pe=ee.stateNode;if(typeof pe.componentWillUnmount=="function"){h=ee,l=ee.return;try{i=h,pe.props=i.memoizedProps,pe.state=i.memoizedState,pe.componentWillUnmount()}catch(me){ft(h,l,me)}}break;case 5:Qo(ee,ee.return);break;case 22:if(ee.memoizedState!==null){W_(ne);continue}}ce!==null?(ce.return=ee,fe=ce):W_(ne)}te=te.sibling}e:for(te=null,ne=s;;){if(ne.tag===5){if(te===null){te=ne;try{f=ne.stateNode,K?(y=f.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(k=ne.stateNode,D=ne.memoizedProps.style,w=D!=null&&D.hasOwnProperty("display")?D.display:null,k.style.display=ja("display",w))}catch(me){ft(s,s.return,me)}}}else if(ne.tag===6){if(te===null)try{ne.stateNode.nodeValue=K?"":ne.memoizedProps}catch(me){ft(s,s.return,me)}}else if((ne.tag!==22&&ne.tag!==23||ne.memoizedState===null||ne===s)&&ne.child!==null){ne.child.return=ne,ne=ne.child;continue}if(ne===s)break e;for(;ne.sibling===null;){if(ne.return===null||ne.return===s)break e;te===ne&&(te=null),ne=ne.return}te===ne&&(te=null),ne.sibling.return=ne.return,ne=ne.sibling}}break;case 19:lr(i,s),Sr(s),h&4&&U_(s);break;case 21:break;default:lr(i,s),Sr(s)}}function Sr(s){var i=s.flags;if(i&2){try{e:{for(var l=s.return;l!==null;){if(V_(l)){var h=l;break e}l=l.return}throw Error(t(160))}switch(h.tag){case 5:var f=h.stateNode;h.flags&32&&(Es(f,""),h.flags&=-33);var y=F_(s);Xf(s,y,f);break;case 3:case 4:var w=h.stateNode.containerInfo,k=F_(s);Qf(s,k,w);break;default:throw Error(t(161))}}catch(D){ft(s,s.return,D)}s.flags&=-3}i&4096&&(s.flags&=-4097)}function US(s,i,l){fe=s,B_(s)}function B_(s,i,l){for(var h=(s.mode&1)!==0;fe!==null;){var f=fe,y=f.child;if(f.tag===22&&h){var w=f.memoizedState!==null||bc;if(!w){var k=f.alternate,D=k!==null&&k.memoizedState!==null||Zt;k=bc;var K=Zt;if(bc=w,(Zt=D)&&!K)for(fe=f;fe!==null;)w=fe,D=w.child,w.tag===22&&w.memoizedState!==null?q_(f):D!==null?(D.return=w,fe=D):q_(f);for(;y!==null;)fe=y,B_(y),y=y.sibling;fe=f,bc=k,Zt=K}z_(s)}else(f.subtreeFlags&8772)!==0&&y!==null?(y.return=f,fe=y):z_(s)}}function z_(s){for(;fe!==null;){var i=fe;if((i.flags&8772)!==0){var l=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Zt||Pc(5,i);break;case 1:var h=i.stateNode;if(i.flags&4&&!Zt)if(l===null)h.componentDidMount();else{var f=i.elementType===i.type?l.memoizedProps:or(i.type,l.memoizedProps);h.componentDidUpdate(f,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var y=i.updateQueue;y!==null&&Uy(i,y,h);break;case 3:var w=i.updateQueue;if(w!==null){if(l=null,i.child!==null)switch(i.child.tag){case 5:l=i.child.stateNode;break;case 1:l=i.child.stateNode}Uy(i,w,l)}break;case 5:var k=i.stateNode;if(l===null&&i.flags&4){l=k;var D=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":D.autoFocus&&l.focus();break;case"img":D.src&&(l.src=D.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var K=i.alternate;if(K!==null){var te=K.memoizedState;if(te!==null){var ne=te.dehydrated;ne!==null&&nr(ne)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Zt||i.flags&512&&Gf(i)}catch(ee){ft(i,i.return,ee)}}if(i===s){fe=null;break}if(l=i.sibling,l!==null){l.return=i.return,fe=l;break}fe=i.return}}function W_(s){for(;fe!==null;){var i=fe;if(i===s){fe=null;break}var l=i.sibling;if(l!==null){l.return=i.return,fe=l;break}fe=i.return}}function q_(s){for(;fe!==null;){var i=fe;try{switch(i.tag){case 0:case 11:case 15:var l=i.return;try{Pc(4,i)}catch(D){ft(i,l,D)}break;case 1:var h=i.stateNode;if(typeof h.componentDidMount=="function"){var f=i.return;try{h.componentDidMount()}catch(D){ft(i,f,D)}}var y=i.return;try{Gf(i)}catch(D){ft(i,y,D)}break;case 5:var w=i.return;try{Gf(i)}catch(D){ft(i,w,D)}}}catch(D){ft(i,i.return,D)}if(i===s){fe=null;break}var k=i.sibling;if(k!==null){k.return=i.return,fe=k;break}fe=i.return}}var $S=Math.ceil,Nc=re.ReactCurrentDispatcher,Jf=re.ReactCurrentOwner,$n=re.ReactCurrentBatchConfig,We=0,Mt=null,vt=null,zt=0,Cn=0,Xo=Ds(0),kt=0,Sl=null,Mi=0,Dc=0,Yf=0,Al=null,mn=null,Zf=0,Jo=1/0,ts=null,Oc=!1,ep=null,js=null,Lc=!1,Us=null,Mc=0,xl=0,tp=null,Vc=-1,Fc=0;function ln(){return(We&6)!==0?et():Vc!==-1?Vc:Vc=et()}function $s(s){return(s.mode&1)===0?1:(We&2)!==0&&zt!==0?zt&-zt:SS.transition!==null?(Fc===0&&(Fc=Si()),Fc):(s=$e,s!==0||(s=window.event,s=s===void 0?16:el(s.type)),s)}function ur(s,i,l,h){if(50<xl)throw xl=0,tp=null,Error(t(185));As(s,l,h),((We&2)===0||s!==Mt)&&(s===Mt&&((We&2)===0&&(Dc|=l),kt===4&&Bs(s,zt)),gn(s,h),l===1&&We===0&&(i.mode&1)===0&&(Jo=et()+500,dc&&Ls()))}function gn(s,i){var l=s.callbackNode;zr(s,i);var h=Ti(s,s===Mt?zt:0);if(h===0)l!==null&&Qa(l),s.callbackNode=null,s.callbackPriority=0;else if(i=h&-h,s.callbackPriority!==i){if(l!=null&&Qa(l),i===1)s.tag===0?TS(K_.bind(null,s)):Py(K_.bind(null,s)),vS(function(){(We&6)===0&&Ls()}),l=null;else{switch(Cs(h)){case 1:l=Ei;break;case 4:l=Is;break;case 16:l=On;break;case 536870912:l=Fu;break;default:l=On}l=tv(l,H_.bind(null,s))}s.callbackPriority=i,s.callbackNode=l}}function H_(s,i){if(Vc=-1,Fc=0,(We&6)!==0)throw Error(t(327));var l=s.callbackNode;if(Yo()&&s.callbackNode!==l)return null;var h=Ti(s,s===Mt?zt:0);if(h===0)return null;if((h&30)!==0||(h&s.expiredLanes)!==0||i)i=jc(s,h);else{i=h;var f=We;We|=2;var y=Q_();(Mt!==s||zt!==i)&&(ts=null,Jo=et()+500,Fi(s,i));do try{WS();break}catch(k){G_(s,k)}while(!0);vf(),Nc.current=y,We=f,vt!==null?i=0:(Mt=null,zt=0,i=kt)}if(i!==0){if(i===2&&(f=In(s),f!==0&&(h=f,i=np(s,f))),i===1)throw l=Sl,Fi(s,0),Bs(s,h),gn(s,et()),l;if(i===6)Bs(s,h);else{if(f=s.current.alternate,(h&30)===0&&!BS(f)&&(i=jc(s,h),i===2&&(y=In(s),y!==0&&(h=y,i=np(s,y))),i===1))throw l=Sl,Fi(s,0),Bs(s,h),gn(s,et()),l;switch(s.finishedWork=f,s.finishedLanes=h,i){case 0:case 1:throw Error(t(345));case 2:ji(s,mn,ts);break;case 3:if(Bs(s,h),(h&130023424)===h&&(i=Zf+500-et(),10<i)){if(Ti(s,0)!==0)break;if(f=s.suspendedLanes,(f&h)!==h){ln(),s.pingedLanes|=s.suspendedLanes&f;break}s.timeoutHandle=lf(ji.bind(null,s,mn,ts),i);break}ji(s,mn,ts);break;case 4:if(Bs(s,h),(h&4194240)===h)break;for(i=s.eventTimes,f=-1;0<h;){var w=31-sn(h);y=1<<w,w=i[w],w>f&&(f=w),h&=~y}if(h=f,h=et()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*$S(h/1960))-h,10<h){s.timeoutHandle=lf(ji.bind(null,s,mn,ts),h);break}ji(s,mn,ts);break;case 5:ji(s,mn,ts);break;default:throw Error(t(329))}}}return gn(s,et()),s.callbackNode===l?H_.bind(null,s):null}function np(s,i){var l=Al;return s.current.memoizedState.isDehydrated&&(Fi(s,i).flags|=256),s=jc(s,i),s!==2&&(i=mn,mn=l,i!==null&&rp(i)),s}function rp(s){mn===null?mn=s:mn.push.apply(mn,s)}function BS(s){for(var i=s;;){if(i.flags&16384){var l=i.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var f=l[h],y=f.getSnapshot;f=f.value;try{if(!sr(y(),f))return!1}catch{return!1}}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Bs(s,i){for(i&=~Yf,i&=~Dc,s.suspendedLanes|=i,s.pingedLanes&=~i,s=s.expirationTimes;0<i;){var l=31-sn(i),h=1<<l;s[l]=-1,i&=~h}}function K_(s){if((We&6)!==0)throw Error(t(327));Yo();var i=Ti(s,0);if((i&1)===0)return gn(s,et()),null;var l=jc(s,i);if(s.tag!==0&&l===2){var h=In(s);h!==0&&(i=h,l=np(s,h))}if(l===1)throw l=Sl,Fi(s,0),Bs(s,i),gn(s,et()),l;if(l===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=i,ji(s,mn,ts),gn(s,et()),null}function sp(s,i){var l=We;We|=1;try{return s(i)}finally{We=l,We===0&&(Jo=et()+500,dc&&Ls())}}function Vi(s){Us!==null&&Us.tag===0&&(We&6)===0&&Yo();var i=We;We|=1;var l=$n.transition,h=$e;try{if($n.transition=null,$e=1,s)return s()}finally{$e=h,$n.transition=l,We=i,(We&6)===0&&Ls()}}function ip(){Cn=Xo.current,it(Xo)}function Fi(s,i){s.finishedWork=null,s.finishedLanes=0;var l=s.timeoutHandle;if(l!==-1&&(s.timeoutHandle=-1,_S(l)),vt!==null)for(l=vt.return;l!==null;){var h=l;switch(pf(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&cc();break;case 3:Ko(),it(dn),it(Xt),kf();break;case 5:Cf(h);break;case 4:Ko();break;case 13:it(ut);break;case 19:it(ut);break;case 10:wf(h.type._context);break;case 22:case 23:ip()}l=l.return}if(Mt=s,vt=s=zs(s.current,null),zt=Cn=i,kt=0,Sl=null,Yf=Dc=Mi=0,mn=Al=null,Di!==null){for(i=0;i<Di.length;i++)if(l=Di[i],h=l.interleaved,h!==null){l.interleaved=null;var f=h.next,y=l.pending;if(y!==null){var w=y.next;y.next=f,h.next=w}l.pending=h}Di=null}return s}function G_(s,i){do{var l=vt;try{if(vf(),Tc.current=Cc,Sc){for(var h=ct.memoizedState;h!==null;){var f=h.queue;f!==null&&(f.pending=null),h=h.next}Sc=!1}if(Li=0,Lt=Rt=ct=null,_l=!1,vl=0,Jf.current=null,l===null||l.return===null){kt=1,Sl=i,vt=null;break}e:{var y=s,w=l.return,k=l,D=i;if(i=zt,k.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var K=D,te=k,ne=te.tag;if((te.mode&1)===0&&(ne===0||ne===11||ne===15)){var ee=te.alternate;ee?(te.updateQueue=ee.updateQueue,te.memoizedState=ee.memoizedState,te.lanes=ee.lanes):(te.updateQueue=null,te.memoizedState=null)}var ce=v_(w);if(ce!==null){ce.flags&=-257,w_(ce,w,k,y,i),ce.mode&1&&__(y,K,i),i=ce,D=K;var pe=i.updateQueue;if(pe===null){var me=new Set;me.add(D),i.updateQueue=me}else pe.add(D);break e}else{if((i&1)===0){__(y,K,i),op();break e}D=Error(t(426))}}else if(lt&&k.mode&1){var gt=v_(w);if(gt!==null){(gt.flags&65536)===0&&(gt.flags|=256),w_(gt,w,k,y,i),yf(Go(D,k));break e}}y=D=Go(D,k),kt!==4&&(kt=2),Al===null?Al=[y]:Al.push(y),y=w;do{switch(y.tag){case 3:y.flags|=65536,i&=-i,y.lanes|=i;var B=g_(y,D,i);jy(y,B);break e;case 1:k=D;var L=y.type,z=y.stateNode;if((y.flags&128)===0&&(typeof L.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(js===null||!js.has(z)))){y.flags|=65536,i&=-i,y.lanes|=i;var se=y_(y,k,i);jy(y,se);break e}}y=y.return}while(y!==null)}J_(l)}catch(ye){i=ye,vt===l&&l!==null&&(vt=l=l.return);continue}break}while(!0)}function Q_(){var s=Nc.current;return Nc.current=Cc,s===null?Cc:s}function op(){(kt===0||kt===3||kt===2)&&(kt=4),Mt===null||(Mi&268435455)===0&&(Dc&268435455)===0||Bs(Mt,zt)}function jc(s,i){var l=We;We|=2;var h=Q_();(Mt!==s||zt!==i)&&(ts=null,Fi(s,i));do try{zS();break}catch(f){G_(s,f)}while(!0);if(vf(),We=l,Nc.current=h,vt!==null)throw Error(t(261));return Mt=null,zt=0,kt}function zS(){for(;vt!==null;)X_(vt)}function WS(){for(;vt!==null&&!Mu();)X_(vt)}function X_(s){var i=ev(s.alternate,s,Cn);s.memoizedProps=s.pendingProps,i===null?J_(s):vt=i,Jf.current=null}function J_(s){var i=s;do{var l=i.alternate;if(s=i.return,(i.flags&32768)===0){if(l=MS(l,i,Cn),l!==null){vt=l;return}}else{if(l=VS(l,i),l!==null){l.flags&=32767,vt=l;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{kt=6,vt=null;return}}if(i=i.sibling,i!==null){vt=i;return}vt=i=s}while(i!==null);kt===0&&(kt=5)}function ji(s,i,l){var h=$e,f=$n.transition;try{$n.transition=null,$e=1,qS(s,i,l,h)}finally{$n.transition=f,$e=h}return null}function qS(s,i,l,h){do Yo();while(Us!==null);if((We&6)!==0)throw Error(t(327));l=s.finishedWork;var f=s.finishedLanes;if(l===null)return null;if(s.finishedWork=null,s.finishedLanes=0,l===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var y=l.lanes|l.childLanes;if(Ye(s,y),s===Mt&&(vt=Mt=null,zt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Lc||(Lc=!0,tv(On,function(){return Yo(),null})),y=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||y){y=$n.transition,$n.transition=null;var w=$e;$e=1;var k=We;We|=4,Jf.current=null,jS(s,l),$_(l,s),hS(of),ks=!!sf,of=sf=null,s.current=l,US(l),Bd(),We=k,$e=w,$n.transition=y}else s.current=l;if(Lc&&(Lc=!1,Us=s,Mc=f),y=s.pendingLanes,y===0&&(js=null),ju(l.stateNode),gn(s,et()),i!==null)for(h=s.onRecoverableError,l=0;l<i.length;l++)f=i[l],h(f.value,{componentStack:f.stack,digest:f.digest});if(Oc)throw Oc=!1,s=ep,ep=null,s;return(Mc&1)!==0&&s.tag!==0&&Yo(),y=s.pendingLanes,(y&1)!==0?s===tp?xl++:(xl=0,tp=s):xl=0,Ls(),null}function Yo(){if(Us!==null){var s=Cs(Mc),i=$n.transition,l=$e;try{if($n.transition=null,$e=16>s?16:s,Us===null)var h=!1;else{if(s=Us,Us=null,Mc=0,(We&6)!==0)throw Error(t(331));var f=We;for(We|=4,fe=s.current;fe!==null;){var y=fe,w=y.child;if((fe.flags&16)!==0){var k=y.deletions;if(k!==null){for(var D=0;D<k.length;D++){var K=k[D];for(fe=K;fe!==null;){var te=fe;switch(te.tag){case 0:case 11:case 15:Tl(8,te,y)}var ne=te.child;if(ne!==null)ne.return=te,fe=ne;else for(;fe!==null;){te=fe;var ee=te.sibling,ce=te.return;if(M_(te),te===K){fe=null;break}if(ee!==null){ee.return=ce,fe=ee;break}fe=ce}}}var pe=y.alternate;if(pe!==null){var me=pe.child;if(me!==null){pe.child=null;do{var gt=me.sibling;me.sibling=null,me=gt}while(me!==null)}}fe=y}}if((y.subtreeFlags&2064)!==0&&w!==null)w.return=y,fe=w;else e:for(;fe!==null;){if(y=fe,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:Tl(9,y,y.return)}var B=y.sibling;if(B!==null){B.return=y.return,fe=B;break e}fe=y.return}}var L=s.current;for(fe=L;fe!==null;){w=fe;var z=w.child;if((w.subtreeFlags&2064)!==0&&z!==null)z.return=w,fe=z;else e:for(w=L;fe!==null;){if(k=fe,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:Pc(9,k)}}catch(ye){ft(k,k.return,ye)}if(k===w){fe=null;break e}var se=k.sibling;if(se!==null){se.return=k.return,fe=se;break e}fe=k.return}}if(We=f,Ls(),En&&typeof En.onPostCommitFiberRoot=="function")try{En.onPostCommitFiberRoot(Ii,s)}catch{}h=!0}return h}finally{$e=l,$n.transition=i}}return!1}function Y_(s,i,l){i=Go(l,i),i=g_(s,i,1),s=Vs(s,i,1),i=ln(),s!==null&&(As(s,1,i),gn(s,i))}function ft(s,i,l){if(s.tag===3)Y_(s,s,l);else for(;i!==null;){if(i.tag===3){Y_(i,s,l);break}else if(i.tag===1){var h=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(js===null||!js.has(h))){s=Go(l,s),s=y_(i,s,1),i=Vs(i,s,1),s=ln(),i!==null&&(As(i,1,s),gn(i,s));break}}i=i.return}}function HS(s,i,l){var h=s.pingCache;h!==null&&h.delete(i),i=ln(),s.pingedLanes|=s.suspendedLanes&l,Mt===s&&(zt&l)===l&&(kt===4||kt===3&&(zt&130023424)===zt&&500>et()-Zf?Fi(s,0):Yf|=l),gn(s,i)}function Z_(s,i){i===0&&((s.mode&1)===0?i=1:(i=Eo,Eo<<=1,(Eo&130023424)===0&&(Eo=4194304)));var l=ln();s=Yr(s,i),s!==null&&(As(s,i,l),gn(s,l))}function KS(s){var i=s.memoizedState,l=0;i!==null&&(l=i.retryLane),Z_(s,l)}function GS(s,i){var l=0;switch(s.tag){case 13:var h=s.stateNode,f=s.memoizedState;f!==null&&(l=f.retryLane);break;case 19:h=s.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(i),Z_(s,l)}var ev;ev=function(s,i,l){if(s!==null)if(s.memoizedProps!==i.pendingProps||dn.current)pn=!0;else{if((s.lanes&l)===0&&(i.flags&128)===0)return pn=!1,LS(s,i,l);pn=(s.flags&131072)!==0}else pn=!1,lt&&(i.flags&1048576)!==0&&Ny(i,pc,i.index);switch(i.lanes=0,i.tag){case 2:var h=i.type;kc(s,i),s=i.pendingProps;var f=Uo(i,Xt.current);qo(i,l),f=Nf(null,i,h,s,f,l);var y=Df();return i.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,fn(h)?(y=!0,hc(i)):y=!1,i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Tf(i),f.updater=wc,i.stateNode=f,f._reactInternals=i,Af(i,h,s,l),i=$f(null,i,h,!0,y,l)):(i.tag=0,lt&&y&&ff(i),an(null,i,f,l),i=i.child),i;case 16:h=i.elementType;e:{switch(kc(s,i),s=i.pendingProps,f=h._init,h=f(h._payload),i.type=h,f=i.tag=XS(h),s=or(h,s),f){case 0:i=Uf(null,i,h,s,l);break e;case 1:i=x_(null,i,h,s,l);break e;case 11:i=E_(null,i,h,s,l);break e;case 14:i=I_(null,i,h,or(h.type,s),l);break e}throw Error(t(306,h,""))}return i;case 0:return h=i.type,f=i.pendingProps,f=i.elementType===h?f:or(h,f),Uf(s,i,h,f,l);case 1:return h=i.type,f=i.pendingProps,f=i.elementType===h?f:or(h,f),x_(s,i,h,f,l);case 3:e:{if(C_(i),s===null)throw Error(t(387));h=i.pendingProps,y=i.memoizedState,f=y.element,Fy(s,i),vc(i,h,null,l);var w=i.memoizedState;if(h=w.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},i.updateQueue.baseState=y,i.memoizedState=y,i.flags&256){f=Go(Error(t(423)),i),i=R_(s,i,h,l,f);break e}else if(h!==f){f=Go(Error(t(424)),i),i=R_(s,i,h,l,f);break e}else for(xn=Ns(i.stateNode.containerInfo.firstChild),An=i,lt=!0,ir=null,l=Ky(i,null,h,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(zo(),h===f){i=es(s,i,l);break e}an(s,i,h,l)}i=i.child}return i;case 5:return Gy(i),s===null&&gf(i),h=i.type,f=i.pendingProps,y=s!==null?s.memoizedProps:null,w=f.children,af(h,f)?w=null:y!==null&&af(h,y)&&(i.flags|=32),A_(s,i),an(s,i,w,l),i.child;case 6:return s===null&&gf(i),null;case 13:return k_(s,i,l);case 4:return xf(i,i.stateNode.containerInfo),h=i.pendingProps,s===null?i.child=Ho(i,null,h,l):an(s,i,h,l),i.child;case 11:return h=i.type,f=i.pendingProps,f=i.elementType===h?f:or(h,f),E_(s,i,h,f,l);case 7:return an(s,i,i.pendingProps,l),i.child;case 8:return an(s,i,i.pendingProps.children,l),i.child;case 12:return an(s,i,i.pendingProps.children,l),i.child;case 10:e:{if(h=i.type._context,f=i.pendingProps,y=i.memoizedProps,w=f.value,tt(gc,h._currentValue),h._currentValue=w,y!==null)if(sr(y.value,w)){if(y.children===f.children&&!dn.current){i=es(s,i,l);break e}}else for(y=i.child,y!==null&&(y.return=i);y!==null;){var k=y.dependencies;if(k!==null){w=y.child;for(var D=k.firstContext;D!==null;){if(D.context===h){if(y.tag===1){D=Zr(-1,l&-l),D.tag=2;var K=y.updateQueue;if(K!==null){K=K.shared;var te=K.pending;te===null?D.next=D:(D.next=te.next,te.next=D),K.pending=D}}y.lanes|=l,D=y.alternate,D!==null&&(D.lanes|=l),Ef(y.return,l,i),k.lanes|=l;break}D=D.next}}else if(y.tag===10)w=y.type===i.type?null:y.child;else if(y.tag===18){if(w=y.return,w===null)throw Error(t(341));w.lanes|=l,k=w.alternate,k!==null&&(k.lanes|=l),Ef(w,l,i),w=y.sibling}else w=y.child;if(w!==null)w.return=y;else for(w=y;w!==null;){if(w===i){w=null;break}if(y=w.sibling,y!==null){y.return=w.return,w=y;break}w=w.return}y=w}an(s,i,f.children,l),i=i.child}return i;case 9:return f=i.type,h=i.pendingProps.children,qo(i,l),f=jn(f),h=h(f),i.flags|=1,an(s,i,h,l),i.child;case 14:return h=i.type,f=or(h,i.pendingProps),f=or(h.type,f),I_(s,i,h,f,l);case 15:return T_(s,i,i.type,i.pendingProps,l);case 17:return h=i.type,f=i.pendingProps,f=i.elementType===h?f:or(h,f),kc(s,i),i.tag=1,fn(h)?(s=!0,hc(i)):s=!1,qo(i,l),zy(i,h,f),Af(i,h,f,l),$f(null,i,h,!0,s,l);case 19:return P_(s,i,l);case 22:return S_(s,i,l)}throw Error(t(156,i.tag))};function tv(s,i){return vo(s,i)}function QS(s,i,l,h){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bn(s,i,l,h){return new QS(s,i,l,h)}function ap(s){return s=s.prototype,!(!s||!s.isReactComponent)}function XS(s){if(typeof s=="function")return ap(s)?1:0;if(s!=null){if(s=s.$$typeof,s===U)return 11;if(s===De)return 14}return 2}function zs(s,i){var l=s.alternate;return l===null?(l=Bn(s.tag,i,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=i,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&14680064,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,i=s.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l}function Uc(s,i,l,h,f,y){var w=2;if(h=s,typeof s=="function")ap(s)&&(w=1);else if(typeof s=="string")w=5;else e:switch(s){case b:return Ui(l.children,f,y,i);case A:w=8,f|=8;break;case R:return s=Bn(12,l,i,f|2),s.elementType=R,s.lanes=y,s;case C:return s=Bn(13,l,i,f),s.elementType=C,s.lanes=y,s;case Re:return s=Bn(19,l,i,f),s.elementType=Re,s.lanes=y,s;case Ge:return $c(l,f,y,i);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case P:w=10;break e;case N:w=9;break e;case U:w=11;break e;case De:w=14;break e;case rt:w=16,h=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return i=Bn(w,l,i,f),i.elementType=s,i.type=h,i.lanes=y,i}function Ui(s,i,l,h){return s=Bn(7,s,h,i),s.lanes=l,s}function $c(s,i,l,h){return s=Bn(22,s,h,i),s.elementType=Ge,s.lanes=l,s.stateNode={isHidden:!1},s}function lp(s,i,l){return s=Bn(6,s,null,i),s.lanes=l,s}function up(s,i,l){return i=Bn(4,s.children!==null?s.children:[],s.key,i),i.lanes=l,i.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},i}function JS(s,i,l,h,f){this.tag=i,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ss(0),this.expirationTimes=Ss(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ss(0),this.identifierPrefix=h,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function cp(s,i,l,h,f,y,w,k,D){return s=new JS(s,i,l,k,D),i===1?(i=1,y===!0&&(i|=8)):i=0,y=Bn(3,null,null,i),s.current=y,y.stateNode=s,y.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Tf(y),s}function YS(s,i,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ge,key:h==null?null:""+h,children:s,containerInfo:i,implementation:l}}function nv(s){if(!s)return Os;s=s._reactInternals;e:{if(Jn(s)!==s||s.tag!==1)throw Error(t(170));var i=s;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(fn(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(s.tag===1){var l=s.type;if(fn(l))return ky(s,l,i)}return i}function rv(s,i,l,h,f,y,w,k,D){return s=cp(l,h,!0,s,f,y,w,k,D),s.context=nv(null),l=s.current,h=ln(),f=$s(l),y=Zr(h,f),y.callback=i??null,Vs(l,y,f),s.current.lanes=f,As(s,f,h),gn(s,h),s}function Bc(s,i,l,h){var f=i.current,y=ln(),w=$s(f);return l=nv(l),i.context===null?i.context=l:i.pendingContext=l,i=Zr(y,w),i.payload={element:s},h=h===void 0?null:h,h!==null&&(i.callback=h),s=Vs(f,i,w),s!==null&&(ur(s,f,w,y),_c(s,f,w)),w}function zc(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function sv(s,i){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<i?l:i}}function hp(s,i){sv(s,i),(s=s.alternate)&&sv(s,i)}function ZS(){return null}var iv=typeof reportError=="function"?reportError:function(s){console.error(s)};function dp(s){this._internalRoot=s}Wc.prototype.render=dp.prototype.render=function(s){var i=this._internalRoot;if(i===null)throw Error(t(409));Bc(s,i,null,null)},Wc.prototype.unmount=dp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var i=s.containerInfo;Vi(function(){Bc(null,s,null,null)}),i[Gr]=null}};function Wc(s){this._internalRoot=s}Wc.prototype.unstable_scheduleHydration=function(s){if(s){var i=Wu();s={blockedOn:null,target:s,priority:i};for(var l=0;l<yr.length&&i!==0&&i<yr[l].priority;l++);yr.splice(l,0,s),l===0&&Ku(s)}};function fp(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function qc(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function ov(){}function eA(s,i,l,h,f){if(f){if(typeof h=="function"){var y=h;h=function(){var K=zc(w);y.call(K)}}var w=rv(i,h,s,0,null,!1,!1,"",ov);return s._reactRootContainer=w,s[Gr]=w.current,cl(s.nodeType===8?s.parentNode:s),Vi(),w}for(;f=s.lastChild;)s.removeChild(f);if(typeof h=="function"){var k=h;h=function(){var K=zc(D);k.call(K)}}var D=cp(s,0,!1,null,null,!1,!1,"",ov);return s._reactRootContainer=D,s[Gr]=D.current,cl(s.nodeType===8?s.parentNode:s),Vi(function(){Bc(i,D,l,h)}),D}function Hc(s,i,l,h,f){var y=l._reactRootContainer;if(y){var w=y;if(typeof f=="function"){var k=f;f=function(){var D=zc(w);k.call(D)}}Bc(i,w,s,f)}else w=eA(l,i,s,f,h);return zc(w)}Bu=function(s){switch(s.tag){case 3:var i=s.stateNode;if(i.current.memoizedState.isDehydrated){var l=Ts(i.pendingLanes);l!==0&&(xs(i,l|1),gn(i,et()),(We&6)===0&&(Jo=et()+500,Ls()))}break;case 13:Vi(function(){var h=Yr(s,1);if(h!==null){var f=ln();ur(h,s,1,f)}}),hp(s,1)}},Io=function(s){if(s.tag===13){var i=Yr(s,134217728);if(i!==null){var l=ln();ur(i,s,134217728,l)}hp(s,134217728)}},zu=function(s){if(s.tag===13){var i=$s(s),l=Yr(s,i);if(l!==null){var h=ln();ur(l,s,i,h)}hp(s,i)}},Wu=function(){return $e},qu=function(s,i){var l=$e;try{return $e=s,i()}finally{$e=l}},fo=function(s,i,l){switch(i){case"input":if(La(s,l),i=l.name,l.type==="radio"&&i!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<l.length;i++){var h=l[i];if(h!==s&&h.form===s.form){var f=uc(h);if(!f)throw Error(t(90));oo(h),La(h,f)}}}break;case"textarea":co(s,l);break;case"select":i=l.value,i!=null&&Ur(s,!!l.multiple,i,!1)}},yi=sp,qa=Vi;var tA={usingClientEntryPoint:!1,Events:[fl,Fo,uc,mr,Wa,sp]},Cl={findFiberByHostInstance:ki,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},nA={bundleType:Cl.bundleType,version:Cl.version,rendererPackageName:Cl.rendererPackageName,rendererConfig:Cl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:re.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Ga(s),s===null?null:s.stateNode},findFiberByHostInstance:Cl.findFiberByHostInstance||ZS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kc.isDisabled&&Kc.supportsFiber)try{Ii=Kc.inject(nA),En=Kc}catch{}}return yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tA,yn.createPortal=function(s,i){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fp(i))throw Error(t(200));return YS(s,i,null,l)},yn.createRoot=function(s,i){if(!fp(s))throw Error(t(299));var l=!1,h="",f=iv;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onRecoverableError!==void 0&&(f=i.onRecoverableError)),i=cp(s,1,!1,null,null,l,!1,h,f),s[Gr]=i.current,cl(s.nodeType===8?s.parentNode:s),new dp(i)},yn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var i=s._reactInternals;if(i===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=Ga(i),s=s===null?null:s.stateNode,s},yn.flushSync=function(s){return Vi(s)},yn.hydrate=function(s,i,l){if(!qc(i))throw Error(t(200));return Hc(null,s,i,!0,l)},yn.hydrateRoot=function(s,i,l){if(!fp(s))throw Error(t(405));var h=l!=null&&l.hydratedSources||null,f=!1,y="",w=iv;if(l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(w=l.onRecoverableError)),i=rv(i,null,s,1,l??null,f,!1,y,w),s[Gr]=i.current,cl(s),h)for(s=0;s<h.length;s++)l=h[s],f=l._getVersion,f=f(l._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[l,f]:i.mutableSourceEagerHydrationData.push(l,f);return new Wc(i)},yn.render=function(s,i,l){if(!qc(i))throw Error(t(200));return Hc(null,s,i,!1,l)},yn.unmountComponentAtNode=function(s){if(!qc(s))throw Error(t(40));return s._reactRootContainer?(Vi(function(){Hc(null,null,s,!1,function(){s._reactRootContainer=null,s[Gr]=null})}),!0):!1},yn.unstable_batchedUpdates=sp,yn.unstable_renderSubtreeIntoContainer=function(s,i,l,h){if(!qc(l))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return Hc(s,i,l,!1,h)},yn.version="18.2.0-next-9e3b772b8-20220608",yn}var mv;function hA(){if(mv)return gp.exports;mv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),gp.exports=cA(),gp.exports}var gv;function dA(){if(gv)return Gc;gv=1;var n=hA();return Gc.createRoot=n.createRoot,Gc.hydrateRoot=n.hydrateRoot,Gc}var fA=dA();/**
 * react-router v7.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var yv="popstate";function pA(n={}){function e(r,o){let{pathname:a,search:c,hash:d}=r.location;return zp("",{pathname:a,search:c,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(r,o){return typeof o=="string"?o:ru(o)}return gA(e,t,null,n)}function ht(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Or(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function mA(){return Math.random().toString(36).substring(2,10)}function _v(n,e){return{usr:n.state,key:n.key,idx:e}}function zp(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Ta(e):e,state:t,key:e&&e.key||r||mA()}}function ru({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ta(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function gA(n,e,t,r={}){let{window:o=document.defaultView,v5Compat:a=!1}=r,c=o.history,d="POP",p=null,g=v();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function v(){return(c.state||{idx:null}).idx}function E(){d="POP";let V=v(),H=V==null?null:V-g;g=V,p&&p({action:d,location:j.location,delta:H})}function T(V,H){d="PUSH";let F=zp(j.location,V,H);g=v()+1;let X=_v(F,g),re=j.createHref(F);try{c.pushState(X,"",re)}catch(_e){if(_e instanceof DOMException&&_e.name==="DataCloneError")throw _e;o.location.assign(re)}a&&p&&p({action:d,location:j.location,delta:1})}function x(V,H){d="REPLACE";let F=zp(j.location,V,H);g=v();let X=_v(F,g),re=j.createHref(F);c.replaceState(X,"",re),a&&p&&p({action:d,location:j.location,delta:0})}function M(V){return yA(V)}let j={get action(){return d},get location(){return n(o,c)},listen(V){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(yv,E),p=V,()=>{o.removeEventListener(yv,E),p=null}},createHref(V){return e(o,V)},createURL:M,encodeLocation(V){let H=M(V);return{pathname:H.pathname,search:H.search,hash:H.hash}},push:T,replace:x,go(V){return c.go(V)}};return j}function yA(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ht(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:ru(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function L0(n,e,t="/"){return _A(n,e,t,!1)}function _A(n,e,t,r){let o=typeof e=="string"?Ta(e):e,a=hs(o.pathname||"/",t);if(a==null)return null;let c=M0(n);vA(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let g=bA(a);d=RA(c[p],g,r)}return d}function M0(n,e=[],t=[],r="",o=!1){let a=(c,d,p=o,g)=>{let v={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(r)&&p)return;ht(v.relativePath.startsWith(r),`Absolute route path "${v.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(r.length)}let E=us([r,v.relativePath]),T=t.concat(v);c.children&&c.children.length>0&&(ht(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),M0(c.children,e,T,E,p)),!(c.path==null&&!c.index)&&e.push({path:E,score:xA(E,c.index),routesMeta:T})};return n.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))a(c,d);else for(let p of V0(c.path))a(c,d,!0,p)}),e}function V0(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,o=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return o?[a,""]:[a];let c=V0(r.join("/")),d=[];return d.push(...c.map(p=>p===""?a:[a,p].join("/"))),o&&d.push(...c),d.map(p=>n.startsWith("/")&&p===""?"/":p)}function vA(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:CA(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var wA=/^:[\w-]+$/,EA=3,IA=2,TA=1,SA=10,AA=-2,vv=n=>n==="*";function xA(n,e){let t=n.split("/"),r=t.length;return t.some(vv)&&(r+=AA),e&&(r+=IA),t.filter(o=>!vv(o)).reduce((o,a)=>o+(wA.test(a)?EA:a===""?TA:SA),r)}function CA(n,e){return n.length===e.length&&n.slice(0,-1).every((r,o)=>r===e[o])?n[n.length-1]-e[e.length-1]:0}function RA(n,e,t=!1){let{routesMeta:r}=n,o={},a="/",c=[];for(let d=0;d<r.length;++d){let p=r[d],g=d===r.length-1,v=a==="/"?e:e.slice(a.length)||"/",E=Ph({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},v),T=p.route;if(!E&&g&&t&&!r[r.length-1].route.index&&(E=Ph({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},v)),!E)return null;Object.assign(o,E.params),c.push({params:o,pathname:us([a,E.pathname]),pathnameBase:OA(us([a,E.pathnameBase])),route:T}),E.pathnameBase!=="/"&&(a=us([a,E.pathnameBase]))}return c}function Ph(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=kA(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let a=o[0],c=a.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:r.reduce((g,{paramName:v,isOptional:E},T)=>{if(v==="*"){let M=d[T]||"";c=a.slice(0,a.length-M.length).replace(/(.)\/+$/,"$1")}const x=d[T];return E&&!x?g[v]=void 0:g[v]=(x||"").replace(/%2F/g,"/"),g},{}),pathname:a,pathnameBase:c,pattern:n}}function kA(n,e=!1,t=!0){Or(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(r.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function bA(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Or(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function hs(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function PA(n,e="/"){let{pathname:t,search:r="",hash:o=""}=typeof n=="string"?Ta(n):n;return{pathname:t?t.startsWith("/")?t:NA(t,e):e,search:LA(r),hash:MA(o)}}function NA(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function vp(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function DA(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function F0(n){let e=DA(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function j0(n,e,t,r=!1){let o;typeof n=="string"?o=Ta(n):(o={...n},ht(!o.pathname||!o.pathname.includes("?"),vp("?","pathname","search",o)),ht(!o.pathname||!o.pathname.includes("#"),vp("#","pathname","hash",o)),ht(!o.search||!o.search.includes("#"),vp("#","search","hash",o)));let a=n===""||o.pathname==="",c=a?"/":o.pathname,d;if(c==null)d=t;else{let E=e.length-1;if(!r&&c.startsWith("..")){let T=c.split("/");for(;T[0]==="..";)T.shift(),E-=1;o.pathname=T.join("/")}d=E>=0?e[E]:"/"}let p=PA(o,d),g=c&&c!=="/"&&c.endsWith("/"),v=(a||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(g||v)&&(p.pathname+="/"),p}var us=n=>n.join("/").replace(/\/\/+/g,"/"),OA=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),LA=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,MA=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function VA(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var U0=["POST","PUT","PATCH","DELETE"];new Set(U0);var FA=["GET",...U0];new Set(FA);var Sa=q.createContext(null);Sa.displayName="DataRouter";var ad=q.createContext(null);ad.displayName="DataRouterState";q.createContext(!1);var $0=q.createContext({isTransitioning:!1});$0.displayName="ViewTransition";var jA=q.createContext(new Map);jA.displayName="Fetchers";var UA=q.createContext(null);UA.displayName="Await";var Mr=q.createContext(null);Mr.displayName="Navigation";var fu=q.createContext(null);fu.displayName="Location";var gs=q.createContext({outlet:null,matches:[],isDataRoute:!1});gs.displayName="Route";var Om=q.createContext(null);Om.displayName="RouteError";function $A(n,{relative:e}={}){ht(pu(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=q.useContext(Mr),{hash:o,pathname:a,search:c}=mu(n,{relative:e}),d=a;return t!=="/"&&(d=a==="/"?t:us([t,a])),r.createHref({pathname:d,search:c,hash:o})}function pu(){return q.useContext(fu)!=null}function ro(){return ht(pu(),"useLocation() may be used only in the context of a <Router> component."),q.useContext(fu).location}var B0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function z0(n){q.useContext(Mr).static||q.useLayoutEffect(n)}function ld(){let{isDataRoute:n}=q.useContext(gs);return n?ex():BA()}function BA(){ht(pu(),"useNavigate() may be used only in the context of a <Router> component.");let n=q.useContext(Sa),{basename:e,navigator:t}=q.useContext(Mr),{matches:r}=q.useContext(gs),{pathname:o}=ro(),a=JSON.stringify(F0(r)),c=q.useRef(!1);return z0(()=>{c.current=!0}),q.useCallback((p,g={})=>{if(Or(c.current,B0),!c.current)return;if(typeof p=="number"){t.go(p);return}let v=j0(p,JSON.parse(a),o,g.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:us([e,v.pathname])),(g.replace?t.replace:t.push)(v,g.state,g)},[e,t,a,o,n])}q.createContext(null);function mu(n,{relative:e}={}){let{matches:t}=q.useContext(gs),{pathname:r}=ro(),o=JSON.stringify(F0(t));return q.useMemo(()=>j0(n,JSON.parse(o),r,e==="path"),[n,o,r,e])}function zA(n,e){return W0(n,e)}function W0(n,e,t,r){ht(pu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=q.useContext(Mr),{matches:a}=q.useContext(gs),c=a[a.length-1],d=c?c.params:{},p=c?c.pathname:"/",g=c?c.pathnameBase:"/",v=c&&c.route;{let H=v&&v.path||"";q0(p,!v||H.endsWith("*")||H.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${H}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${H}"> to <Route path="${H==="/"?"*":`${H}/*`}">.`)}let E=ro(),T;if(e){let H=typeof e=="string"?Ta(e):e;ht(g==="/"||H.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${H.pathname}" was given in the \`location\` prop.`),T=H}else T=E;let x=T.pathname||"/",M=x;if(g!=="/"){let H=g.replace(/^\//,"").split("/");M="/"+x.replace(/^\//,"").split("/").slice(H.length).join("/")}let j=L0(n,{pathname:M});Or(v||j!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),Or(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let V=GA(j&&j.map(H=>Object.assign({},H,{params:Object.assign({},d,H.params),pathname:us([g,o.encodeLocation?o.encodeLocation(H.pathname).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?g:us([g,o.encodeLocation?o.encodeLocation(H.pathnameBase).pathname:H.pathnameBase])})),a,t,r);return e&&V?q.createElement(fu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...T},navigationType:"POP"}},V):V}function WA(){let n=ZA(),e=VA(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=q.createElement(q.Fragment,null,q.createElement("p",null,"💿 Hey developer 👋"),q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",q.createElement("code",{style:a},"ErrorBoundary")," or"," ",q.createElement("code",{style:a},"errorElement")," prop on your route.")),q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),t?q.createElement("pre",{style:o},t):null,c)}var qA=q.createElement(WA,null),HA=class extends q.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?q.createElement(gs.Provider,{value:this.props.routeContext},q.createElement(Om.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function KA({routeContext:n,match:e,children:t}){let r=q.useContext(Sa);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),q.createElement(gs.Provider,{value:n},t)}function GA(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=t?.errors;if(a!=null){let p=o.findIndex(g=>g.route.id&&a?.[g.route.id]!==void 0);ht(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let c=!1,d=-1;if(t)for(let p=0;p<o.length;p++){let g=o[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=p),g.route.id){let{loaderData:v,errors:E}=t,T=g.route.loader&&!v.hasOwnProperty(g.route.id)&&(!E||E[g.route.id]===void 0);if(g.route.lazy||T){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((p,g,v)=>{let E,T=!1,x=null,M=null;t&&(E=a&&g.route.id?a[g.route.id]:void 0,x=g.route.errorElement||qA,c&&(d<0&&v===0?(q0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,M=null):d===v&&(T=!0,M=g.route.hydrateFallbackElement||null)));let j=e.concat(o.slice(0,v+1)),V=()=>{let H;return E?H=x:T?H=M:g.route.Component?H=q.createElement(g.route.Component,null):g.route.element?H=g.route.element:H=p,q.createElement(KA,{match:g,routeContext:{outlet:p,matches:j,isDataRoute:t!=null},children:H})};return t&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?q.createElement(HA,{location:t.location,revalidation:t.revalidation,component:x,error:E,children:V(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):V()},null)}function Lm(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function QA(n){let e=q.useContext(Sa);return ht(e,Lm(n)),e}function XA(n){let e=q.useContext(ad);return ht(e,Lm(n)),e}function JA(n){let e=q.useContext(gs);return ht(e,Lm(n)),e}function Mm(n){let e=JA(n),t=e.matches[e.matches.length-1];return ht(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function YA(){return Mm("useRouteId")}function ZA(){let n=q.useContext(Om),e=XA("useRouteError"),t=Mm("useRouteError");return n!==void 0?n:e.errors?.[t]}function ex(){let{router:n}=QA("useNavigate"),e=Mm("useNavigate"),t=q.useRef(!1);return z0(()=>{t.current=!0}),q.useCallback(async(o,a={})=>{Or(t.current,B0),t.current&&(typeof o=="number"?n.navigate(o):await n.navigate(o,{fromRouteId:e,...a}))},[n,e])}var wv={};function q0(n,e,t){!e&&!wv[n]&&(wv[n]=!0,Or(!1,t))}q.memo(tx);function tx({routes:n,future:e,state:t}){return W0(n,void 0,t,e)}function Pl(n){ht(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function nx({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:o,static:a=!1}){ht(!pu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),d=q.useMemo(()=>({basename:c,navigator:o,static:a,future:{}}),[c,o,a]);typeof t=="string"&&(t=Ta(t));let{pathname:p="/",search:g="",hash:v="",state:E=null,key:T="default"}=t,x=q.useMemo(()=>{let M=hs(p,c);return M==null?null:{location:{pathname:M,search:g,hash:v,state:E,key:T},navigationType:r}},[c,p,g,v,E,T,r]);return Or(x!=null,`<Router basename="${c}"> is not able to match the URL "${p}${g}${v}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:q.createElement(Mr.Provider,{value:d},q.createElement(fu.Provider,{children:e,value:x}))}function rx({children:n,location:e}){return zA(Wp(n),e)}function Wp(n,e=[]){let t=[];return q.Children.forEach(n,(r,o)=>{if(!q.isValidElement(r))return;let a=[...e,o];if(r.type===q.Fragment){t.push.apply(t,Wp(r.props.children,a));return}ht(r.type===Pl,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ht(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=Wp(r.props.children,a)),t.push(c)}),t}var uh="get",ch="application/x-www-form-urlencoded";function ud(n){return n!=null&&typeof n.tagName=="string"}function sx(n){return ud(n)&&n.tagName.toLowerCase()==="button"}function ix(n){return ud(n)&&n.tagName.toLowerCase()==="form"}function ox(n){return ud(n)&&n.tagName.toLowerCase()==="input"}function ax(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function lx(n,e){return n.button===0&&(!e||e==="_self")&&!ax(n)}var Qc=null;function ux(){if(Qc===null)try{new FormData(document.createElement("form"),0),Qc=!1}catch{Qc=!0}return Qc}var cx=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function wp(n){return n!=null&&!cx.has(n)?(Or(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ch}"`),null):n}function hx(n,e){let t,r,o,a,c;if(ix(n)){let d=n.getAttribute("action");r=d?hs(d,e):null,t=n.getAttribute("method")||uh,o=wp(n.getAttribute("enctype"))||ch,a=new FormData(n)}else if(sx(n)||ox(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=n.getAttribute("formaction")||d.getAttribute("action");if(r=p?hs(p,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||uh,o=wp(n.getAttribute("formenctype"))||wp(d.getAttribute("enctype"))||ch,a=new FormData(d,n),!ux()){let{name:g,type:v,value:E}=n;if(v==="image"){let T=g?`${g}.`:"";a.append(`${T}x`,"0"),a.append(`${T}y`,"0")}else g&&a.append(g,E)}}else{if(ud(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=uh,r=null,o=ch,c=n}return a&&o==="text/plain"&&(c=a,a=void 0),{action:r,method:t.toLowerCase(),encType:o,formData:a,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Vm(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function dx(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&hs(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function fx(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function px(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function mx(n,e,t){let r=await Promise.all(n.map(async o=>{let a=e.routes[o.route.id];if(a){let c=await fx(a,t);return c.links?c.links():[]}return[]}));return vx(r.flat(1).filter(px).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Ev(n,e,t,r,o,a){let c=(p,g)=>t[g]?p.route.id!==t[g].route.id:!0,d=(p,g)=>t[g].pathname!==p.pathname||t[g].route.path?.endsWith("*")&&t[g].params["*"]!==p.params["*"];return a==="assets"?e.filter((p,g)=>c(p,g)||d(p,g)):a==="data"?e.filter((p,g)=>{let v=r.routes[p.route.id];if(!v||!v.hasLoader)return!1;if(c(p,g)||d(p,g))return!0;if(p.route.shouldRevalidate){let E=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function gx(n,e,{includeHydrateFallback:t}={}){return yx(n.map(r=>{let o=e.routes[r.route.id];if(!o)return[];let a=[o.module];return o.clientActionModule&&(a=a.concat(o.clientActionModule)),o.clientLoaderModule&&(a=a.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(a=a.concat(o.hydrateFallbackModule)),o.imports&&(a=a.concat(o.imports)),a}).flat(1))}function yx(n){return[...new Set(n)]}function _x(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function vx(n,e){let t=new Set;return new Set(e),n.reduce((r,o)=>{let a=JSON.stringify(_x(o));return t.has(a)||(t.add(a),r.push({key:a,link:o})),r},[])}function H0(){let n=q.useContext(Sa);return Vm(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function wx(){let n=q.useContext(ad);return Vm(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Fm=q.createContext(void 0);Fm.displayName="FrameworkContext";function K0(){let n=q.useContext(Fm);return Vm(n,"You must render this element inside a <HydratedRouter> element"),n}function Ex(n,e){let t=q.useContext(Fm),[r,o]=q.useState(!1),[a,c]=q.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:g,onMouseLeave:v,onTouchStart:E}=e,T=q.useRef(null);q.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let j=H=>{H.forEach(F=>{c(F.isIntersecting)})},V=new IntersectionObserver(j,{threshold:.5});return T.current&&V.observe(T.current),()=>{V.disconnect()}}},[n]),q.useEffect(()=>{if(r){let j=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(j)}}},[r]);let x=()=>{o(!0)},M=()=>{o(!1),c(!1)};return t?n!=="intent"?[a,T,{}]:[a,T,{onFocus:kl(d,x),onBlur:kl(p,M),onMouseEnter:kl(g,x),onMouseLeave:kl(v,M),onTouchStart:kl(E,x)}]:[!1,T,{}]}function kl(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function Ix({page:n,...e}){let{router:t}=H0(),r=q.useMemo(()=>L0(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?q.createElement(Sx,{page:n,matches:r,...e}):null}function Tx(n){let{manifest:e,routeModules:t}=K0(),[r,o]=q.useState([]);return q.useEffect(()=>{let a=!1;return mx(n,e,t).then(c=>{a||o(c)}),()=>{a=!0}},[n,e,t]),r}function Sx({page:n,matches:e,...t}){let r=ro(),{manifest:o,routeModules:a}=K0(),{basename:c}=H0(),{loaderData:d,matches:p}=wx(),g=q.useMemo(()=>Ev(n,e,p,o,r,"data"),[n,e,p,o,r]),v=q.useMemo(()=>Ev(n,e,p,o,r,"assets"),[n,e,p,o,r]),E=q.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let M=new Set,j=!1;if(e.forEach(H=>{let F=o.routes[H.route.id];!F||!F.hasLoader||(!g.some(X=>X.route.id===H.route.id)&&H.route.id in d&&a[H.route.id]?.shouldRevalidate||F.hasClientLoader?j=!0:M.add(H.route.id))}),M.size===0)return[];let V=dx(n,c,"data");return j&&M.size>0&&V.searchParams.set("_routes",e.filter(H=>M.has(H.route.id)).map(H=>H.route.id).join(",")),[V.pathname+V.search]},[c,d,r,o,g,e,n,a]),T=q.useMemo(()=>gx(v,o),[v,o]),x=Tx(v);return q.createElement(q.Fragment,null,E.map(M=>q.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...t})),T.map(M=>q.createElement("link",{key:M,rel:"modulepreload",href:M,...t})),x.map(({key:M,link:j})=>q.createElement("link",{key:M,nonce:t.nonce,...j})))}function Ax(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var G0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{G0&&(window.__reactRouterVersion="7.8.1")}catch{}function xx({basename:n,children:e,window:t}){let r=q.useRef();r.current==null&&(r.current=pA({window:t,v5Compat:!0}));let o=r.current,[a,c]=q.useState({action:o.action,location:o.location}),d=q.useCallback(p=>{q.startTransition(()=>c(p))},[c]);return q.useLayoutEffect(()=>o.listen(d),[o,d]),q.createElement(nx,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:o})}var Q0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,X0=q.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:o,reloadDocument:a,replace:c,state:d,target:p,to:g,preventScrollReset:v,viewTransition:E,...T},x){let{basename:M}=q.useContext(Mr),j=typeof g=="string"&&Q0.test(g),V,H=!1;if(typeof g=="string"&&j&&(V=g,G0))try{let R=new URL(window.location.href),P=g.startsWith("//")?new URL(R.protocol+g):new URL(g),N=hs(P.pathname,M);P.origin===R.origin&&N!=null?g=N+P.search+P.hash:H=!0}catch{Or(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let F=$A(g,{relative:o}),[X,re,_e]=Ex(r,T),ge=bx(g,{replace:c,state:d,target:p,preventScrollReset:v,relative:o,viewTransition:E});function b(R){e&&e(R),R.defaultPrevented||ge(R)}let A=q.createElement("a",{...T,..._e,href:V||F,onClick:H||a?e:b,ref:Ax(x,re),target:p,"data-discover":!j&&t==="render"?"true":void 0});return X&&!j?q.createElement(q.Fragment,null,A,q.createElement(Ix,{page:F})):A});X0.displayName="Link";var Cx=q.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:o=!1,style:a,to:c,viewTransition:d,children:p,...g},v){let E=mu(c,{relative:g.relative}),T=ro(),x=q.useContext(ad),{navigator:M,basename:j}=q.useContext(Mr),V=x!=null&&Lx(E)&&d===!0,H=M.encodeLocation?M.encodeLocation(E).pathname:E.pathname,F=T.pathname,X=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;t||(F=F.toLowerCase(),X=X?X.toLowerCase():null,H=H.toLowerCase()),X&&j&&(X=hs(X,j)||X);const re=H!=="/"&&H.endsWith("/")?H.length-1:H.length;let _e=F===H||!o&&F.startsWith(H)&&F.charAt(re)==="/",ge=X!=null&&(X===H||!o&&X.startsWith(H)&&X.charAt(H.length)==="/"),b={isActive:_e,isPending:ge,isTransitioning:V},A=_e?e:void 0,R;typeof r=="function"?R=r(b):R=[r,_e?"active":null,ge?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let P=typeof a=="function"?a(b):a;return q.createElement(X0,{...g,"aria-current":A,className:R,ref:v,style:P,to:c,viewTransition:d},typeof p=="function"?p(b):p)});Cx.displayName="NavLink";var Rx=q.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:o,state:a,method:c=uh,action:d,onSubmit:p,relative:g,preventScrollReset:v,viewTransition:E,...T},x)=>{let M=Dx(),j=Ox(d,{relative:g}),V=c.toLowerCase()==="get"?"get":"post",H=typeof d=="string"&&Q0.test(d),F=X=>{if(p&&p(X),X.defaultPrevented)return;X.preventDefault();let re=X.nativeEvent.submitter,_e=re?.getAttribute("formmethod")||c;M(re||X.currentTarget,{fetcherKey:e,method:_e,navigate:t,replace:o,state:a,relative:g,preventScrollReset:v,viewTransition:E})};return q.createElement("form",{ref:x,method:V,action:j,onSubmit:r?p:F,...T,"data-discover":!H&&n==="render"?"true":void 0})});Rx.displayName="Form";function kx(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function J0(n){let e=q.useContext(Sa);return ht(e,kx(n)),e}function bx(n,{target:e,replace:t,state:r,preventScrollReset:o,relative:a,viewTransition:c}={}){let d=ld(),p=ro(),g=mu(n,{relative:a});return q.useCallback(v=>{if(lx(v,e)){v.preventDefault();let E=t!==void 0?t:ru(p)===ru(g);d(n,{replace:E,state:r,preventScrollReset:o,relative:a,viewTransition:c})}},[p,d,g,t,r,e,n,o,a,c])}var Px=0,Nx=()=>`__${String(++Px)}__`;function Dx(){let{router:n}=J0("useSubmit"),{basename:e}=q.useContext(Mr),t=YA();return q.useCallback(async(r,o={})=>{let{action:a,method:c,encType:d,formData:p,body:g}=hx(r,e);if(o.navigate===!1){let v=o.fetcherKey||Nx();await n.fetch(v,t,o.action||a,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||c,formEncType:o.encType||d,flushSync:o.flushSync})}else await n.navigate(o.action||a,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||c,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[n,e,t])}function Ox(n,{relative:e}={}){let{basename:t}=q.useContext(Mr),r=q.useContext(gs);ht(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),a={...mu(n||".",{relative:e})},c=ro();if(n==null){a.search=c.search;let d=new URLSearchParams(a.search),p=d.getAll("index");if(p.some(v=>v==="")){d.delete("index"),p.filter(E=>E).forEach(E=>d.append("index",E));let v=d.toString();a.search=v?`?${v}`:""}}return(!n||n===".")&&o.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:us([t,a.pathname])),ru(a)}function Lx(n,{relative:e}={}){let t=q.useContext($0);ht(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=J0("useViewTransitionState"),o=mu(n,{relative:e});if(!t.isTransitioning)return!1;let a=hs(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=hs(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Ph(o.pathname,c)!=null||Ph(o.pathname,a)!=null}const Mx=()=>{};var Iv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let o=n.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},Vx=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const o=n[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[r++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],c=n[t++],d=n[t++],p=((o&7)<<18|(a&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const a=n[t++],c=n[t++];e[r++]=String.fromCharCode((o&15)<<12|(a&63)<<6|c&63)}}return e.join("")},Z0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<n.length;o+=3){const a=n[o],c=o+1<n.length,d=c?n[o+1]:0,p=o+2<n.length,g=p?n[o+2]:0,v=a>>2,E=(a&3)<<4|d>>4;let T=(d&15)<<2|g>>6,x=g&63;p||(x=64,c||(T=64)),r.push(t[v],t[E],t[T],t[x])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Y0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Vx(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const g=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||d==null||g==null||E==null)throw new Fx;const T=a<<2|d>>4;if(r.push(T),g!==64){const x=d<<4&240|g>>2;if(r.push(x),E!==64){const M=g<<6&192|E;r.push(M)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Fx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jx=function(n){const e=Y0(n);return Z0.encodeByteArray(e,!0)},Nh=function(n){return jx(n).replace(/\./g,"")},eE=function(n){try{return Z0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x=()=>Ux().__FIREBASE_DEFAULTS__,Bx=()=>{if(typeof process>"u"||typeof Iv>"u")return;const n=Iv.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},zx=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&eE(n[1]);return e&&JSON.parse(e)},cd=()=>{try{return Mx()||$x()||Bx()||zx()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},tE=n=>cd()?.emulatorHosts?.[n],Wx=n=>{const e=tE(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},nE=()=>cd()?.config,rE=n=>cd()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aa(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function sE(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hx(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Nh(JSON.stringify(t)),Nh(JSON.stringify(c)),""].join(".")}const Kl={};function Kx(){const n={prod:[],emulator:[]};for(const e of Object.keys(Kl))Kl[e]?n.emulator.push(e):n.prod.push(e);return n}function Gx(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Tv=!1;function iE(n,e){if(typeof window>"u"||typeof document>"u"||!Aa(window.location.host)||Kl[n]===e||Kl[n]||Tv)return;Kl[n]=e;function t(T){return`__firebase__banner__${T}`}const r="__firebase__banner",a=Kx().prod.length>0;function c(){const T=document.getElementById(r);T&&T.remove()}function d(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function p(T,x){T.setAttribute("width","24"),T.setAttribute("id",x),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function g(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Tv=!0,c()},T}function v(T,x){T.setAttribute("id",x),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=Gx(r),x=t("text"),M=document.getElementById(x)||document.createElement("span"),j=t("learnmore"),V=document.getElementById(j)||document.createElement("a"),H=t("preprendIcon"),F=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const X=T.element;d(X),v(V,j);const re=g();p(F,H),X.append(F,M,V,re),document.body.appendChild(X)}a?(M.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Qx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rn())}function Xx(){const n=cd()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Jx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Yx(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Zx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function eC(){const n=rn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function tC(){return!Xx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nC(){try{return typeof indexedDB=="object"}catch{return!1}}function rC(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC="FirebaseError";class ys extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=sC,Object.setPrototypeOf(this,ys.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gu.prototype.create)}}class gu{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],c=a?iC(a,r):"Error",d=`${this.serviceName}: ${c} (${o}).`;return new ys(o,d,r)}}function iC(n,e){return n.replace(oC,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const oC=/\{\$([^}]+)}/g;function aC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Xi(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const a=n[o],c=e[o];if(Sv(a)&&Sv(c)){if(!Xi(a,c))return!1}else if(a!==c)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function Sv(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Nl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,a]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function Dl(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function lC(n,e){const t=new uC(n,e);return t.subscribe.bind(t)}class uC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");cC(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=Ep),o.error===void 0&&(o.error=Ep),o.complete===void 0&&(o.complete=Ep);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cC(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Ep(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(n){return n&&n._delegate?n._delegate:n}class Ji{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new qx;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fC(e))try{this.getOrInitializeService({instanceIdentifier:$i})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});r.resolve(a)}catch{}}}}clearInstance(e=$i){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$i){return this.instances.has(e)}getOptions(e=$i){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);r===d&&c.resolve(o)}return o}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const a=this.instances.get(r);return a&&e(a,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:dC(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=$i){return this.component?this.component.multipleInstances?e:$i:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dC(n){return n===$i?void 0:n}function fC(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new hC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Fe||(Fe={}));const mC={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},gC=Fe.INFO,yC={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},_C=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),o=yC[e];if(o)console[o](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jm{constructor(e){this.name=e,this._logLevel=gC,this._logHandler=_C,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const vC=(n,e)=>e.some(t=>n instanceof t);let Av,xv;function wC(){return Av||(Av=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function EC(){return xv||(xv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const oE=new WeakMap,qp=new WeakMap,aE=new WeakMap,Ip=new WeakMap,Um=new WeakMap;function IC(n){const e=new Promise((t,r)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",c)},a=()=>{t(Ys(n.result)),o()},c=()=>{r(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&oE.set(t,n)}).catch(()=>{}),Um.set(e,n),e}function TC(n){if(qp.has(n))return;const e=new Promise((t,r)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",c),n.removeEventListener("abort",c)},a=()=>{t(),o()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",c),n.addEventListener("abort",c)});qp.set(n,e)}let Hp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return qp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||aE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ys(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function SC(n){Hp=n(Hp)}function AC(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Tp(this),e,...t);return aE.set(r,e.sort?e.sort():[e]),Ys(r)}:EC().includes(n)?function(...e){return n.apply(Tp(this),e),Ys(oE.get(this))}:function(...e){return Ys(n.apply(Tp(this),e))}}function xC(n){return typeof n=="function"?AC(n):(n instanceof IDBTransaction&&TC(n),vC(n,wC())?new Proxy(n,Hp):n)}function Ys(n){if(n instanceof IDBRequest)return IC(n);if(Ip.has(n))return Ip.get(n);const e=xC(n);return e!==n&&(Ip.set(n,e),Um.set(e,n)),e}const Tp=n=>Um.get(n);function CC(n,e,{blocked:t,upgrade:r,blocking:o,terminated:a}={}){const c=indexedDB.open(n,e),d=Ys(c);return r&&c.addEventListener("upgradeneeded",p=>{r(Ys(c.result),p.oldVersion,p.newVersion,Ys(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{a&&p.addEventListener("close",()=>a()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const RC=["get","getKey","getAll","getAllKeys","count"],kC=["put","add","delete","clear"],Sp=new Map;function Cv(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Sp.get(e))return Sp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=kC.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||RC.includes(t)))return;const a=async function(c,...d){const p=this.transaction(c,o?"readwrite":"readonly");let g=p.store;return r&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),o&&p.done]))[0]};return Sp.set(e,a),a}SC(n=>({...n,get:(e,t,r)=>Cv(e,t)||n.get(e,t,r),has:(e,t)=>!!Cv(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(PC(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function PC(n){return n.getComponent()?.type==="VERSION"}const Kp="@firebase/app",Rv="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds=new jm("@firebase/app"),NC="@firebase/app-compat",DC="@firebase/analytics-compat",OC="@firebase/analytics",LC="@firebase/app-check-compat",MC="@firebase/app-check",VC="@firebase/auth",FC="@firebase/auth-compat",jC="@firebase/database",UC="@firebase/data-connect",$C="@firebase/database-compat",BC="@firebase/functions",zC="@firebase/functions-compat",WC="@firebase/installations",qC="@firebase/installations-compat",HC="@firebase/messaging",KC="@firebase/messaging-compat",GC="@firebase/performance",QC="@firebase/performance-compat",XC="@firebase/remote-config",JC="@firebase/remote-config-compat",YC="@firebase/storage",ZC="@firebase/storage-compat",eR="@firebase/firestore",tR="@firebase/ai",nR="@firebase/firestore-compat",rR="firebase",sR="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp="[DEFAULT]",iR={[Kp]:"fire-core",[NC]:"fire-core-compat",[OC]:"fire-analytics",[DC]:"fire-analytics-compat",[MC]:"fire-app-check",[LC]:"fire-app-check-compat",[VC]:"fire-auth",[FC]:"fire-auth-compat",[jC]:"fire-rtdb",[UC]:"fire-data-connect",[$C]:"fire-rtdb-compat",[BC]:"fire-fn",[zC]:"fire-fn-compat",[WC]:"fire-iid",[qC]:"fire-iid-compat",[HC]:"fire-fcm",[KC]:"fire-fcm-compat",[GC]:"fire-perf",[QC]:"fire-perf-compat",[XC]:"fire-rc",[JC]:"fire-rc-compat",[YC]:"fire-gcs",[ZC]:"fire-gcs-compat",[eR]:"fire-fst",[nR]:"fire-fst-compat",[tR]:"fire-vertex","fire-js":"fire-js",[rR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh=new Map,oR=new Map,Qp=new Map;function kv(n,e){try{n.container.addComponent(e)}catch(t){ds.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ma(n){const e=n.name;if(Qp.has(e))return ds.debug(`There were multiple attempts to register component ${e}.`),!1;Qp.set(e,n);for(const t of Dh.values())kv(t,n);for(const t of oR.values())kv(t,n);return!0}function $m(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Pn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zs=new gu("app","Firebase",aR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ji("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa=sR;function lE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Gp,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw Zs.create("bad-app-name",{appName:String(o)});if(t||(t=nE()),!t)throw Zs.create("no-options");const a=Dh.get(o);if(a){if(Xi(t,a.options)&&Xi(r,a.config))return a;throw Zs.create("duplicate-app",{appName:o})}const c=new pC(o);for(const p of Qp.values())c.addComponent(p);const d=new lR(t,r,c);return Dh.set(o,d),d}function uE(n=Gp){const e=Dh.get(n);if(!e&&n===Gp&&nE())return lE();if(!e)throw Zs.create("no-app",{appName:n});return e}function ei(n,e,t){let r=iR[n]??n;t&&(r+=`-${t}`);const o=r.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const c=[`Unable to register library "${r}" with version "${e}":`];o&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ds.warn(c.join(" "));return}ma(new Ji(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR="firebase-heartbeat-database",cR=1,su="firebase-heartbeat-store";let Ap=null;function cE(){return Ap||(Ap=CC(uR,cR,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(su)}catch(t){console.warn(t)}}}}).catch(n=>{throw Zs.create("idb-open",{originalErrorMessage:n.message})})),Ap}async function hR(n){try{const t=(await cE()).transaction(su),r=await t.objectStore(su).get(hE(n));return await t.done,r}catch(e){if(e instanceof ys)ds.warn(e.message);else{const t=Zs.create("idb-get",{originalErrorMessage:e?.message});ds.warn(t.message)}}}async function bv(n,e){try{const r=(await cE()).transaction(su,"readwrite");await r.objectStore(su).put(e,hE(n)),await r.done}catch(t){if(t instanceof ys)ds.warn(t.message);else{const r=Zs.create("idb-set",{originalErrorMessage:t?.message});ds.warn(r.message)}}}function hE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR=1024,fR=30;class pR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new gR(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Pv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>fR){const o=yR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ds.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Pv(),{heartbeatsToSend:t,unsentEntries:r}=mR(this._heartbeatsCache.heartbeats),o=Nh(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return ds.warn(e),""}}}function Pv(){return new Date().toISOString().substring(0,10)}function mR(n,e=dR){const t=[];let r=n.slice();for(const o of n){const a=t.find(c=>c.agent===o.agent);if(a){if(a.dates.push(o.date),Nv(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Nv(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class gR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nC()?rC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await hR(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return bv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return bv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Nv(n){return Nh(JSON.stringify({version:2,heartbeats:n})).length}function yR(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(n){ma(new Ji("platform-logger",e=>new bC(e),"PRIVATE")),ma(new Ji("heartbeat",e=>new pR(e),"PRIVATE")),ei(Kp,Rv,n),ei(Kp,Rv,"esm2020"),ei("fire-js","")}_R("");function dE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vR=dE,fE=new gu("auth","Firebase",dE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oh=new jm("@firebase/auth");function wR(n,...e){Oh.logLevel<=Fe.WARN&&Oh.warn(`Auth (${xa}): ${n}`,...e)}function hh(n,...e){Oh.logLevel<=Fe.ERROR&&Oh.error(`Auth (${xa}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(n,...e){throw zm(n,...e)}function dr(n,...e){return zm(n,...e)}function Bm(n,e,t){const r={...vR(),[e]:t};return new gu("auth","Firebase",r).create(e,{appName:n.name})}function cs(n){return Bm(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ER(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Gn(n,"argument-error"),Bm(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function zm(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return fE.create(n,...e)}function Ae(n,e,...t){if(!n)throw zm(e,...t)}function as(n){const e="INTERNAL ASSERTION FAILED: "+n;throw hh(e),new Error(e)}function fs(n,e){n||as(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(){return typeof self<"u"&&self.location?.href||""}function IR(){return Dv()==="http:"||Dv()==="https:"}function Dv(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(IR()||Yx()||"connection"in navigator)?navigator.onLine:!0}function SR(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,t){this.shortDelay=e,this.longDelay=t,fs(t>e,"Short delay should be less than long delay!"),this.isMobile=Qx()||Zx()}get(){return TR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(n,e){fs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;as("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;as("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;as("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],CR=new _u(3e4,6e4);function _s(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Vr(n,e,t,r,o={}){return mE(n,o,async()=>{let a={},c={};r&&(e==="GET"?c=r:a={body:JSON.stringify(r)});const d=yu({key:n.config.apiKey,...c}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const g={method:e,headers:p,...a};return Jx()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&Aa(n.emulatorConfig.host)&&(g.credentials="include"),pE.fetch()(await gE(n,n.config.apiHost,t,d),g)})}async function mE(n,e,t){n._canInitEmulator=!1;const r={...AR,...e};try{const o=new kR(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw Xc(n,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const d=a.ok?c.errorMessage:c.error.message,[p,g]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xc(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw Xc(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw Xc(n,"user-disabled",c);const v=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Bm(n,v,g);Gn(n,v)}}catch(o){if(o instanceof ys)throw o;Gn(n,"network-request-failed",{message:String(o)})}}async function vu(n,e,t,r,o={}){const a=await Vr(n,e,t,r,o);return"mfaPendingCredential"in a&&Gn(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function gE(n,e,t,r){const o=`${e}${t}?${r}`,a=n,c=a.config.emulator?Wm(n.config,o):`${n.config.apiScheme}://${o}`;return xR.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}function RR(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class kR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(dr(this.auth,"network-request-failed")),CR.get())})}}function Xc(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const o=dr(n,e,r);return o.customData._tokenResponse=t,o}function Ov(n){return n!==void 0&&n.enterprise!==void 0}class bR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return RR(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function PR(n,e){return Vr(n,"GET","/v2/recaptchaConfig",_s(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NR(n,e){return Vr(n,"POST","/v1/accounts:delete",e)}async function Lh(n,e){return Vr(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function DR(n,e=!1){const t=Tt(n),r=await t.getIdToken(e),o=qm(r);Ae(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,c=a?.sign_in_provider;return{claims:o,token:r,authTime:Gl(xp(o.auth_time)),issuedAtTime:Gl(xp(o.iat)),expirationTime:Gl(xp(o.exp)),signInProvider:c||null,signInSecondFactor:a?.sign_in_second_factor||null}}function xp(n){return Number(n)*1e3}function qm(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return hh("JWT malformed, contained fewer than 3 sections"),null;try{const o=eE(t);return o?JSON.parse(o):(hh("Failed to decode base64 JWT payload"),null)}catch(o){return hh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Lv(n){const e=qm(n);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ga(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ys&&OR(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function OR({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gl(this.lastLoginAt),this.creationTime=Gl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mh(n){const e=n.auth,t=await n.getIdToken(),r=await ga(n,Lh(e,{idToken:t}));Ae(r?.users.length,e,"internal-error");const o=r.users[0];n._notifyReloadListener(o);const a=o.providerUserInfo?.length?yE(o.providerUserInfo):[],c=VR(n.providerData,a),d=n.isAnonymous,p=!(n.email&&o.passwordHash)&&!c?.length,g=d?p:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Jp(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(n,v)}async function MR(n){const e=Tt(n);await Mh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function VR(n,e){return[...n.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function yE(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FR(n,e){const t=await mE(n,{},async()=>{const r=yu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,c=await gE(n,o,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:r};return n.emulatorConfig&&Aa(n.emulatorConfig.host)&&(p.credentials="include"),pE.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function jR(n,e){return Vr(n,"POST","/v2/accounts:revokeToken",_s(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Lv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");const t=Lv(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:o,expiresIn:a}=await FR(e,t);this.updateTokensAndExpiration(r,o,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:o,expirationTime:a}=t,c=new ca;return r&&(Ae(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),o&&(Ae(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),a&&(Ae(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ca,this.toJSON())}_performRefresh(){return as("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qs(n,e){Ae(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class hr{constructor({uid:e,auth:t,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new LR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Jp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await ga(this,this.stsTokenManager.getToken(this.auth,e));return Ae(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return DR(this,e)}reload(){return MR(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new hr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Mh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Pn(this.auth.app))return Promise.reject(cs(this.auth));const e=await this.getIdToken();return await ga(this,NR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,o=t.email??void 0,a=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,p=t._redirectEventId??void 0,g=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:E,emailVerified:T,isAnonymous:x,providerData:M,stsTokenManager:j}=t;Ae(E&&j,e,"internal-error");const V=ca.fromJSON(this.name,j);Ae(typeof E=="string",e,"internal-error"),qs(r,e.name),qs(o,e.name),Ae(typeof T=="boolean",e,"internal-error"),Ae(typeof x=="boolean",e,"internal-error"),qs(a,e.name),qs(c,e.name),qs(d,e.name),qs(p,e.name),qs(g,e.name),qs(v,e.name);const H=new hr({uid:E,auth:e,email:o,emailVerified:T,displayName:r,isAnonymous:x,photoURL:c,phoneNumber:a,tenantId:d,stsTokenManager:V,createdAt:g,lastLoginAt:v});return M&&Array.isArray(M)&&(H.providerData=M.map(F=>({...F}))),p&&(H._redirectEventId=p),H}static async _fromIdTokenResponse(e,t,r=!1){const o=new ca;o.updateFromServerResponse(t);const a=new hr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Mh(a),a}static async _fromGetAccountInfoResponse(e,t,r){const o=t.users[0];Ae(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?yE(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!a?.length,d=new ca;d.updateFromIdToken(r);const p=new hr({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Jp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!a?.length};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv=new Map;function ls(n){fs(n instanceof Function,"Expected a class definition");let e=Mv.get(n);return e?(fs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Mv.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}_E.type="NONE";const Vv=_E;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dh(n,e,t){return`firebase:${n}:${e}:${t}`}class ha{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:o,name:a}=this.auth;this.fullUserKey=dh(this.userKey,o.apiKey,a),this.fullPersistenceKey=dh("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Lh(this.auth,{idToken:e}).catch(()=>{});return t?hr._fromGetAccountInfoResponse(this.auth,t,e):null}return hr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new ha(ls(Vv),e,r);const o=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let a=o[0]||ls(Vv);const c=dh(r,e.config.apiKey,e.name);let d=null;for(const g of t)try{const v=await g._get(c);if(v){let E;if(typeof v=="string"){const T=await Lh(e,{idToken:v}).catch(()=>{});if(!T)break;E=await hr._fromGetAccountInfoResponse(e,T,v)}else E=hr._fromJSON(e,v);g!==a&&(d=E),a=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!a._shouldAllowMigration||!p.length?new ha(a,e,r):(a=p[0],d&&await a._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==a)try{await g._remove(c)}catch{}})),new ha(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fv(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(IE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(SE(e))return"Blackberry";if(AE(e))return"Webos";if(wE(e))return"Safari";if((e.includes("chrome/")||EE(e))&&!e.includes("edge/"))return"Chrome";if(TE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function vE(n=rn()){return/firefox\//i.test(n)}function wE(n=rn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function EE(n=rn()){return/crios\//i.test(n)}function IE(n=rn()){return/iemobile/i.test(n)}function TE(n=rn()){return/android/i.test(n)}function SE(n=rn()){return/blackberry/i.test(n)}function AE(n=rn()){return/webos/i.test(n)}function Hm(n=rn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function UR(n=rn()){return Hm(n)&&!!window.navigator?.standalone}function $R(){return eC()&&document.documentMode===10}function xE(n=rn()){return Hm(n)||TE(n)||AE(n)||SE(n)||/windows phone/i.test(n)||IE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(n,e=[]){let t;switch(n){case"Browser":t=Fv(rn());break;case"Worker":t=`${Fv(rn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${xa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((c,d)=>{try{const p=e(a);c(p)}catch(p){d(p)}});r.onAbort=t,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zR(n,e={}){return Vr(n,"GET","/v2/passwordPolicy",_s(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR=6;class qR{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??WR,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e,t,r,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jv(this),this.idTokenSubscription=new jv(this),this.beforeStateQueue=new BR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ls(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ha.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Lh(this,{idToken:e}),r=await hr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Pn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,c=r?._redirectEventId,d=await this.tryRedirectSignIn(e);(!a||a===c)&&d?.user&&(r=d.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Mh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=SR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Pn(this.app))return Promise.reject(cs(this));const t=e?Tt(e):null;return t&&Ae(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Pn(this.app)?Promise.reject(cs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Pn(this.app)?Promise.reject(cs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ls(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await zR(this),t=new qR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new gu("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await jR(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ls(e)||this._popupRedirectResolver;Ae(t,this,"argument-error"),this.redirectPersistenceManager=await ha.create(this,[ls(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(d,this,"internal-error"),d.then(()=>{c||a(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,r,o);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=CE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Pn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&wR(`Error while retrieving App Check token: ${e.error}`),e?.token}}function vs(n){return Tt(n)}class jv{constructor(e){this.auth=e,this.observer=null,this.addObserver=lC(t=>this.observer=t)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function KR(n){hd=n}function RE(n){return hd.loadJS(n)}function GR(){return hd.recaptchaEnterpriseScript}function QR(){return hd.gapiScript}function XR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class JR{constructor(){this.enterprise=new YR}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class YR{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const ZR="recaptcha-enterprise",kE="NO_RECAPTCHA";class ek{constructor(e){this.type=ZR,this.auth=vs(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,d)=>{PR(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const g=new bR(p);return a.tenantId==null?a._agentRecaptchaConfig=g:a._tenantRecaptchaConfigs[a.tenantId]=g,c(g.siteKey)}}).catch(p=>{d(p)})})}function o(a,c,d){const p=window.grecaptcha;Ov(p)?p.enterprise.ready(()=>{p.enterprise.execute(a,{action:e}).then(g=>{c(g)}).catch(()=>{c(kE)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new JR().execute("siteKey",{action:"verify"}):new Promise((a,c)=>{r(this.auth).then(d=>{if(!t&&Ov(window.grecaptcha))o(d,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=GR();p.length!==0&&(p+=d),RE(p).then(()=>{o(d,a,c)}).catch(g=>{c(g)})}}).catch(d=>{c(d)})})}}async function Uv(n,e,t,r=!1,o=!1){const a=new ek(n);let c;if(o)c=kE;else try{c=await a.verify(t)}catch{c=await a.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,g=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Vh(n,e,t,r,o){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Uv(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Uv(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(n,e){const t=$m(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(Xi(a,e??{}))return o;Gn(o,"already-initialized")}return t.initialize({options:e})}function nk(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ls);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function rk(n,e,t){const r=vs(n);Ae(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,a=bE(e),{host:c,port:d}=sk(e),p=d===null?"":`:${d}`,g={url:`${a}//${c}${p}/`},v=Object.freeze({host:c,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Ae(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ae(Xi(g,r.config.emulator)&&Xi(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,Aa(c)?(sE(`${a}//${c}${p}`),iE("Auth",!0)):ik()}function bE(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function sk(n){const e=bE(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const a=o[1];return{host:a,port:$v(r.substr(a.length+1))}}else{const[a,c]=r.split(":");return{host:a,port:$v(c)}}}function $v(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function ik(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return as("not implemented")}_getIdTokenResponse(e){return as("not implemented")}_linkToIdToken(e,t){return as("not implemented")}_getReauthenticationResolver(e){return as("not implemented")}}async function ok(n,e){return Vr(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ak(n,e){return vu(n,"POST","/v1/accounts:signInWithPassword",_s(n,e))}async function lk(n,e){return Vr(n,"POST","/v1/accounts:sendOobCode",_s(n,e))}async function uk(n,e){return lk(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ck(n,e){return vu(n,"POST","/v1/accounts:signInWithEmailLink",_s(n,e))}async function hk(n,e){return vu(n,"POST","/v1/accounts:signInWithEmailLink",_s(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu extends Km{constructor(e,t,r,o=null){super("password",r),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new iu(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new iu(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vh(e,t,"signInWithPassword",ak);case"emailLink":return ck(e,{email:this._email,oobCode:this._password});default:Gn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vh(e,r,"signUpPassword",ok);case"emailLink":return hk(e,{idToken:t,email:this._email,oobCode:this._password});default:Gn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function da(n,e){return vu(n,"POST","/v1/accounts:signInWithIdp",_s(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk="http://localhost";class Yi extends Km{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Yi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Gn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...a}=t;if(!r||!o)return null;const c=new Yi(r,o);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return da(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,da(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,da(e,t)}buildRequest(){const e={requestUri:dk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=yu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fk(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function pk(n){const e=Nl(Dl(n)).link,t=e?Nl(Dl(e)).deep_link_id:null,r=Nl(Dl(n)).deep_link_id;return(r?Nl(Dl(r)).link:null)||r||t||e||n}class Gm{constructor(e){const t=Nl(Dl(e)),r=t.apiKey??null,o=t.oobCode??null,a=fk(t.mode??null);Ae(r&&o&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=pk(e);try{return new Gm(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(){this.providerId=Ca.PROVIDER_ID}static credential(e,t){return iu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Gm.parseLink(t);return Ae(r,"argument-error"),iu._fromEmailAndCode(e,r.code,r.tenantId)}}Ca.PROVIDER_ID="password";Ca.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ca.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu extends Qm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs extends wu{constructor(){super("facebook.com")}static credential(e){return Yi._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gs.credentialFromTaggedObject(e)}static credentialFromError(e){return Gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gs.credential(e.oauthAccessToken)}catch{return null}}}Gs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends wu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Yi._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return os.credential(t,r)}catch{return null}}}os.GOOGLE_SIGN_IN_METHOD="google.com";os.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs extends wu{constructor(){super("github.com")}static credential(e){return Yi._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qs.credentialFromTaggedObject(e)}static credentialFromError(e){return Qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qs.credential(e.oauthAccessToken)}catch{return null}}}Qs.GITHUB_SIGN_IN_METHOD="github.com";Qs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs extends wu{constructor(){super("twitter.com")}static credential(e,t){return Yi._fromParams({providerId:Xs.PROVIDER_ID,signInMethod:Xs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Xs.credentialFromTaggedObject(e)}static credentialFromError(e){return Xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Xs.credential(t,r)}catch{return null}}}Xs.TWITTER_SIGN_IN_METHOD="twitter.com";Xs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mk(n,e){return vu(n,"POST","/v1/accounts:signUp",_s(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,o=!1){const a=await hr._fromIdTokenResponse(e,r,o),c=Bv(r);return new Zi({user:a,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const o=Bv(r);return new Zi({user:e,providerId:o,_tokenResponse:r,operationType:t})}}function Bv(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh extends ys{constructor(e,t,r,o){super(t.code,t.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,Fh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,o){return new Fh(e,t,r,o)}}function PE(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Fh._fromErrorAndOperation(n,a,e,r):a})}async function gk(n,e,t=!1){const r=await ga(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Zi._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yk(n,e,t=!1){const{auth:r}=n;if(Pn(r.app))return Promise.reject(cs(r));const o="reauthenticate";try{const a=await ga(n,PE(r,o,e,n),t);Ae(a.idToken,r,"internal-error");const c=qm(a.idToken);Ae(c,r,"internal-error");const{sub:d}=c;return Ae(n.uid===d,r,"user-mismatch"),Zi._forOperation(n,o,a)}catch(a){throw a?.code==="auth/user-not-found"&&Gn(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NE(n,e,t=!1){if(Pn(n.app))return Promise.reject(cs(n));const r="signIn",o=await PE(n,r,e),a=await Zi._fromIdTokenResponse(n,r,o);return t||await n._updateCurrentUser(a.user),a}async function _k(n,e){return NE(vs(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DE(n){const e=vs(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function vk(n,e,t){const r=vs(n);await Vh(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",uk)}async function wk(n,e,t){if(Pn(n.app))return Promise.reject(cs(n));const r=vs(n),c=await Vh(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",mk).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&DE(n),p}),d=await Zi._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(d.user),d}function Ek(n,e,t){return Pn(n.app)?Promise.reject(cs(n)):_k(Tt(n),Ca.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&DE(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ik(n,e){return Vr(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tk(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Tt(n),a={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await ga(r,Ik(r.auth,a));r.displayName=c.displayName||null,r.photoURL=c.photoUrl||null;const d=r.providerData.find(({providerId:p})=>p==="password");d&&(d.displayName=r.displayName,d.photoURL=r.photoURL),await r._updateTokensIfNecessary(c)}function Sk(n,e,t,r){return Tt(n).onIdTokenChanged(e,t,r)}function Ak(n,e,t){return Tt(n).beforeAuthStateChanged(e,t)}function xk(n,e,t,r){return Tt(n).onAuthStateChanged(e,t,r)}function Ck(n){return Tt(n).signOut()}const jh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(jh,"1"),this.storage.removeItem(jh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk=1e3,kk=10;class LE extends OE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=xE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),o=this.localCache[t];r!==o&&e(t,o,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const r=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},a=this.storage.getItem(r);$R()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,kk):o()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},Rk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}LE.type="LOCAL";const bk=LE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME extends OE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ME.type="SESSION";const VE=ME;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const r=new dd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:o,data:a}=t.data,c=this.handlersMap[o];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const d=Array.from(c).map(async g=>g(t.origin,a)),p=await Pk(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}dd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,c;return new Promise((d,p)=>{const g=Xm("",20);o.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},r);c={messageChannel:o,onMessage(E){const T=E;if(T.data.eventId===g)switch(T.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(T.data.response);break;default:clearTimeout(v),clearTimeout(a),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(){return window}function Dk(n){kr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(){return typeof kr().WorkerGlobalScope<"u"&&typeof kr().importScripts=="function"}async function Ok(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Lk(){return navigator?.serviceWorker?.controller||null}function Mk(){return FE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE="firebaseLocalStorageDb",Vk=1,Uh="firebaseLocalStorage",UE="fbase_key";class Eu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function fd(n,e){return n.transaction([Uh],e?"readwrite":"readonly").objectStore(Uh)}function Fk(){const n=indexedDB.deleteDatabase(jE);return new Eu(n).toPromise()}function Yp(){const n=indexedDB.open(jE,Vk);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Uh,{keyPath:UE})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Uh)?e(r):(r.close(),await Fk(),e(await Yp()))})})}async function zv(n,e,t){const r=fd(n,!0).put({[UE]:e,value:t});return new Eu(r).toPromise()}async function jk(n,e){const t=fd(n,!1).get(e),r=await new Eu(t).toPromise();return r===void 0?null:r.value}function Wv(n,e){const t=fd(n,!0).delete(e);return new Eu(t).toPromise()}const Uk=800,$k=3;class $E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Yp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>$k)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return FE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=dd._getInstance(Mk()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Ok(),!this.activeServiceWorker)return;this.sender=new Nk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Lk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yp();return await zv(e,jh,"1"),await Wv(e,jh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>zv(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>jk(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Wv(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=fd(o,!1).getAll();return new Eu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Uk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$E.type="LOCAL";const Bk=$E;new _u(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BE(n,e){return e?ls(e):(Ae(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm extends Km{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return da(e,this._buildIdpRequest())}_linkToIdToken(e,t){return da(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return da(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function zk(n){return NE(n.auth,new Jm(n),n.bypassAuthState)}function Wk(n){const{auth:e,user:t}=n;return Ae(t,e,"internal-error"),yk(t,new Jm(n),n.bypassAuthState)}async function qk(n){const{auth:e,user:t}=n;return Ae(t,e,"internal-error"),gk(t,new Jm(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e,t,r,o,a=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:o,tenantId:a,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zk;case"linkViaPopup":case"linkViaRedirect":return qk;case"reauthViaPopup":case"reauthViaRedirect":return Wk;default:Gn(this.auth,"internal-error")}}resolve(e){fs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk=new _u(2e3,1e4);async function Kk(n,e,t){if(Pn(n.app))return Promise.reject(dr(n,"operation-not-supported-in-this-environment"));const r=vs(n);ER(n,e,Qm);const o=BE(r,t);return new Wi(r,"signInViaPopup",e,o).executeNotNull()}class Wi extends zE{constructor(e,t,r,o,a){super(e,t,o,a),this.provider=r,this.authWindow=null,this.pollId=null,Wi.currentPopupAction&&Wi.currentPopupAction.cancel(),Wi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ae(e,this.auth,"internal-error"),e}async onExecution(){fs(this.filter.length===1,"Popup operations only handle one event");const e=Xm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(dr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(dr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wi.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(dr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Hk.get())};e()}}Wi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk="pendingRedirect",fh=new Map;class Qk extends zE{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=fh.get(this.auth._key());if(!e){try{const r=await Xk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}fh.set(this.auth._key(),e)}return this.bypassAuthState||fh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Xk(n,e){const t=Zk(e),r=Yk(n);if(!await r._isAvailable())return!1;const o=await r._get(t)==="true";return await r._remove(t),o}function Jk(n,e){fh.set(n._key(),e)}function Yk(n){return ls(n._redirectPersistence)}function Zk(n){return dh(Gk,n.config.apiKey,n.name)}async function eb(n,e,t=!1){if(Pn(n.app))return Promise.reject(cs(n));const r=vs(n),o=BE(r,e),c=await new Qk(r,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb=600*1e3;class nb{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rb(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!WE(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(dr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tb&&this.cachedEventUids.clear(),this.cachedEventUids.has(qv(e))}saveEventToCache(e){this.cachedEventUids.add(qv(e)),this.lastProcessedEventTime=Date.now()}}function qv(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function WE({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function rb(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return WE(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sb(n,e={}){return Vr(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ob=/^https?/;async function ab(n){if(n.config.emulator)return;const{authorizedDomains:e}=await sb(n);for(const t of e)try{if(lb(t))return}catch{}Gn(n,"unauthorized-domain")}function lb(n){const e=Xp(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!ob.test(t))return!1;if(ib.test(n))return r===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub=new _u(3e4,6e4);function Hv(){const n=kr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function cb(n){return new Promise((e,t)=>{function r(){Hv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Hv(),t(dr(n,"network-request-failed"))},timeout:ub.get()})}if(kr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(kr().gapi?.load)r();else{const o=XR("iframefcb");return kr()[o]=()=>{gapi.load?r():t(dr(n,"network-request-failed"))},RE(`${QR()}?onload=${o}`).catch(a=>t(a))}}).catch(e=>{throw ph=null,e})}let ph=null;function hb(n){return ph=ph||cb(n),ph}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db=new _u(5e3,15e3),fb="__/auth/iframe",pb="emulator/auth/iframe",mb={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gb=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yb(n){const e=n.config;Ae(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Wm(e,pb):`https://${n.config.authDomain}/${fb}`,r={apiKey:e.apiKey,appName:n.name,v:xa},o=gb.get(n.config.apiHost);o&&(r.eid=o);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${yu(r).slice(1)}`}async function _b(n){const e=await hb(n),t=kr().gapi;return Ae(t,n,"internal-error"),e.open({where:document.body,url:yb(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mb,dontclear:!0},r=>new Promise(async(o,a)=>{await r.restyle({setHideOnLeave:!1});const c=dr(n,"network-request-failed"),d=kr().setTimeout(()=>{a(c)},db.get());function p(){kr().clearTimeout(d),o(r)}r.ping(p).then(p,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wb=500,Eb=600,Ib="_blank",Tb="http://localhost";class Kv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Sb(n,e,t,r=wb,o=Eb){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const p={...vb,width:r.toString(),height:o.toString(),top:a,left:c},g=rn().toLowerCase();t&&(d=EE(g)?Ib:t),vE(g)&&(e=e||Tb,p.scrollbars="yes");const v=Object.entries(p).reduce((T,[x,M])=>`${T}${x}=${M},`,"");if(UR(g)&&d!=="_self")return Ab(e||"",d),new Kv(null);const E=window.open(e||"",d,v);Ae(E,n,"popup-blocked");try{E.focus()}catch{}return new Kv(E)}function Ab(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb="__/auth/handler",Cb="emulator/auth/handler",Rb=encodeURIComponent("fac");async function Gv(n,e,t,r,o,a){Ae(n.config.authDomain,n,"auth-domain-config-required"),Ae(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:xa,eventId:o};if(e instanceof Qm){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",aC(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))c[v]=E}if(e instanceof wu){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const p=await n._getAppCheckToken(),g=p?`#${Rb}=${encodeURIComponent(p)}`:"";return`${kb(n)}?${yu(d).slice(1)}${g}`}function kb({config:n}){return n.emulator?Wm(n,Cb):`https://${n.authDomain}/${xb}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cp="webStorageSupport";class bb{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=VE,this._completeRedirectFn=eb,this._overrideRedirectResult=Jk}async _openPopup(e,t,r,o){fs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await Gv(e,t,r,Xp(),o);return Sb(e,a,Xm())}async _openRedirect(e,t,r,o){await this._originValidation(e);const a=await Gv(e,t,r,Xp(),o);return Dk(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(fs(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await _b(e),r=new nb(e);return t.register("authEvent",o=>(Ae(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Cp,{type:Cp},o=>{const a=o?.[0]?.[Cp];a!==void 0&&t(!!a),Gn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ab(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return xE()||wE()||Hm()}}const Pb=bb;var Qv="@firebase/auth",Xv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ob(n){ma(new Ji("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;Ae(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:CE(n)},g=new HR(r,o,a,p);return nk(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ma(new Ji("auth-internal",e=>{const t=vs(e.getProvider("auth").getImmediate());return(r=>new Nb(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ei(Qv,Xv,Db(n)),ei(Qv,Xv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb=300,Mb=rE("authIdTokenMaxAge")||Lb;let Jv=null;const Vb=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Mb)return;const o=t?.token;Jv!==o&&(Jv=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Fb(n=uE()){const e=$m(n,"auth");if(e.isInitialized())return e.getImmediate();const t=tk(n,{popupRedirectResolver:Pb,persistence:[Bk,bk,VE]}),r=rE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const c=Vb(a.toString());Ak(t,c,()=>c(t.currentUser)),Sk(t,d=>c(d))}}const o=tE("auth");return o&&rk(t,`http://${o}`),t}function jb(){return document.getElementsByTagName("head")?.[0]??document}KR({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=o=>{const a=dr("internal-error");a.customData=o,t(a)},r.type="text/javascript",r.charset="UTF-8",jb().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ob("Browser");var Ub="firebase",$b="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ei(Ub,$b,"app");var Yv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ti,qE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,A){function R(){}R.prototype=A.prototype,b.D=A.prototype,b.prototype=new R,b.prototype.constructor=b,b.C=function(P,N,U){for(var C=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)C[Re-2]=arguments[Re];return A.prototype[N].apply(P,C)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(b,A,R){R||(R=0);var P=Array(16);if(typeof A=="string")for(var N=0;16>N;++N)P[N]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(N=0;16>N;++N)P[N]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=b.g[0],R=b.g[1],N=b.g[2];var U=b.g[3],C=A+(U^R&(N^U))+P[0]+3614090360&4294967295;A=R+(C<<7&4294967295|C>>>25),C=U+(N^A&(R^N))+P[1]+3905402710&4294967295,U=A+(C<<12&4294967295|C>>>20),C=N+(R^U&(A^R))+P[2]+606105819&4294967295,N=U+(C<<17&4294967295|C>>>15),C=R+(A^N&(U^A))+P[3]+3250441966&4294967295,R=N+(C<<22&4294967295|C>>>10),C=A+(U^R&(N^U))+P[4]+4118548399&4294967295,A=R+(C<<7&4294967295|C>>>25),C=U+(N^A&(R^N))+P[5]+1200080426&4294967295,U=A+(C<<12&4294967295|C>>>20),C=N+(R^U&(A^R))+P[6]+2821735955&4294967295,N=U+(C<<17&4294967295|C>>>15),C=R+(A^N&(U^A))+P[7]+4249261313&4294967295,R=N+(C<<22&4294967295|C>>>10),C=A+(U^R&(N^U))+P[8]+1770035416&4294967295,A=R+(C<<7&4294967295|C>>>25),C=U+(N^A&(R^N))+P[9]+2336552879&4294967295,U=A+(C<<12&4294967295|C>>>20),C=N+(R^U&(A^R))+P[10]+4294925233&4294967295,N=U+(C<<17&4294967295|C>>>15),C=R+(A^N&(U^A))+P[11]+2304563134&4294967295,R=N+(C<<22&4294967295|C>>>10),C=A+(U^R&(N^U))+P[12]+1804603682&4294967295,A=R+(C<<7&4294967295|C>>>25),C=U+(N^A&(R^N))+P[13]+4254626195&4294967295,U=A+(C<<12&4294967295|C>>>20),C=N+(R^U&(A^R))+P[14]+2792965006&4294967295,N=U+(C<<17&4294967295|C>>>15),C=R+(A^N&(U^A))+P[15]+1236535329&4294967295,R=N+(C<<22&4294967295|C>>>10),C=A+(N^U&(R^N))+P[1]+4129170786&4294967295,A=R+(C<<5&4294967295|C>>>27),C=U+(R^N&(A^R))+P[6]+3225465664&4294967295,U=A+(C<<9&4294967295|C>>>23),C=N+(A^R&(U^A))+P[11]+643717713&4294967295,N=U+(C<<14&4294967295|C>>>18),C=R+(U^A&(N^U))+P[0]+3921069994&4294967295,R=N+(C<<20&4294967295|C>>>12),C=A+(N^U&(R^N))+P[5]+3593408605&4294967295,A=R+(C<<5&4294967295|C>>>27),C=U+(R^N&(A^R))+P[10]+38016083&4294967295,U=A+(C<<9&4294967295|C>>>23),C=N+(A^R&(U^A))+P[15]+3634488961&4294967295,N=U+(C<<14&4294967295|C>>>18),C=R+(U^A&(N^U))+P[4]+3889429448&4294967295,R=N+(C<<20&4294967295|C>>>12),C=A+(N^U&(R^N))+P[9]+568446438&4294967295,A=R+(C<<5&4294967295|C>>>27),C=U+(R^N&(A^R))+P[14]+3275163606&4294967295,U=A+(C<<9&4294967295|C>>>23),C=N+(A^R&(U^A))+P[3]+4107603335&4294967295,N=U+(C<<14&4294967295|C>>>18),C=R+(U^A&(N^U))+P[8]+1163531501&4294967295,R=N+(C<<20&4294967295|C>>>12),C=A+(N^U&(R^N))+P[13]+2850285829&4294967295,A=R+(C<<5&4294967295|C>>>27),C=U+(R^N&(A^R))+P[2]+4243563512&4294967295,U=A+(C<<9&4294967295|C>>>23),C=N+(A^R&(U^A))+P[7]+1735328473&4294967295,N=U+(C<<14&4294967295|C>>>18),C=R+(U^A&(N^U))+P[12]+2368359562&4294967295,R=N+(C<<20&4294967295|C>>>12),C=A+(R^N^U)+P[5]+4294588738&4294967295,A=R+(C<<4&4294967295|C>>>28),C=U+(A^R^N)+P[8]+2272392833&4294967295,U=A+(C<<11&4294967295|C>>>21),C=N+(U^A^R)+P[11]+1839030562&4294967295,N=U+(C<<16&4294967295|C>>>16),C=R+(N^U^A)+P[14]+4259657740&4294967295,R=N+(C<<23&4294967295|C>>>9),C=A+(R^N^U)+P[1]+2763975236&4294967295,A=R+(C<<4&4294967295|C>>>28),C=U+(A^R^N)+P[4]+1272893353&4294967295,U=A+(C<<11&4294967295|C>>>21),C=N+(U^A^R)+P[7]+4139469664&4294967295,N=U+(C<<16&4294967295|C>>>16),C=R+(N^U^A)+P[10]+3200236656&4294967295,R=N+(C<<23&4294967295|C>>>9),C=A+(R^N^U)+P[13]+681279174&4294967295,A=R+(C<<4&4294967295|C>>>28),C=U+(A^R^N)+P[0]+3936430074&4294967295,U=A+(C<<11&4294967295|C>>>21),C=N+(U^A^R)+P[3]+3572445317&4294967295,N=U+(C<<16&4294967295|C>>>16),C=R+(N^U^A)+P[6]+76029189&4294967295,R=N+(C<<23&4294967295|C>>>9),C=A+(R^N^U)+P[9]+3654602809&4294967295,A=R+(C<<4&4294967295|C>>>28),C=U+(A^R^N)+P[12]+3873151461&4294967295,U=A+(C<<11&4294967295|C>>>21),C=N+(U^A^R)+P[15]+530742520&4294967295,N=U+(C<<16&4294967295|C>>>16),C=R+(N^U^A)+P[2]+3299628645&4294967295,R=N+(C<<23&4294967295|C>>>9),C=A+(N^(R|~U))+P[0]+4096336452&4294967295,A=R+(C<<6&4294967295|C>>>26),C=U+(R^(A|~N))+P[7]+1126891415&4294967295,U=A+(C<<10&4294967295|C>>>22),C=N+(A^(U|~R))+P[14]+2878612391&4294967295,N=U+(C<<15&4294967295|C>>>17),C=R+(U^(N|~A))+P[5]+4237533241&4294967295,R=N+(C<<21&4294967295|C>>>11),C=A+(N^(R|~U))+P[12]+1700485571&4294967295,A=R+(C<<6&4294967295|C>>>26),C=U+(R^(A|~N))+P[3]+2399980690&4294967295,U=A+(C<<10&4294967295|C>>>22),C=N+(A^(U|~R))+P[10]+4293915773&4294967295,N=U+(C<<15&4294967295|C>>>17),C=R+(U^(N|~A))+P[1]+2240044497&4294967295,R=N+(C<<21&4294967295|C>>>11),C=A+(N^(R|~U))+P[8]+1873313359&4294967295,A=R+(C<<6&4294967295|C>>>26),C=U+(R^(A|~N))+P[15]+4264355552&4294967295,U=A+(C<<10&4294967295|C>>>22),C=N+(A^(U|~R))+P[6]+2734768916&4294967295,N=U+(C<<15&4294967295|C>>>17),C=R+(U^(N|~A))+P[13]+1309151649&4294967295,R=N+(C<<21&4294967295|C>>>11),C=A+(N^(R|~U))+P[4]+4149444226&4294967295,A=R+(C<<6&4294967295|C>>>26),C=U+(R^(A|~N))+P[11]+3174756917&4294967295,U=A+(C<<10&4294967295|C>>>22),C=N+(A^(U|~R))+P[2]+718787259&4294967295,N=U+(C<<15&4294967295|C>>>17),C=R+(U^(N|~A))+P[9]+3951481745&4294967295,b.g[0]=b.g[0]+A&4294967295,b.g[1]=b.g[1]+(N+(C<<21&4294967295|C>>>11))&4294967295,b.g[2]=b.g[2]+N&4294967295,b.g[3]=b.g[3]+U&4294967295}r.prototype.u=function(b,A){A===void 0&&(A=b.length);for(var R=A-this.blockSize,P=this.B,N=this.h,U=0;U<A;){if(N==0)for(;U<=R;)o(this,b,U),U+=this.blockSize;if(typeof b=="string"){for(;U<A;)if(P[N++]=b.charCodeAt(U++),N==this.blockSize){o(this,P),N=0;break}}else for(;U<A;)if(P[N++]=b[U++],N==this.blockSize){o(this,P),N=0;break}}this.h=N,this.o+=A},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var A=1;A<b.length-8;++A)b[A]=0;var R=8*this.o;for(A=b.length-8;A<b.length;++A)b[A]=R&255,R/=256;for(this.u(b),b=Array(16),A=R=0;4>A;++A)for(var P=0;32>P;P+=8)b[R++]=this.g[A]>>>P&255;return b};function a(b,A){var R=d;return Object.prototype.hasOwnProperty.call(R,b)?R[b]:R[b]=A(b)}function c(b,A){this.h=A;for(var R=[],P=!0,N=b.length-1;0<=N;N--){var U=b[N]|0;P&&U==A||(R[N]=U,P=!1)}this.g=R}var d={};function p(b){return-128<=b&&128>b?a(b,function(A){return new c([A|0],0>A?-1:0)}):new c([b|0],0>b?-1:0)}function g(b){if(isNaN(b)||!isFinite(b))return E;if(0>b)return V(g(-b));for(var A=[],R=1,P=0;b>=R;P++)A[P]=b/R|0,R*=4294967296;return new c(A,0)}function v(b,A){if(b.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(b.charAt(0)=="-")return V(v(b.substring(1),A));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=g(Math.pow(A,8)),P=E,N=0;N<b.length;N+=8){var U=Math.min(8,b.length-N),C=parseInt(b.substring(N,N+U),A);8>U?(U=g(Math.pow(A,U)),P=P.j(U).add(g(C))):(P=P.j(R),P=P.add(g(C)))}return P}var E=p(0),T=p(1),x=p(16777216);n=c.prototype,n.m=function(){if(j(this))return-V(this).m();for(var b=0,A=1,R=0;R<this.g.length;R++){var P=this.i(R);b+=(0<=P?P:4294967296+P)*A,A*=4294967296}return b},n.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(M(this))return"0";if(j(this))return"-"+V(this).toString(b);for(var A=g(Math.pow(b,6)),R=this,P="";;){var N=re(R,A).g;R=H(R,N.j(A));var U=((0<R.g.length?R.g[0]:R.h)>>>0).toString(b);if(R=N,M(R))return U+P;for(;6>U.length;)U="0"+U;P=U+P}},n.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function M(b){if(b.h!=0)return!1;for(var A=0;A<b.g.length;A++)if(b.g[A]!=0)return!1;return!0}function j(b){return b.h==-1}n.l=function(b){return b=H(this,b),j(b)?-1:M(b)?0:1};function V(b){for(var A=b.g.length,R=[],P=0;P<A;P++)R[P]=~b.g[P];return new c(R,~b.h).add(T)}n.abs=function(){return j(this)?V(this):this},n.add=function(b){for(var A=Math.max(this.g.length,b.g.length),R=[],P=0,N=0;N<=A;N++){var U=P+(this.i(N)&65535)+(b.i(N)&65535),C=(U>>>16)+(this.i(N)>>>16)+(b.i(N)>>>16);P=C>>>16,U&=65535,C&=65535,R[N]=C<<16|U}return new c(R,R[R.length-1]&-2147483648?-1:0)};function H(b,A){return b.add(V(A))}n.j=function(b){if(M(this)||M(b))return E;if(j(this))return j(b)?V(this).j(V(b)):V(V(this).j(b));if(j(b))return V(this.j(V(b)));if(0>this.l(x)&&0>b.l(x))return g(this.m()*b.m());for(var A=this.g.length+b.g.length,R=[],P=0;P<2*A;P++)R[P]=0;for(P=0;P<this.g.length;P++)for(var N=0;N<b.g.length;N++){var U=this.i(P)>>>16,C=this.i(P)&65535,Re=b.i(N)>>>16,De=b.i(N)&65535;R[2*P+2*N]+=C*De,F(R,2*P+2*N),R[2*P+2*N+1]+=U*De,F(R,2*P+2*N+1),R[2*P+2*N+1]+=C*Re,F(R,2*P+2*N+1),R[2*P+2*N+2]+=U*Re,F(R,2*P+2*N+2)}for(P=0;P<A;P++)R[P]=R[2*P+1]<<16|R[2*P];for(P=A;P<2*A;P++)R[P]=0;return new c(R,0)};function F(b,A){for(;(b[A]&65535)!=b[A];)b[A+1]+=b[A]>>>16,b[A]&=65535,A++}function X(b,A){this.g=b,this.h=A}function re(b,A){if(M(A))throw Error("division by zero");if(M(b))return new X(E,E);if(j(b))return A=re(V(b),A),new X(V(A.g),V(A.h));if(j(A))return A=re(b,V(A)),new X(V(A.g),A.h);if(30<b.g.length){if(j(b)||j(A))throw Error("slowDivide_ only works with positive integers.");for(var R=T,P=A;0>=P.l(b);)R=_e(R),P=_e(P);var N=ge(R,1),U=ge(P,1);for(P=ge(P,2),R=ge(R,2);!M(P);){var C=U.add(P);0>=C.l(b)&&(N=N.add(R),U=C),P=ge(P,1),R=ge(R,1)}return A=H(b,N.j(A)),new X(N,A)}for(N=E;0<=b.l(A);){for(R=Math.max(1,Math.floor(b.m()/A.m())),P=Math.ceil(Math.log(R)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),U=g(R),C=U.j(A);j(C)||0<C.l(b);)R-=P,U=g(R),C=U.j(A);M(U)&&(U=T),N=N.add(U),b=H(b,C)}return new X(N,b)}n.A=function(b){return re(this,b).h},n.and=function(b){for(var A=Math.max(this.g.length,b.g.length),R=[],P=0;P<A;P++)R[P]=this.i(P)&b.i(P);return new c(R,this.h&b.h)},n.or=function(b){for(var A=Math.max(this.g.length,b.g.length),R=[],P=0;P<A;P++)R[P]=this.i(P)|b.i(P);return new c(R,this.h|b.h)},n.xor=function(b){for(var A=Math.max(this.g.length,b.g.length),R=[],P=0;P<A;P++)R[P]=this.i(P)^b.i(P);return new c(R,this.h^b.h)};function _e(b){for(var A=b.g.length+1,R=[],P=0;P<A;P++)R[P]=b.i(P)<<1|b.i(P-1)>>>31;return new c(R,b.h)}function ge(b,A){var R=A>>5;A%=32;for(var P=b.g.length-R,N=[],U=0;U<P;U++)N[U]=0<A?b.i(U+R)>>>A|b.i(U+R+1)<<32-A:b.i(U+R);return new c(N,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,qE=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=v,ti=c}).apply(typeof Yv<"u"?Yv:typeof self<"u"?self:typeof window<"u"?window:{});var Jc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var HE,Ol,KE,mh,Zp,GE,QE,XE;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,_){return u==Array.prototype||u==Object.prototype||(u[m]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jc=="object"&&Jc];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=t(this);function o(u,m){if(m)e:{var _=r;u=u.split(".");for(var S=0;S<u.length-1;S++){var $=u[S];if(!($ in _))break e;_=_[$]}u=u[u.length-1],S=_[u],m=m(S),m!=S&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}function a(u,m){u instanceof String&&(u+="");var _=0,S=!1,$={next:function(){if(!S&&_<u.length){var G=_++;return{value:m(G,u[G]),done:!1}}return S=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}o("Array.prototype.values",function(u){return u||function(){return a(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function g(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function v(u,m,_){return u.call.apply(u.bind,arguments)}function E(u,m,_){if(!u)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,S),u.apply(m,$)}}return function(){return u.apply(m,arguments)}}function T(u,m,_){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:E,T.apply(null,arguments)}function x(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var S=_.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function M(u,m){function _(){}_.prototype=m.prototype,u.aa=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(S,$,G){for(var ae=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)ae[Xe-2]=arguments[Xe];return m.prototype[$].apply(S,ae)}}function j(u){const m=u.length;if(0<m){const _=Array(m);for(let S=0;S<m;S++)_[S]=u[S];return _}return[]}function V(u,m){for(let _=1;_<arguments.length;_++){const S=arguments[_];if(p(S)){const $=u.length||0,G=S.length||0;u.length=$+G;for(let ae=0;ae<G;ae++)u[$+ae]=S[ae]}else u.push(S)}}class H{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function F(u){return/^[\s\xa0]*$/.test(u)}function X(){var u=d.navigator;return u&&(u=u.userAgent)?u:""}function re(u){return re[" "](u),u}re[" "]=function(){};var _e=X().indexOf("Gecko")!=-1&&!(X().toLowerCase().indexOf("webkit")!=-1&&X().indexOf("Edge")==-1)&&!(X().indexOf("Trident")!=-1||X().indexOf("MSIE")!=-1)&&X().indexOf("Edge")==-1;function ge(u,m,_){for(const S in u)m.call(_,u[S],S,u)}function b(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function A(u){const m={};for(const _ in u)m[_]=u[_];return m}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(u,m){let _,S;for(let $=1;$<arguments.length;$++){S=arguments[$];for(_ in S)u[_]=S[_];for(let G=0;G<R.length;G++)_=R[G],Object.prototype.hasOwnProperty.call(S,_)&&(u[_]=S[_])}}function N(u){var m=1;u=u.split(":");const _=[];for(;0<m&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function U(u){d.setTimeout(()=>{throw u},0)}function C(){var u=Y;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Re{constructor(){this.h=this.g=null}add(m,_){const S=De.get();S.set(m,_),this.h?this.h.next=S:this.g=S,this.h=S}}var De=new H(()=>new rt,u=>u.reset());class rt{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Ge,le=!1,Y=new Re,ie=()=>{const u=d.Promise.resolve(void 0);Ge=()=>{u.then(O)}};var O=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(_){U(_)}var m=De;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}le=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ue(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}ue.prototype.h=function(){this.defaultPrevented=!0};var Ee=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};d.addEventListener("test",_,m),d.removeEventListener("test",_,m)}catch{}return u})();function Oe(u,m){if(ue.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(_e){e:{try{re(m.nodeName);var $=!0;break e}catch{}$=!1}$||(m=null)}}else _=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement);this.relatedTarget=m,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ve[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Oe.aa.h.call(this)}}M(Oe,ue);var Ve={2:"touch",3:"pen",4:"mouse"};Oe.prototype.h=function(){Oe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var He="closure_listenable_"+(1e6*Math.random()|0),Ke=0;function Ze(u,m,_,S,$){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!S,this.ha=$,this.key=++Ke,this.da=this.fa=!1}function Dt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Fr(u){this.src=u,this.g={},this.h=0}Fr.prototype.add=function(u,m,_,S,$){var G=u.toString();u=this.g[G],u||(u=this.g[G]=[],this.h++);var ae=ws(u,m,S,$);return-1<ae?(m=u[ae],_||(m.fa=!1)):(m=new Ze(m,this.src,G,!!S,$),m.fa=_,u.push(m)),m};function oo(u,m){var _=m.type;if(_ in u.g){var S=u.g[_],$=Array.prototype.indexOf.call(S,m,void 0),G;(G=0<=$)&&Array.prototype.splice.call(S,$,1),G&&(Dt(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function ws(u,m,_,S){for(var $=0;$<u.length;++$){var G=u[$];if(!G.da&&G.listener==m&&G.capture==!!_&&G.ha==S)return $}return-1}var fi="closure_lm_"+(1e6*Math.random()|0),ao={};function Oa(u,m,_,S,$){if(Array.isArray(m)){for(var G=0;G<m.length;G++)Oa(u,m[G],_,S,$);return null}return _=Va(_),u&&u[He]?u.K(m,_,g(S)?!!S.capture:!1,$):La(u,m,_,!1,S,$)}function La(u,m,_,S,$,G){if(!m)throw Error("Invalid event type");var ae=g($)?!!$.capture:!!$,Xe=uo(u);if(Xe||(u[fi]=Xe=new Fr(u)),_=Xe.add(m,_,S,ae,G),_.proxy)return _;if(S=Du(),_.proxy=S,S.src=u,S.listener=_,u.addEventListener)Ee||($=ae),$===void 0&&($=!1),u.addEventListener(m.toString(),S,$);else if(u.attachEvent)u.attachEvent(Ur(m.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Du(){function u(_){return m.call(u.src,u.listener,_)}const m=Ma;return u}function lo(u,m,_,S,$){if(Array.isArray(m))for(var G=0;G<m.length;G++)lo(u,m[G],_,S,$);else S=g(S)?!!S.capture:!!S,_=Va(_),u&&u[He]?(u=u.i,m=String(m).toString(),m in u.g&&(G=u.g[m],_=ws(G,_,S,$),-1<_&&(Dt(G[_]),Array.prototype.splice.call(G,_,1),G.length==0&&(delete u.g[m],u.h--)))):u&&(u=uo(u))&&(m=u.g[m.toString()],u=-1,m&&(u=ws(m,_,S,$)),(_=-1<u?m[u]:null)&&jr(_))}function jr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[He])oo(m.i,u);else{var _=u.type,S=u.proxy;m.removeEventListener?m.removeEventListener(_,S,u.capture):m.detachEvent?m.detachEvent(Ur(_),S):m.addListener&&m.removeListener&&m.removeListener(S),(_=uo(m))?(oo(_,u),_.h==0&&(_.src=null,m[fi]=null)):Dt(u)}}}function Ur(u){return u in ao?ao[u]:ao[u]="on"+u}function Ma(u,m){if(u.da)u=!0;else{m=new Oe(m,this);var _=u.listener,S=u.ha||u.src;u.fa&&jr(u),u=_.call(S,m)}return u}function uo(u){return u=u[fi],u instanceof Fr?u:null}var co="__closure_events_fn_"+(1e9*Math.random()>>>0);function Va(u){return typeof u=="function"?u:(u[co]||(u[co]=function(m){return u.handleEvent(m)}),u[co])}function At(){Q.call(this),this.i=new Fr(this),this.M=this,this.F=null}M(At,Q),At.prototype[He]=!0,At.prototype.removeEventListener=function(u,m,_,S){lo(this,u,m,_,S)};function xt(u,m){var _,S=u.F;if(S)for(_=[];S;S=S.F)_.push(S);if(u=u.M,S=m.type||m,typeof m=="string")m=new ue(m,u);else if(m instanceof ue)m.target=m.target||u;else{var $=m;m=new ue(S,u),P(m,$)}if($=!0,_)for(var G=_.length-1;0<=G;G--){var ae=m.g=_[G];$=$r(ae,S,!0,m)&&$}if(ae=m.g=u,$=$r(ae,S,!0,m)&&$,$=$r(ae,S,!1,m)&&$,_)for(G=0;G<_.length;G++)ae=m.g=_[G],$=$r(ae,S,!1,m)&&$}At.prototype.N=function(){if(At.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var _=u.g[m],S=0;S<_.length;S++)Dt(_[S]);delete u.g[m],u.h--}}this.F=null},At.prototype.K=function(u,m,_,S){return this.i.add(String(u),m,!1,_,S)},At.prototype.L=function(u,m,_,S){return this.i.add(String(u),m,!0,_,S)};function $r(u,m,_,S){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var $=!0,G=0;G<m.length;++G){var ae=m[G];if(ae&&!ae.da&&ae.capture==_){var Xe=ae.listener,Ct=ae.ha||ae.src;ae.fa&&oo(u.i,ae),$=Xe.call(Ct,S)!==!1&&$}}return $&&!S.defaultPrevented}function Fa(u,m,_){if(typeof u=="function")_&&(u=T(u,_));else if(u&&typeof u.handleEvent=="function")u=T(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:d.setTimeout(u,m||0)}function Es(u){u.g=Fa(()=>{u.g=null,u.i&&(u.i=!1,Es(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class pi extends Q{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Es(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mi(u){Q.call(this),this.h=u,this.g={}}M(mi,Q);var ja=[];function Ua(u){ge(u.g,function(m,_){this.g.hasOwnProperty(_)&&jr(m)},u),u.g={}}mi.prototype.N=function(){mi.aa.N.call(this),Ua(this)},mi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $a=d.JSON.stringify,Ba=d.JSON.parse,za=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function gi(){}gi.prototype.h=null;function ho(u){return u.h||(u.h=u.i())}function fo(){}var Dn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function pr(){ue.call(this,"d")}M(pr,ue);function po(){ue.call(this,"c")}M(po,ue);var mr={},Wa=null;function yi(){return Wa=Wa||new At}mr.La="serverreachability";function qa(u){ue.call(this,mr.La,u)}M(qa,ue);function Br(u){const m=yi();xt(m,new qa(m))}mr.STAT_EVENT="statevent";function Ha(u,m){ue.call(this,mr.STAT_EVENT,u),this.stat=m}M(Ha,ue);function mt(u){const m=yi();xt(m,new Ha(m,u))}mr.Ma="timingevent";function mo(u,m){ue.call(this,mr.Ma,u),this.size=m}M(mo,ue);function Qn(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},m)}function _i(){this.g=!0}_i.prototype.xa=function(){this.g=!1};function vi(u,m,_,S,$,G){u.info(function(){if(u.g)if(G)for(var ae="",Xe=G.split("&"),Ct=0;Ct<Xe.length;Ct++){var Be=Xe[Ct].split("=");if(1<Be.length){var Ot=Be[0];Be=Be[1];var _t=Ot.split("_");ae=2<=_t.length&&_t[1]=="type"?ae+(Ot+"="+Be+"&"):ae+(Ot+"=redacted&")}}else ae=null;else ae=G;return"XMLHTTP REQ ("+S+") [attempt "+$+"]: "+m+`
`+_+`
`+ae})}function go(u,m,_,S,$,G,ae){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+$+"]: "+m+`
`+_+`
`+G+" "+ae})}function Xn(u,m,_,S){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+$d(u,_)+(S?" "+S:"")})}function Ka(u,m){u.info(function(){return"TIMEOUT: "+m})}_i.prototype.info=function(){};function $d(u,m){if(!u.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var S=_[u];if(!(2>S.length)){var $=S[1];if(Array.isArray($)&&!(1>$.length)){var G=$[0];if(G!="noop"&&G!="stop"&&G!="close")for(var ae=1;ae<$.length;ae++)$[ae]=""}}}}return $a(_)}catch{return m}}var yo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ou={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Jn;function wi(){}M(wi,gi),wi.prototype.g=function(){return new XMLHttpRequest},wi.prototype.i=function(){return{}},Jn=new wi;function Yn(u,m,_,S){this.j=u,this.i=m,this.l=_,this.R=S||1,this.U=new mi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Lu}function Lu(){this.i=null,this.g="",this.h=!1}var Ga={},_o={};function vo(u,m,_){u.L=1,u.v=xs(In(m)),u.m=_,u.P=!0,Qa(u,null)}function Qa(u,m){u.F=Date.now(),et(u),u.A=In(u.v);var _=u.A,S=u.R;Array.isArray(S)||(S=[String(S)]),Rs(_.i,"t",S),u.C=0,_=u.j.J,u.h=new Lu,u.g=Zu(u.j,_?m:null,!u.m),0<u.O&&(u.M=new pi(T(u.Y,u,u.g),u.O)),m=u.U,_=u.g,S=u.ca;var $="readystatechange";Array.isArray($)||($&&(ja[0]=$.toString()),$=ja);for(var G=0;G<$.length;G++){var ae=Oa(_,$[G],S||m.handleEvent,!1,m.h||m);if(!ae)break;m.g[ae.key]=ae}m=u.H?A(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),Br(),vi(u.i,u.u,u.A,u.l,u.R,u.m)}Yn.prototype.ca=function(u){u=u.target;const m=this.M;m&&hn(u)==3?m.j():this.Y(u)},Yn.prototype.Y=function(u){try{if(u==this.g)e:{const _t=hn(this.g);var m=this.g.Ba();const Mn=this.g.Z();if(!(3>_t)&&(_t!=3||this.g&&(this.h.h||this.g.oa()||tl(this.g)))){this.J||_t!=4||m==7||(m==8||0>=Mn?Br(3):Br(2)),Ei(this);var _=this.g.Z();this.X=_;t:if(Mu(this)){var S=tl(this.g);u="";var $=S.length,G=hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){On(this),Is(this);var ae="";break t}this.h.i=new d.TextDecoder}for(m=0;m<$;m++)this.h.h=!0,u+=this.h.i.decode(S[m],{stream:!(G&&m==$-1)});S.length=0,this.h.g+=u,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=_==200,go(this.i,this.u,this.A,this.l,this.R,_t,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Xe,Ct=this.g;if((Xe=Ct.g?Ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(Xe)){var Be=Xe;break t}}Be=null}if(_=Be)Xn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xa(this,_);else{this.o=!1,this.s=3,mt(12),On(this),Is(this);break e}}if(this.P){_=!0;let Sn;for(;!this.J&&this.C<ae.length;)if(Sn=Bd(this,ae),Sn==_o){_t==4&&(this.s=4,mt(14),_=!1),Xn(this.i,this.l,null,"[Incomplete Response]");break}else if(Sn==Ga){this.s=4,mt(15),Xn(this.i,this.l,ae,"[Invalid Chunk]"),_=!1;break}else Xn(this.i,this.l,Sn,null),Xa(this,Sn);if(Mu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_t!=4||ae.length!=0||this.h.h||(this.s=1,mt(16),_=!1),this.o=this.o&&_,!_)Xn(this.i,this.l,ae,"[Invalid Chunked Response]"),On(this),Is(this);else if(0<ae.length&&!this.W){this.W=!0;var Ot=this.j;Ot.g==this&&Ot.ba&&!Ot.M&&(Ot.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),rl(Ot),Ot.M=!0,mt(11))}}else Xn(this.i,this.l,ae,null),Xa(this,ae);_t==4&&On(this),this.o&&!this.J&&(_t==4?bo(this.j,this):(this.o=!1,et(this)))}else Ao(this.g),_==400&&0<ae.indexOf("Unknown SID")?(this.s=3,mt(12)):(this.s=0,mt(13)),On(this),Is(this)}}}catch{}finally{}};function Mu(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Bd(u,m){var _=u.C,S=m.indexOf(`
`,_);return S==-1?_o:(_=Number(m.substring(_,S)),isNaN(_)?Ga:(S+=1,S+_>m.length?_o:(m=m.slice(S,S+_),u.C=S+_,m)))}Yn.prototype.cancel=function(){this.J=!0,On(this)};function et(u){u.S=Date.now()+u.I,Vu(u,u.I)}function Vu(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Qn(T(u.ba,u),m)}function Ei(u){u.B&&(d.clearTimeout(u.B),u.B=null)}Yn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Ka(this.i,this.A),this.L!=2&&(Br(),mt(17)),On(this),this.s=2,Is(this)):Vu(this,this.S-u)};function Is(u){u.j.G==0||u.J||bo(u.j,u)}function On(u){Ei(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,Ua(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function Xa(u,m){try{var _=u.j;if(_.G!=0&&(_.g==u||sn(_.h,u))){if(!u.K&&sn(_.h,u)&&_.G==3){try{var S=_.Da.g.parse(m)}catch{S=null}if(Array.isArray(S)&&S.length==3){var $=S;if($[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)ko(_),rr(_);else break e;Ro(_),mt(18)}}else _.za=$[1],0<_.za-_.T&&37500>$[2]&&_.F&&_.v==0&&!_.C&&(_.C=Qn(T(_.Za,_),6e3));if(1>=ju(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Kr(_,11)}else if((u.K||_.g==u)&&ko(_),!F(m))for($=_.Da.g.parse(m),m=0;m<$.length;m++){let Be=$[m];if(_.T=Be[0],Be=Be[1],_.G==2)if(Be[0]=="c"){_.K=Be[1],_.ia=Be[2];const Ot=Be[3];Ot!=null&&(_.la=Ot,_.j.info("VER="+_.la));const _t=Be[4];_t!=null&&(_.Aa=_t,_.j.info("SVER="+_.Aa));const Mn=Be[5];Mn!=null&&typeof Mn=="number"&&0<Mn&&(S=1.5*Mn,_.L=S,_.j.info("backChannelRequestTimeoutMs_="+S)),S=_;const Sn=u.g;if(Sn){const Ri=Sn.g?Sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ri){var G=S.h;G.g||Ri.indexOf("spdy")==-1&&Ri.indexOf("quic")==-1&&Ri.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(Ja(G,G.h),G.h=null))}if(S.D){const No=Sn.g?Sn.g.getResponseHeader("X-HTTP-Session-Id"):null;No&&(S.ya=No,Ye(S.I,S.D,No))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),S=_;var ae=u;if(S.qa=Yu(S,S.J?S.ia:null,S.W),ae.K){Uu(S.h,ae);var Xe=ae,Ct=S.L;Ct&&(Xe.I=Ct),Xe.B&&(Ei(Xe),et(Xe)),S.g=ae}else Ci(S);0<_.i.length&&vr(_)}else Be[0]!="stop"&&Be[0]!="close"||Kr(_,7);else _.G==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?Kr(_,7):$t(_):Be[0]!="noop"&&_.l&&_.l.ta(Be),_.v=0)}}Br(4)}catch{}}var Fu=class{constructor(u,m){this.g=u,this.map=m}};function Ii(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function En(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ju(u){return u.h?1:u.g?u.g.size:0}function sn(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Ja(u,m){u.g?u.g.add(m):u.h=m}function Uu(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Ii.prototype.cancel=function(){if(this.i=$u(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function $u(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.D);return m}return j(u.i)}function wo(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],_=u.length,S=0;S<_;S++)m.push(u[S]);return m}m=[],_=0;for(S in u)m[_++]=u[S];return m}function Eo(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var _=0;_<u;_++)m.push(_);return m}m=[],_=0;for(const S in u)m[_++]=S;return m}}}function Ts(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var _=Eo(u),S=wo(u),$=S.length,G=0;G<$;G++)m.call(void 0,S[G],_&&_[G],u)}var Ti=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zd(u,m){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var S=u[_].indexOf("="),$=null;if(0<=S){var G=u[_].substring(0,S);$=u[_].substring(S+1)}else G=u[_];m(G,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function zr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof zr){this.h=u.h,Si(this,u.j),this.o=u.o,this.g=u.g,Ss(this,u.s),this.l=u.l;var m=u.i,_=new gr;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),As(this,_),this.m=u.m}else u&&(m=String(u).match(Ti))?(this.h=!1,Si(this,m[1]||"",!0),this.o=$e(m[2]||""),this.g=$e(m[3]||"",!0),Ss(this,m[4]),this.l=$e(m[5]||"",!0),As(this,m[6]||"",!0),this.m=$e(m[7]||"")):(this.h=!1,this.i=new gr(null,this.h))}zr.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Cs(m,Io,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Cs(m,Io,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Cs(_,_.charAt(0)=="/"?Wu:zu,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Cs(_,Ya)),u.join("")};function In(u){return new zr(u)}function Si(u,m,_){u.j=_?$e(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Ss(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function As(u,m,_){m instanceof gr?(u.i=m,yr(u.i,u.h)):(_||(m=Cs(m,qu)),u.i=new gr(m,u.h))}function Ye(u,m,_){u.i.set(m,_)}function xs(u){return Ye(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function $e(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Cs(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,Bu),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Bu(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Io=/[#\/\?@]/g,zu=/[#\?:]/g,Wu=/[#\?]/g,qu=/[#\?@]/g,Ya=/#/g;function gr(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Ut(u){u.g||(u.g=new Map,u.h=0,u.i&&zd(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}n=gr.prototype,n.add=function(u,m){Ut(this),this.i=null,u=Ln(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function Zn(u,m){Ut(u),m=Ln(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function er(u,m){return Ut(u),m=Ln(u,m),u.g.has(m)}n.forEach=function(u,m){Ut(this),this.g.forEach(function(_,S){_.forEach(function($){u.call(m,$,S,this)},this)},this)},n.na=function(){Ut(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let S=0;S<m.length;S++){const $=u[S];for(let G=0;G<$.length;G++)_.push(m[S])}return _},n.V=function(u){Ut(this);let m=[];if(typeof u=="string")er(this,u)&&(m=m.concat(this.g.get(Ln(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)m=m.concat(u[_])}return m},n.set=function(u,m){return Ut(this),this.i=null,u=Ln(this,u),er(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},n.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Rs(u,m,_){Zn(u,m),0<_.length&&(u.i=null,u.g.set(Ln(u,m),j(_)),u.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var S=m[_];const G=encodeURIComponent(String(S)),ae=this.V(S);for(S=0;S<ae.length;S++){var $=G;ae[S]!==""&&($+="="+encodeURIComponent(String(ae[S]))),u.push($)}}return this.i=u.join("&")};function Ln(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function yr(u,m){m&&!u.j&&(Ut(u),u.i=null,u.g.forEach(function(_,S){var $=S.toLowerCase();S!=$&&(Zn(this,S),Rs(this,$,_))},u)),u.j=m}function Wd(u,m){const _=new _i;if(d.Image){const S=new Image;S.onload=x(cn,_,"TestLoadImage: loaded",!0,m,S),S.onerror=x(cn,_,"TestLoadImage: error",!1,m,S),S.onabort=x(cn,_,"TestLoadImage: abort",!1,m,S),S.ontimeout=x(cn,_,"TestLoadImage: timeout",!1,m,S),d.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else m(!1)}function Hu(u,m){const _=new _i,S=new AbortController,$=setTimeout(()=>{S.abort(),cn(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:S.signal}).then(G=>{clearTimeout($),G.ok?cn(_,"TestPingServer: ok",!0,m):cn(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout($),cn(_,"TestPingServer: error",!1,m)})}function cn(u,m,_,S,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),S(_)}catch{}}function qd(){this.g=new za}function Ku(u,m,_){const S=_||"";try{Ts(u,function($,G){let ae=$;g($)&&(ae=$a($)),m.push(S+G+"="+encodeURIComponent(ae))})}catch($){throw m.push(S+"type="+encodeURIComponent("_badmap")),$}}function Wr(u){this.l=u.Ub||null,this.j=u.eb||!1}M(Wr,gi),Wr.prototype.g=function(){return new Ai(this.l,this.j)},Wr.prototype.i=(function(u){return function(){return u}})({});function Ai(u,m){At.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(Ai,At),n=Ai.prototype,n.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,nr(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||d).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,tr(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,nr(this)),this.g&&(this.readyState=3,nr(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Gu(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Gu(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?tr(this):nr(this),this.readyState==3&&Gu(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,tr(this))},n.Qa=function(u){this.g&&(this.response=u,tr(this))},n.ga=function(){this.g&&tr(this)};function tr(u){u.readyState=4,u.l=null,u.j=null,u.v=null,nr(u)}n.setRequestHeader=function(u,m){this.u.append(u,m)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function nr(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ai.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function qr(u){let m="";return ge(u,function(_,S){m+=S,m+=":",m+=_,m+=`\r
`}),m}function ks(u,m,_){e:{for(S in _){var S=!1;break e}S=!0}S||(_=qr(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):Ye(u,m,_))}function at(u){At.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(at,At);var Hd=/^https?$/i,Za=["POST","PUT"];n=at.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,m,_,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Jn.g(),this.v=this.o?ho(this.o):ho(Jn),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(G){xi(this,G);return}if(u=_||"",_=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var $ in S)_.set($,S[$]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const G of S.keys())_.set(G,S.get(G));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(_.keys()).find(G=>G.toLowerCase()=="content-type"),$=d.FormData&&u instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Za,m,void 0))||S||$||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,ae]of _)this.g.setRequestHeader(G,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{So(this),this.u=!0,this.g.send(u),this.u=!1}catch(G){xi(this,G)}};function xi(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,To(u),Tn(u)}function To(u){u.A||(u.A=!0,xt(u,"complete"),xt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,xt(this,"complete"),xt(this,"abort"),Tn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Tn(this,!0)),at.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?el(this):this.bb())},n.bb=function(){el(this)};function el(u){if(u.h&&typeof c<"u"&&(!u.v[1]||hn(u)!=4||u.Z()!=2)){if(u.u&&hn(u)==4)Fa(u.Ea,0,u);else if(xt(u,"readystatechange"),hn(u)==4){u.h=!1;try{const ae=u.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var S;if(S=ae===0){var $=String(u.D).match(Ti)[1]||null;!$&&d.self&&d.self.location&&($=d.self.location.protocol.slice(0,-1)),S=!Hd.test($?$.toLowerCase():"")}_=S}if(_)xt(u,"complete"),xt(u,"success");else{u.m=6;try{var G=2<hn(u)?u.g.statusText:""}catch{G=""}u.l=G+" ["+u.Z()+"]",To(u)}}finally{Tn(u)}}}}function Tn(u,m){if(u.g){So(u);const _=u.g,S=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||xt(u,"ready");try{_.onreadystatechange=S}catch{}}}function So(u){u.I&&(d.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function hn(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<hn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Ba(m)}};function tl(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Ao(u){const m={};u=(u.g&&2<=hn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(F(u[S]))continue;var _=N(u[S]);const $=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const G=m[$]||[];m[$]=G,G.push(_)}b(m,function(S){return S.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function _r(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function nl(u){this.Aa=0,this.i=[],this.j=new _i,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=_r("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=_r("baseRetryDelayMs",5e3,u),this.cb=_r("retryDelaySeedMs",1e4,u),this.Wa=_r("forwardChannelMaxRetries",2,u),this.wa=_r("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ii(u&&u.concurrentRequestLimit),this.Da=new qd,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=nl.prototype,n.la=8,n.G=1,n.connect=function(u,m,_,S){mt(0),this.W=u,this.H=m||{},_&&S!==void 0&&(this.H.OSID=_,this.H.OAID=S),this.F=this.X,this.I=Yu(this,null,this.W),vr(this)};function $t(u){if(xo(u),u.G==3){var m=u.U++,_=In(u.I);if(Ye(_,"SID",u.K),Ye(_,"RID",m),Ye(_,"TYPE","terminate"),Hr(u,_),m=new Yn(u,u.j,m),m.L=2,m.v=xs(In(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&d.Image&&(new Image().src=m.v,_=!0),_||(m.g=Zu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),et(m)}Ju(u)}function rr(u){u.g&&(rl(u),u.g.cancel(),u.g=null)}function xo(u){rr(u),u.u&&(d.clearTimeout(u.u),u.u=null),ko(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&d.clearTimeout(u.s),u.s=null)}function vr(u){if(!En(u.h)&&!u.s){u.s=!0;var m=u.Ga;Ge||ie(),le||(Ge(),le=!0),Y.add(m,u),u.B=0}}function Kd(u,m){return ju(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Qn(T(u.Ga,u,m),Xu(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const $=new Yn(this,this.j,u);let G=this.o;if(this.S&&(G?(G=A(G),P(G,this.S)):G=this.S),this.m!==null||this.O||($.H=G,G=null),this.P)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var S=this.i[_];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(m+=S,4096<m){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=bs(this,$,m),_=In(this.I),Ye(_,"RID",u),Ye(_,"CVER",22),this.D&&Ye(_,"X-HTTP-Session-Id",this.D),Hr(this,_),G&&(this.O?m="headers="+encodeURIComponent(String(qr(G)))+"&"+m:this.m&&ks(_,this.m,G)),Ja(this.h,$),this.Ua&&Ye(_,"TYPE","init"),this.P?(Ye(_,"$req",m),Ye(_,"SID","null"),$.T=!0,vo($,_,null)):vo($,_,m),this.G=2}}else this.G==3&&(u?Co(this,u):this.i.length==0||En(this.h)||Co(this))};function Co(u,m){var _;m?_=m.l:_=u.U++;const S=In(u.I);Ye(S,"SID",u.K),Ye(S,"RID",_),Ye(S,"AID",u.T),Hr(u,S),u.m&&u.o&&ks(S,u.m,u.o),_=new Yn(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),m&&(u.i=m.D.concat(u.i)),m=bs(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Ja(u.h,_),vo(_,S,m)}function Hr(u,m){u.H&&ge(u.H,function(_,S){Ye(m,S,_)}),u.l&&Ts({},function(_,S){Ye(m,S,_)})}function bs(u,m,_){_=Math.min(u.i.length,_);var S=u.l?T(u.l.Na,u.l,u):null;e:{var $=u.i;let G=-1;for(;;){const ae=["count="+_];G==-1?0<_?(G=$[0].g,ae.push("ofs="+G)):G=0:ae.push("ofs="+G);let Xe=!0;for(let Ct=0;Ct<_;Ct++){let Be=$[Ct].g;const Ot=$[Ct].map;if(Be-=G,0>Be)G=Math.max(0,$[Ct].g-100),Xe=!1;else try{Ku(Ot,ae,"req"+Be+"_")}catch{S&&S(Ot)}}if(Xe){S=ae.join("&");break e}}}return u=u.i.splice(0,_),m.D=u,S}function Ci(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;Ge||ie(),le||(Ge(),le=!0),Y.add(m,u),u.v=0}}function Ro(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Qn(T(u.Fa,u),Xu(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,Qu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Qn(T(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mt(10),rr(this),Qu(this))};function rl(u){u.A!=null&&(d.clearTimeout(u.A),u.A=null)}function Qu(u){u.g=new Yn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=In(u.qa);Ye(m,"RID","rpc"),Ye(m,"SID",u.K),Ye(m,"AID",u.T),Ye(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ye(m,"TO",u.ja),Ye(m,"TYPE","xmlhttp"),Hr(u,m),u.m&&u.o&&ks(m,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=xs(In(m)),_.m=null,_.P=!0,Qa(_,u)}n.Za=function(){this.C!=null&&(this.C=null,rr(this),Ro(this),mt(19))};function ko(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function bo(u,m){var _=null;if(u.g==m){ko(u),rl(u),u.g=null;var S=2}else if(sn(u.h,m))_=m.D,Uu(u.h,m),S=1;else return;if(u.G!=0){if(m.o)if(S==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var $=u.B;S=yi(),xt(S,new mo(S,_)),vr(u)}else Ci(u);else if($=m.s,$==3||$==0&&0<m.X||!(S==1&&Kd(u,m)||S==2&&Ro(u)))switch(_&&0<_.length&&(m=u.h,m.i=m.i.concat(_)),$){case 1:Kr(u,5);break;case 4:Kr(u,10);break;case 3:Kr(u,6);break;default:Kr(u,2)}}}function Xu(u,m){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*m}function Kr(u,m){if(u.j.info("Error code "+m),m==2){var _=T(u.fb,u),S=u.Xa;const $=!S;S=new zr(S||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Si(S,"https"),xs(S),$?Wd(S.toString(),_):Hu(S.toString(),_)}else mt(2);u.G=0,u.l&&u.l.sa(m),Ju(u),xo(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function Ju(u){if(u.G=0,u.ka=[],u.l){const m=$u(u.h);(m.length!=0||u.i.length!=0)&&(V(u.ka,m),V(u.ka,u.i),u.h.i.length=0,j(u.i),u.i.length=0),u.l.ra()}}function Yu(u,m,_){var S=_ instanceof zr?In(_):new zr(_);if(S.g!="")m&&(S.g=m+"."+S.g),Ss(S,S.s);else{var $=d.location;S=$.protocol,m=m?m+"."+$.hostname:$.hostname,$=+$.port;var G=new zr(null);S&&Si(G,S),m&&(G.g=m),$&&Ss(G,$),_&&(G.l=_),S=G}return _=u.D,m=u.ya,_&&m&&Ye(S,_,m),Ye(S,"VER",u.la),Hr(u,S),S}function Zu(u,m,_){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new at(new Wr({eb:_})):new at(u.pa),m.Ha(u.J),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function sl(){}n=sl.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Po(){}Po.prototype.g=function(u,m){return new on(u,m)};function on(u,m){At.call(this),this.g=new nl(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!F(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!F(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new wr(this)}M(on,At),on.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},on.prototype.close=function(){$t(this.g)},on.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=$a(u),u=_);m.i.push(new Fu(m.Ya++,u)),m.G==3&&vr(m)},on.prototype.N=function(){this.g.l=null,delete this.j,$t(this.g),delete this.g,on.aa.N.call(this)};function ec(u){pr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}M(ec,pr);function tc(){po.call(this),this.status=1}M(tc,po);function wr(u){this.g=u}M(wr,sl),wr.prototype.ua=function(){xt(this.g,"a")},wr.prototype.ta=function(u){xt(this.g,new ec(u))},wr.prototype.sa=function(u){xt(this.g,new tc)},wr.prototype.ra=function(){xt(this.g,"b")},Po.prototype.createWebChannel=Po.prototype.g,on.prototype.send=on.prototype.o,on.prototype.open=on.prototype.m,on.prototype.close=on.prototype.close,XE=function(){return new Po},QE=function(){return yi()},GE=mr,Zp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},yo.NO_ERROR=0,yo.TIMEOUT=8,yo.HTTP_ERROR=6,mh=yo,Ou.COMPLETE="complete",KE=Ou,fo.EventType=Dn,Dn.OPEN="a",Dn.CLOSE="b",Dn.ERROR="c",Dn.MESSAGE="d",At.prototype.listen=At.prototype.K,Ol=fo,at.prototype.listenOnce=at.prototype.L,at.prototype.getLastError=at.prototype.Ka,at.prototype.getLastErrorCode=at.prototype.Ba,at.prototype.getStatus=at.prototype.Z,at.prototype.getResponseJson=at.prototype.Oa,at.prototype.getResponseText=at.prototype.oa,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Ha,HE=at}).apply(typeof Jc<"u"?Jc:typeof self<"u"?self:typeof window<"u"?window:{});const Zv="@firebase/firestore",ew="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};tn.UNAUTHENTICATED=new tn(null),tn.GOOGLE_CREDENTIALS=new tn("google-credentials-uid"),tn.FIRST_PARTY=new tn("first-party-uid"),tn.MOCK_USER=new tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ra="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo=new jm("@firebase/firestore");function na(){return eo.logLevel}function de(n,...e){if(eo.logLevel<=Fe.DEBUG){const t=e.map(Ym);eo.debug(`Firestore (${Ra}): ${n}`,...t)}}function ps(n,...e){if(eo.logLevel<=Fe.ERROR){const t=e.map(Ym);eo.error(`Firestore (${Ra}): ${n}`,...t)}}function ya(n,...e){if(eo.logLevel<=Fe.WARN){const t=e.map(Ym);eo.warn(`Firestore (${Ra}): ${n}`,...t)}}function Ym(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,JE(n,r,t)}function JE(n,e,t){let r=`FIRESTORE (${Ra}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw ps(r),new Error(r)}function Qe(n,e,t,r){let o="Unexpected state";typeof t=="string"?o=t:r=t,n||JE(e,o,r)}function Ne(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends ys{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Bb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(tn.UNAUTHENTICATED)))}shutdown(){}}class zb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Wb{constructor(e){this.t=e,this.currentUser=tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Qe(this.o===void 0,42304);let r=this.i;const o=p=>this.i!==r?(r=this.i,t(p)):Promise.resolve();let a=new ni;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ni,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const p=a;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},d=p=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ni)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qe(typeof r.accessToken=="string",31837,{l:r}),new YE(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new tn(e)}}class qb{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=tn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Hb{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new qb(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(tn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class tw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Kb{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Pn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Qe(this.o===void 0,3512);const r=a=>{a.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,de("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const o=a=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?o(a):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new tw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Qe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new tw(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=Gb(40);for(let a=0;a<o.length;++a)r.length<20&&o[a]<t&&(r+=e.charAt(o[a]%62))}return r}}function je(n,e){return n<e?-1:n>e?1:0}function em(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const o=n.charAt(r),a=e.charAt(r);if(o!==a)return Rp(o)===Rp(a)?je(o,a):Rp(o)?1:-1}return je(n.length,e.length)}const Qb=55296,Xb=57343;function Rp(n){const e=n.charCodeAt(0);return e>=Qb&&e<=Xb}function _a(n,e,t){return n.length===e.length&&n.every(((r,o)=>t(r,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw="__name__";class xr{constructor(e,t,r){t===void 0?t=0:t>e.length&&xe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&xe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return xr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof xr?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const a=xr.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return je(e.length,t.length)}static compareSegments(e,t){const r=xr.isNumericId(e),o=xr.isNumericId(t);return r&&!o?-1:!r&&o?1:r&&o?xr.extractNumericId(e).compare(xr.extractNumericId(t)):em(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ti.fromString(e.substring(4,e.length-2))}}class nt extends xr{construct(e,t,r){return new nt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new he(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((o=>o.length>0)))}return new nt(t)}static emptyPath(){return new nt([])}}const Jb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kt extends xr{construct(e,t,r){return new Kt(e,t,r)}static isValidIdentifier(e){return Jb.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===nw}static keyField(){return new Kt([nw])}static fromServerFormat(e){const t=[];let r="",o=0;const a=()=>{if(r.length===0)throw new he(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new he(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new he(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,o+=2}else d==="`"?(c=!c,o++):d!=="."||c?(r+=d,o++):(a(),o++)}if(a(),c)throw new he(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kt(t)}static emptyPath(){return new Kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(nt.fromString(e))}static fromName(e){return new ve(nt.fromString(e).popFirst(5))}static empty(){return new ve(nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return nt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new nt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(n,e,t){if(!t)throw new he(J.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Yb(n,e,t,r){if(e===!0&&r===!0)throw new he(J.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function rw(n){if(!ve.isDocumentKey(n))throw new he(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function sw(n){if(ve.isDocumentKey(n))throw new he(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function eI(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function pd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":xe(12329,{type:typeof n})}function Hn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new he(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=pd(n);throw new he(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(n,e){const t={typeString:n};return e&&(t.value=e),t}function Iu(n,e){if(!eI(n))throw new he(J.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const o=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(o&&typeof c!==o){t=`JSON field '${r}' must be a ${o}.`;break}if(a!==void 0&&c!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new he(J.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw=-62135596800,ow=1e6;class ot{static now(){return ot.fromMillis(Date.now())}static fromDate(e){return ot.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*ow);return new ot(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<iw)throw new he(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ow}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ot._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Iu(e,ot._jsonSchema))return new ot(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-iw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ot._jsonSchemaVersion="firestore/timestamp/1.0",ot._jsonSchema={type:It("string",ot._jsonSchemaVersion),seconds:It("number"),nanoseconds:It("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{static fromTimestamp(e){return new Pe(e)}static min(){return new Pe(new ot(0,0))}static max(){return new Pe(new ot(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ou=-1;function Zb(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Pe.fromTimestamp(r===1e9?new ot(t+1,0):new ot(t,r));return new si(o,ve.empty(),e)}function eP(n){return new si(n.readTime,n.key,ou)}class si{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new si(Pe.min(),ve.empty(),ou)}static max(){return new si(Pe.max(),ve.empty(),ou)}}function tP(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(n.documentKey,e.documentKey),t!==0?t:je(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ka(n){if(n.code!==J.FAILED_PRECONDITION||n.message!==nP)throw n;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Z(((r,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Z?t:Z.resolve(t)}catch(t){return Z.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Z.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Z.reject(t)}static resolve(e){return new Z(((t,r)=>{t(e)}))}static reject(e){return new Z(((t,r)=>{r(e)}))}static waitFor(e){return new Z(((t,r)=>{let o=0,a=0,c=!1;e.forEach((d=>{++o,d.next((()=>{++a,c&&a===o&&t()}),(p=>r(p)))})),c=!0,a===o&&t()}))}static or(e){let t=Z.resolve(!1);for(const r of e)t=t.next((o=>o?Z.resolve(o):r()));return t}static forEach(e,t){const r=[];return e.forEach(((o,a)=>{r.push(t.call(this,o,a))})),this.waitFor(r)}static mapArray(e,t){return new Z(((r,o)=>{const a=e.length,c=new Array(a);let d=0;for(let p=0;p<a;p++){const g=p;t(e[g]).next((v=>{c[g]=v,++d,d===a&&r(c)}),(v=>o(v)))}}))}static doWhile(e,t){return new Z(((r,o)=>{const a=()=>{e()===!0?t().next((()=>{a()}),o):r()};a()}))}}function sP(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ba(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}md.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg=-1;function gd(n){return n==null}function $h(n){return n===0&&1/n==-1/0}function iP(n){return typeof n=="number"&&Number.isInteger(n)&&!$h(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI="";function oP(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=aw(e)),e=aP(n.get(t),e);return aw(e)}function aP(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const a=n.charAt(o);switch(a){case"\0":t+="";break;case tI:t+="";break;default:t+=a}}return t}function aw(n){return n+tI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function hi(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function nI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,t){this.comparator=e,this.root=t||Ht.EMPTY}insert(e,t){return new dt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ht.BLACK,null,null))}remove(e){return new dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ht.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yc(this.root,e,this.comparator,!0)}}class Yc{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ht{constructor(e,t,r,o,a){this.key=e,this.value=t,this.color=r??Ht.RED,this.left=o??Ht.EMPTY,this.right=a??Ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,a){return new Ht(e??this.key,t??this.value,r??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const a=r(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,r),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Ht.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw xe(27949);return e+(this.isRed()?0:1)}}Ht.EMPTY=null,Ht.RED=!0,Ht.BLACK=!1;Ht.EMPTY=new class{constructor(){this.size=0}get key(){throw xe(57766)}get value(){throw xe(16141)}get color(){throw xe(16727)}get left(){throw xe(29726)}get right(){throw xe(36894)}copy(e,t,r,o,a){return this}insert(e,t,r){return new Ht(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new uw(this.data.getIterator())}getIteratorFrom(e){return new uw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Nt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=r.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Nt(this.comparator);return t.data=e,t}}class uw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.fields=e,e.sort(Kt.comparator)}static empty(){return new Nn([])}unionWith(e){let t=new Nt(Kt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Nn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return _a(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new rI("Invalid base64 string: "+a):a}})(e);return new Gt(t)}static fromUint8Array(e){const t=(function(o){let a="";for(let c=0;c<o.length;++c)a+=String.fromCharCode(o[c]);return a})(e);return new Gt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gt.EMPTY_BYTE_STRING=new Gt("");const lP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ii(n){if(Qe(!!n,39018),typeof n=="string"){let e=0;const t=lP.exec(n);if(Qe(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:yt(n.seconds),nanos:yt(n.nanos)}}function yt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function oi(n){return typeof n=="string"?Gt.fromBase64String(n):Gt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI="server_timestamp",iI="__type__",oI="__previous_value__",aI="__local_write_time__";function tg(n){return(n?.mapValue?.fields||{})[iI]?.stringValue===sI}function yd(n){const e=n.mapValue.fields[oI];return tg(e)?yd(e):e}function au(n){const e=ii(n.mapValue.fields[aI].timestampValue);return new ot(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e,t,r,o,a,c,d,p,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=v}}const Bh="(default)";class lu{constructor(e,t){this.projectId=e,this.database=t||Bh}static empty(){return new lu("","")}get isDefaultDatabase(){return this.database===Bh}isEqual(e){return e instanceof lu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI="__type__",cP="__max__",Zc={mapValue:{}},uI="__vector__",zh="value";function ai(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?tg(n)?4:dP(n)?9007199254740991:hP(n)?10:11:xe(28295,{value:n})}function Lr(n,e){if(n===e)return!0;const t=ai(n);if(t!==ai(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return au(n).isEqual(au(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const c=ii(o.timestampValue),d=ii(a.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,a){return oi(o.bytesValue).isEqual(oi(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,a){return yt(o.geoPointValue.latitude)===yt(a.geoPointValue.latitude)&&yt(o.geoPointValue.longitude)===yt(a.geoPointValue.longitude)})(n,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return yt(o.integerValue)===yt(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const c=yt(o.doubleValue),d=yt(a.doubleValue);return c===d?$h(c)===$h(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return _a(n.arrayValue.values||[],e.arrayValue.values||[],Lr);case 10:case 11:return(function(o,a){const c=o.mapValue.fields||{},d=a.mapValue.fields||{};if(lw(c)!==lw(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!Lr(c[p],d[p])))return!1;return!0})(n,e);default:return xe(52216,{left:n})}}function uu(n,e){return(n.values||[]).find((t=>Lr(t,e)))!==void 0}function va(n,e){if(n===e)return 0;const t=ai(n),r=ai(e);if(t!==r)return je(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return je(n.booleanValue,e.booleanValue);case 2:return(function(a,c){const d=yt(a.integerValue||a.doubleValue),p=yt(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return cw(n.timestampValue,e.timestampValue);case 4:return cw(au(n),au(e));case 5:return em(n.stringValue,e.stringValue);case 6:return(function(a,c){const d=oi(a),p=oi(c);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(a,c){const d=a.split("/"),p=c.split("/");for(let g=0;g<d.length&&g<p.length;g++){const v=je(d[g],p[g]);if(v!==0)return v}return je(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,c){const d=je(yt(a.latitude),yt(c.latitude));return d!==0?d:je(yt(a.longitude),yt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return hw(n.arrayValue,e.arrayValue);case 10:return(function(a,c){const d=a.fields||{},p=c.fields||{},g=d[zh]?.arrayValue,v=p[zh]?.arrayValue,E=je(g?.values?.length||0,v?.values?.length||0);return E!==0?E:hw(g,v)})(n.mapValue,e.mapValue);case 11:return(function(a,c){if(a===Zc.mapValue&&c===Zc.mapValue)return 0;if(a===Zc.mapValue)return 1;if(c===Zc.mapValue)return-1;const d=a.fields||{},p=Object.keys(d),g=c.fields||{},v=Object.keys(g);p.sort(),v.sort();for(let E=0;E<p.length&&E<v.length;++E){const T=em(p[E],v[E]);if(T!==0)return T;const x=va(d[p[E]],g[v[E]]);if(x!==0)return x}return je(p.length,v.length)})(n.mapValue,e.mapValue);default:throw xe(23264,{he:t})}}function cw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return je(n,e);const t=ii(n),r=ii(e),o=je(t.seconds,r.seconds);return o!==0?o:je(t.nanos,r.nanos)}function hw(n,e){const t=n.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const a=va(t[o],r[o]);if(a)return a}return je(t.length,r.length)}function wa(n){return tm(n)}function tm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=ii(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return oi(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ve.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",o=!0;for(const a of t.values||[])o?o=!1:r+=",",r+=tm(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const c of r)a?a=!1:o+=",",o+=`${c}:${tm(t.fields[c])}`;return o+"}"})(n.mapValue):xe(61005,{value:n})}function gh(n){switch(ai(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=yd(n);return e?16+gh(e):16;case 5:return 2*n.stringValue.length;case 6:return oi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,a)=>o+gh(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let o=0;return hi(r.fields,((a,c)=>{o+=a.length+gh(c)})),o})(n.mapValue);default:throw xe(13486,{value:n})}}function dw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function nm(n){return!!n&&"integerValue"in n}function ng(n){return!!n&&"arrayValue"in n}function fw(n){return!!n&&"nullValue"in n}function pw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function yh(n){return!!n&&"mapValue"in n}function hP(n){return(n?.mapValue?.fields||{})[lI]?.stringValue===uI}function Ql(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return hi(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Ql(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ql(n.arrayValue.values[t]);return e}return{...n}}function dP(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===cP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.value=e}static empty(){return new wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!yh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ql(t)}setAll(e){let t=Kt.emptyPath(),r={},o=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,r,o),r={},o=[],t=d.popLast()}c?r[d.lastSegment()]=Ql(c):o.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,o)}delete(e){const t=this.field(e.popLast());yh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Lr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];yh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){hi(t,((o,a)=>e[o]=a));for(const o of r)delete e[o]}clone(){return new wn(Ql(this.value))}}function cI(n){const e=[];return hi(n.fields,((t,r)=>{const o=new Kt([t]);if(yh(r)){const a=cI(r.mapValue).fields;if(a.length===0)e.push(o);else for(const c of a)e.push(o.child(c))}else e.push(o)})),new Nn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,t,r,o,a,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=a,this.data=c,this.documentState=d}static newInvalidDocument(e){return new nn(e,0,Pe.min(),Pe.min(),Pe.min(),wn.empty(),0)}static newFoundDocument(e,t,r,o){return new nn(e,1,t,Pe.min(),r,o,0)}static newNoDocument(e,t){return new nn(e,2,t,Pe.min(),Pe.min(),wn.empty(),0)}static newUnknownDocument(e,t){return new nn(e,3,t,Pe.min(),Pe.min(),wn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,t){this.position=e,this.inclusive=t}}function mw(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const a=e[o],c=n.position[o];if(a.field.isKeyField()?r=ve.comparator(ve.fromName(c.referenceValue),t.key):r=va(c,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function gw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Lr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,t="asc"){this.field=e,this.dir=t}}function fP(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{}class Et extends hI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new mP(e,t,r):t==="array-contains"?new _P(e,r):t==="in"?new vP(e,r):t==="not-in"?new wP(e,r):t==="array-contains-any"?new EP(e,r):new Et(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new gP(e,r):new yP(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(va(t,this.value)):t!==null&&ai(this.value)===ai(t)&&this.matchesComparison(va(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fr extends hI{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new fr(e,t)}matches(e){return dI(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function dI(n){return n.op==="and"}function fI(n){return pP(n)&&dI(n)}function pP(n){for(const e of n.filters)if(e instanceof fr)return!1;return!0}function rm(n){if(n instanceof Et)return n.field.canonicalString()+n.op.toString()+wa(n.value);if(fI(n))return n.filters.map((e=>rm(e))).join(",");{const e=n.filters.map((t=>rm(t))).join(",");return`${n.op}(${e})`}}function pI(n,e){return n instanceof Et?(function(r,o){return o instanceof Et&&r.op===o.op&&r.field.isEqual(o.field)&&Lr(r.value,o.value)})(n,e):n instanceof fr?(function(r,o){return o instanceof fr&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((a,c,d)=>a&&pI(c,o.filters[d])),!0):!1})(n,e):void xe(19439)}function mI(n){return n instanceof Et?(function(t){return`${t.field.canonicalString()} ${t.op} ${wa(t.value)}`})(n):n instanceof fr?(function(t){return t.op.toString()+" {"+t.getFilters().map(mI).join(" ,")+"}"})(n):"Filter"}class mP extends Et{constructor(e,t,r){super(e,t,r),this.key=ve.fromName(r.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class gP extends Et{constructor(e,t){super(e,"in",t),this.keys=gI("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class yP extends Et{constructor(e,t){super(e,"not-in",t),this.keys=gI("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function gI(n,e){return(e.arrayValue?.values||[]).map((t=>ve.fromName(t.referenceValue)))}class _P extends Et{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ng(t)&&uu(t.arrayValue,this.value)}}class vP extends Et{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&uu(this.value.arrayValue,t)}}class wP extends Et{constructor(e,t){super(e,"not-in",t)}matches(e){if(uu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!uu(this.value.arrayValue,t)}}class EP extends Et{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ng(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>uu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e,t=null,r=[],o=[],a=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=a,this.startAt=c,this.endAt=d,this.Te=null}}function yw(n,e=null,t=[],r=[],o=null,a=null,c=null){return new IP(n,e,t,r,o,a,c)}function rg(n){const e=Ne(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>rm(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),gd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>wa(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>wa(r))).join(",")),e.Te=t}return e.Te}function sg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!fP(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!pI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!gw(n.startAt,e.startAt)&&gw(n.endAt,e.endAt)}function sm(n){return ve.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,t=null,r=[],o=[],a=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=a,this.limitType=c,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function TP(n,e,t,r,o,a,c,d){return new Tu(n,e,t,r,o,a,c,d)}function _d(n){return new Tu(n)}function _w(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function yI(n){return n.collectionGroup!==null}function Xl(n){const e=Ne(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Nt(Kt.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new qh(a,r))})),t.has(Kt.keyField().canonicalString())||e.Ie.push(new qh(Kt.keyField(),r))}return e.Ie}function br(n){const e=Ne(n);return e.Ee||(e.Ee=SP(e,Xl(n))),e.Ee}function SP(n,e){if(n.limitType==="F")return yw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new qh(o.field,a)}));const t=n.endAt?new Wh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Wh(n.startAt.position,n.startAt.inclusive):null;return yw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function im(n,e){const t=n.filters.concat([e]);return new Tu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function om(n,e,t){return new Tu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function vd(n,e){return sg(br(n),br(e))&&n.limitType===e.limitType}function _I(n){return`${rg(br(n))}|lt:${n.limitType}`}function ra(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((o=>mI(o))).join(", ")}]`),gd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((o=>wa(o))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((o=>wa(o))).join(",")),`Target(${r})`})(br(n))}; limitType=${n.limitType})`}function wd(n,e){return e.isFoundDocument()&&(function(r,o){const a=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):ve.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,o){for(const a of Xl(r))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,o){for(const a of r.filters)if(!a.matches(o))return!1;return!0})(n,e)&&(function(r,o){return!(r.startAt&&!(function(c,d,p){const g=mw(c,d,p);return c.inclusive?g<=0:g<0})(r.startAt,Xl(r),o)||r.endAt&&!(function(c,d,p){const g=mw(c,d,p);return c.inclusive?g>=0:g>0})(r.endAt,Xl(r),o))})(n,e)}function AP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function vI(n){return(e,t)=>{let r=!1;for(const o of Xl(n)){const a=xP(o,e,t);if(a!==0)return a;r=r||o.field.isKeyField()}return 0}}function xP(n,e,t){const r=n.field.isKeyField()?ve.comparator(e.key,t.key):(function(a,c,d){const p=c.data.field(a),g=d.data.field(a);return p!==null&&g!==null?va(p,g):xe(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return xe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,a]of r)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){hi(this.inner,((t,r)=>{for(const[o,a]of r)e(o,a)}))}isEmpty(){return nI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP=new dt(ve.comparator);function ms(){return CP}const wI=new dt(ve.comparator);function Ll(...n){let e=wI;for(const t of n)e=e.insert(t.key,t);return e}function EI(n){let e=wI;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function qi(){return Jl()}function II(){return Jl()}function Jl(){return new so((n=>n.toString()),((n,e)=>n.isEqual(e)))}const RP=new dt(ve.comparator),kP=new Nt(ve.comparator);function Ue(...n){let e=kP;for(const t of n)e=e.add(t);return e}const bP=new Nt(je);function PP(){return bP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$h(e)?"-0":e}}function TI(n){return{integerValue:""+n}}function NP(n,e){return iP(e)?TI(e):ig(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(){this._=void 0}}function DP(n,e,t){return n instanceof Hh?(function(o,a){const c={fields:{[iI]:{stringValue:sI},[aI]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&tg(a)&&(a=yd(a)),a&&(c.fields[oI]=a),{mapValue:c}})(t,e):n instanceof cu?AI(n,e):n instanceof hu?xI(n,e):(function(o,a){const c=SI(o,a),d=vw(c)+vw(o.Ae);return nm(c)&&nm(o.Ae)?TI(d):ig(o.serializer,d)})(n,e)}function OP(n,e,t){return n instanceof cu?AI(n,e):n instanceof hu?xI(n,e):t}function SI(n,e){return n instanceof Kh?(function(r){return nm(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Hh extends Ed{}class cu extends Ed{constructor(e){super(),this.elements=e}}function AI(n,e){const t=CI(e);for(const r of n.elements)t.some((o=>Lr(o,r)))||t.push(r);return{arrayValue:{values:t}}}class hu extends Ed{constructor(e){super(),this.elements=e}}function xI(n,e){let t=CI(e);for(const r of n.elements)t=t.filter((o=>!Lr(o,r)));return{arrayValue:{values:t}}}class Kh extends Ed{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function vw(n){return yt(n.integerValue||n.doubleValue)}function CI(n){return ng(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function LP(n,e){return n.field.isEqual(e.field)&&(function(r,o){return r instanceof cu&&o instanceof cu||r instanceof hu&&o instanceof hu?_a(r.elements,o.elements,Lr):r instanceof Kh&&o instanceof Kh?Lr(r.Ae,o.Ae):r instanceof Hh&&o instanceof Hh})(n.transform,e.transform)}class MP{constructor(e,t){this.version=e,this.transformResults=t}}class Kn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Kn}static exists(e){return new Kn(void 0,e)}static updateTime(e){return new Kn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _h(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Id{}function RI(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new og(n.key,Kn.none()):new Su(n.key,n.data,Kn.none());{const t=n.data,r=wn.empty();let o=new Nt(Kt.comparator);for(let a of e.fields)if(!o.has(a)){let c=t.field(a);c===null&&a.length>1&&(a=a.popLast(),c=t.field(a)),c===null?r.delete(a):r.set(a,c),o=o.add(a)}return new di(n.key,r,new Nn(o.toArray()),Kn.none())}}function VP(n,e,t){n instanceof Su?(function(o,a,c){const d=o.value.clone(),p=Ew(o.fieldTransforms,a,c.transformResults);d.setAll(p),a.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof di?(function(o,a,c){if(!_h(o.precondition,a))return void a.convertToUnknownDocument(c.version);const d=Ew(o.fieldTransforms,a,c.transformResults),p=a.data;p.setAll(kI(o)),p.setAll(d),a.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(n,e,t):(function(o,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Yl(n,e,t,r){return n instanceof Su?(function(a,c,d,p){if(!_h(a.precondition,c))return d;const g=a.value.clone(),v=Iw(a.fieldTransforms,p,c);return g.setAll(v),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(n,e,t,r):n instanceof di?(function(a,c,d,p){if(!_h(a.precondition,c))return d;const g=Iw(a.fieldTransforms,p,c),v=c.data;return v.setAll(kI(a)),v.setAll(g),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((E=>E.field)))})(n,e,t,r):(function(a,c,d){return _h(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function FP(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),a=SI(r.transform,o||null);a!=null&&(t===null&&(t=wn.empty()),t.set(r.field,a))}return t||null}function ww(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&_a(r,o,((a,c)=>LP(a,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Su extends Id{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class di extends Id{constructor(e,t,r,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function kI(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function Ew(n,e,t){const r=new Map;Qe(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const a=n[o],c=a.transform,d=e.data.field(a.field);r.set(a.field,OP(c,d,t[o]))}return r}function Iw(n,e,t){const r=new Map;for(const o of n){const a=o.transform,c=t.data.field(o.field);r.set(o.field,DP(a,c,e))}return r}class og extends Id{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jP extends Id{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&VP(a,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Yl(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Yl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=II();return this.mutations.forEach((o=>{const a=e.get(o.key),c=a.overlayedDocument;let d=this.applyToLocalView(c,a.mutatedFields);d=t.has(o.key)?null:d;const p=RI(c,d);p!==null&&r.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(Pe.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ue())}isEqual(e){return this.batchId===e.batchId&&_a(this.mutations,e.mutations,((t,r)=>ww(t,r)))&&_a(this.baseMutations,e.baseMutations,((t,r)=>ww(t,r)))}}class ag{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Qe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return RP})();const a=e.mutations;for(let c=0;c<a.length;c++)o=o.insert(a[c].key,r[c].version);return new ag(e,t,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wt,ze;function zP(n){switch(n){case J.OK:return xe(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return xe(15467,{code:n})}}function bI(n){if(n===void 0)return ps("GRPC error has no .code"),J.UNKNOWN;switch(n){case wt.OK:return J.OK;case wt.CANCELLED:return J.CANCELLED;case wt.UNKNOWN:return J.UNKNOWN;case wt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case wt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case wt.INTERNAL:return J.INTERNAL;case wt.UNAVAILABLE:return J.UNAVAILABLE;case wt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case wt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case wt.NOT_FOUND:return J.NOT_FOUND;case wt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case wt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case wt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case wt.ABORTED:return J.ABORTED;case wt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case wt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case wt.DATA_LOSS:return J.DATA_LOSS;default:return xe(39323,{code:n})}}(ze=wt||(wt={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qP=new ti([4294967295,4294967295],0);function Tw(n){const e=WP().encode(n),t=new qE;return t.update(e),new Uint8Array(t.digest())}function Sw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new ti([t,r],0),new ti([o,a],0)]}class lg{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ml(`Invalid padding: ${t}`);if(r<0)throw new Ml(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ml(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ml(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ti.fromNumber(this.ge)}ye(e,t,r){let o=e.add(t.multiply(ti.fromNumber(r)));return o.compare(qP)===1&&(o=new ti([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Tw(e),[r,o]=Sw(t);for(let a=0;a<this.hashCount;a++){const c=this.ye(r,o,a);if(!this.we(c))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new lg(a,o,t);return r.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=Tw(e),[r,o]=Sw(t);for(let a=0;a<this.hashCount;a++){const c=this.ye(r,o,a);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Ml extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,t,r,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,Au.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Td(Pe.min(),o,new dt(je),ms(),Ue())}}class Au{constructor(e,t,r,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Au(r,t,Ue(),Ue(),Ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,t,r,o){this.be=e,this.removedTargetIds=t,this.key=r,this.De=o}}class PI{constructor(e,t){this.targetId=e,this.Ce=t}}class NI{constructor(e,t,r=Gt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Aw{constructor(){this.ve=0,this.Fe=xw(),this.Me=Gt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ue(),t=Ue(),r=Ue();return this.Fe.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:xe(38017,{changeType:a})}})),new Au(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=xw()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Qe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class HP{constructor(e){this.Ge=e,this.ze=new Map,this.je=ms(),this.Je=eh(),this.He=eh(),this.Ye=new dt(je)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:xe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,r=e.Ce.count,o=this.ot(t);if(o){const a=o.target;if(sm(a))if(r===0){const c=new ve(a.path);this.et(t,c,nn.newNoDocument(c,Pe.min()))}else Qe(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const d=this.ut(e),p=d?this.ct(d,e,c):1;if(p!==0){this.it(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:a=0}=t;let c,d;try{c=oi(r).toUint8Array()}catch(p){if(p instanceof rI)return ya("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new lg(c,o,a)}catch(p){return ya(p instanceof Ml?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.ge===0?null:d}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let o=0;return r.forEach((a=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.et(t,a,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((a,c)=>{const d=this.ot(c);if(d){if(a.current&&sm(d.target)){const p=new ve(d.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,nn.newNoDocument(p,e))}a.Be&&(t.set(c,a.ke()),a.qe())}}));let r=Ue();this.He.forEach(((a,c)=>{let d=!0;c.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(a))})),this.je.forEach(((a,c)=>c.setReadTime(e)));const o=new Td(e,t,this.Ye,this.je,r);return this.je=ms(),this.Je=eh(),this.He=eh(),this.Ye=new dt(je),o}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Aw,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Nt(je),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Nt(je),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||de("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Aw),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function eh(){return new dt(ve.comparator)}function xw(){return new dt(ve.comparator)}const KP={asc:"ASCENDING",desc:"DESCENDING"},GP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},QP={and:"AND",or:"OR"};class XP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function am(n,e){return n.useProto3Json||gd(e)?e:{value:e}}function Gh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function DI(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function JP(n,e){return Gh(n,e.toTimestamp())}function Pr(n){return Qe(!!n,49232),Pe.fromTimestamp((function(t){const r=ii(t);return new ot(r.seconds,r.nanos)})(n))}function ug(n,e){return lm(n,e).canonicalString()}function lm(n,e){const t=(function(o){return new nt(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function OI(n){const e=nt.fromString(n);return Qe(jI(e),10190,{key:e.toString()}),e}function um(n,e){return ug(n.databaseId,e.path)}function kp(n,e){const t=OI(e);if(t.get(1)!==n.databaseId.projectId)throw new he(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new he(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ve(MI(t))}function LI(n,e){return ug(n.databaseId,e)}function YP(n){const e=OI(n);return e.length===4?nt.emptyPath():MI(e)}function cm(n){return new nt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function MI(n){return Qe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Cw(n,e,t){return{name:um(n,e),fields:t.value.mapValue.fields}}function ZP(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:xe(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(g,v){return g.useProto3Json?(Qe(v===void 0||typeof v=="string",58123),Gt.fromBase64String(v||"")):(Qe(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Gt.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(g){const v=g.code===void 0?J.UNKNOWN:bI(g.code);return new he(v,g.message||"")})(c);t=new NI(r,o,a,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=kp(n,r.document.name),a=Pr(r.document.updateTime),c=r.document.createTime?Pr(r.document.createTime):Pe.min(),d=new wn({mapValue:{fields:r.document.fields}}),p=nn.newFoundDocument(o,a,c,d),g=r.targetIds||[],v=r.removedTargetIds||[];t=new vh(g,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=kp(n,r.document),a=r.readTime?Pr(r.readTime):Pe.min(),c=nn.newNoDocument(o,a),d=r.removedTargetIds||[];t=new vh([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=kp(n,r.document),a=r.removedTargetIds||[];t=new vh([],a,o,null)}else{if(!("filter"in e))return xe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:a}=r,c=new BP(o,a),d=r.targetId;t=new PI(d,c)}}return t}function e2(n,e){let t;if(e instanceof Su)t={update:Cw(n,e.key,e.value)};else if(e instanceof og)t={delete:um(n,e.key)};else if(e instanceof di)t={update:Cw(n,e.key,e.data),updateMask:u2(e.fieldMask)};else{if(!(e instanceof jP))return xe(16599,{Vt:e.type});t={verify:um(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,c){const d=c.transform;if(d instanceof Hh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof cu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof hu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Kh)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw xe(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:JP(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:xe(27497)})(n,e.precondition)),t}function t2(n,e){return n&&n.length>0?(Qe(e!==void 0,14353),n.map((t=>(function(o,a){let c=o.updateTime?Pr(o.updateTime):Pr(a);return c.isEqual(Pe.min())&&(c=Pr(a)),new MP(c,o.transformResults||[])})(t,e)))):[]}function n2(n,e){return{documents:[LI(n,e.path)]}}function r2(n,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=LI(n,o);const a=(function(g){if(g.length!==0)return FI(fr.create(g,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const c=(function(g){if(g.length!==0)return g.map((v=>(function(T){return{field:sa(T.field),direction:o2(T.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=am(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:o}}function s2(n){let e=YP(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Qe(r===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let a=[];t.where&&(a=(function(E){const T=VI(E);return T instanceof fr&&fI(T)?T.getFilters():[T]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((T=>(function(M){return new qh(ia(M.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(M.direction))})(T)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let T;return T=typeof E=="object"?E.value:E,gd(T)?null:T})(t.limit));let p=null;t.startAt&&(p=(function(E){const T=!!E.before,x=E.values||[];return new Wh(x,T)})(t.startAt));let g=null;return t.endAt&&(g=(function(E){const T=!E.before,x=E.values||[];return new Wh(x,T)})(t.endAt)),TP(e,o,c,a,d,"F",p,g)}function i2(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function VI(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ia(t.unaryFilter.field);return Et.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=ia(t.unaryFilter.field);return Et.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ia(t.unaryFilter.field);return Et.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=ia(t.unaryFilter.field);return Et.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xe(61313);default:return xe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Et.create(ia(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xe(58110);default:return xe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return fr.create(t.compositeFilter.filters.map((r=>VI(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return xe(1026)}})(t.compositeFilter.op))})(n):xe(30097,{filter:n})}function o2(n){return KP[n]}function a2(n){return GP[n]}function l2(n){return QP[n]}function sa(n){return{fieldPath:n.canonicalString()}}function ia(n){return Kt.fromServerFormat(n.fieldPath)}function FI(n){return n instanceof Et?(function(t){if(t.op==="=="){if(pw(t.value))return{unaryFilter:{field:sa(t.field),op:"IS_NAN"}};if(fw(t.value))return{unaryFilter:{field:sa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(pw(t.value))return{unaryFilter:{field:sa(t.field),op:"IS_NOT_NAN"}};if(fw(t.value))return{unaryFilter:{field:sa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sa(t.field),op:a2(t.op),value:t.value}}})(n):n instanceof fr?(function(t){const r=t.getFilters().map((o=>FI(o)));return r.length===1?r[0]:{compositeFilter:{op:l2(t.op),filters:r}}})(n):xe(54877,{filter:n})}function u2(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function jI(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e,t,r,o,a=Pe.min(),c=Pe.min(),d=Gt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new Js(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Js(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e){this.yt=e}}function h2(n){const e=s2({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?om(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(){this.Cn=new f2}addToCollectionParentIndex(e,t){return this.Cn.add(t),Z.resolve()}getCollectionParents(e,t){return Z.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Z.resolve()}deleteFieldIndex(e,t){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,t){return Z.resolve()}getDocumentsMatchingTarget(e,t){return Z.resolve(null)}getIndexType(e,t){return Z.resolve(0)}getFieldIndexes(e,t){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,t){return Z.resolve(si.min())}getMinOffsetFromCollectionGroup(e,t){return Z.resolve(si.min())}updateCollectionGroup(e,t,r){return Z.resolve()}updateIndexEntries(e,t){return Z.resolve()}}class f2{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Nt(nt.comparator),a=!o.has(r);return this.index[t]=o.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Nt(nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},UI=41943040;class _n{static withCacheSize(e){return new _n(e,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(UI,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ea(0)}static cr(){return new Ea(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw="LruGarbageCollector",p2=1048576;function bw([n,e],[t,r]){const o=je(n,t);return o===0?je(e,r):o}class m2{constructor(e){this.Ir=e,this.buffer=new Nt(bw),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();bw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class g2{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){de(kw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ba(t)?de(kw,"Ignoring IndexedDB error during garbage collection: ",t):await ka(t)}await this.Vr(3e5)}))}}class y2{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return Z.resolve(md.ce);const r=new m2(t);return this.mr.forEachTarget(e,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(Rw)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Rw):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,o,a,c,d,p,g;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,c=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(r=E,d=Date.now(),this.removeTargets(e,r,t)))).next((E=>(a=E,p=Date.now(),this.removeOrphanedDocuments(e,r)))).next((E=>(g=Date.now(),na()<=Fe.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${o} in `+(d-c)+`ms
	Removed ${a} targets in `+(p-d)+`ms
	Removed ${E} documents in `+(g-p)+`ms
Total Duration: ${g-v}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:E}))))}}function _2(n,e){return new y2(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(){this.changes=new so((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,nn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?Z.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(r!==null&&Yl(r.mutation,o,Nn.empty(),ot.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ue()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ue()){const o=qi();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,r).next((a=>{let c=Ll();return a.forEach(((d,p)=>{c=c.insert(d,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=qi();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ue())))}populateOverlays(e,t,r){const o=[];return r.forEach((a=>{t.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,r,o){let a=ms();const c=Jl(),d=(function(){return Jl()})();return t.forEach(((p,g)=>{const v=r.get(g.key);o.has(g.key)&&(v===void 0||v.mutation instanceof di)?a=a.insert(g.key,g):v!==void 0?(c.set(g.key,v.mutation.getFieldMask()),Yl(v.mutation,g,v.mutation.getFieldMask(),ot.now())):c.set(g.key,Nn.empty())})),this.recalculateAndSaveOverlays(e,a).next((p=>(p.forEach(((g,v)=>c.set(g,v))),t.forEach(((g,v)=>d.set(g,new w2(v,c.get(g)??null)))),d)))}recalculateAndSaveOverlays(e,t){const r=Jl();let o=new dt(((c,d)=>c-d)),a=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((p=>{const g=t.get(p);if(g===null)return;let v=r.get(p)||Nn.empty();v=d.applyToLocalView(g,v),r.set(p,v);const E=(o.get(d.batchId)||Ue()).add(p);o=o.insert(d.batchId,E)}))})).next((()=>{const c=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),g=p.key,v=p.value,E=II();v.forEach((T=>{if(!a.has(T)){const x=RI(t.get(T),r.get(T));x!==null&&E.set(T,x),a=a.add(T)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,E))}return Z.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,o){return(function(c){return ve.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):yI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next((a=>{const c=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-a.size):Z.resolve(qi());let d=ou,p=a;return c.next((g=>Z.forEach(g,((v,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),a.get(v)?Z.resolve():this.remoteDocumentCache.getEntry(e,v).next((T=>{p=p.insert(v,T)}))))).next((()=>this.populateOverlays(e,g,a))).next((()=>this.computeViews(e,p,g,Ue()))).next((v=>({batchId:d,changes:EI(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next((r=>{let o=Ll();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const a=t.collectionGroup;let c=Ll();return this.indexManager.getCollectionParents(e,a).next((d=>Z.forEach(d,(p=>{const g=(function(E,T){return new Tu(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,p.child(a));return this.getDocumentsMatchingCollectionQuery(e,g,r,o).next((v=>{v.forEach(((E,T)=>{c=c.insert(E,T)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,o)))).next((c=>{a.forEach(((p,g)=>{const v=g.getKey();c.get(v)===null&&(c=c.insert(v,nn.newInvalidDocument(v)))}));let d=Ll();return c.forEach(((p,g)=>{const v=a.get(p);v!==void 0&&Yl(v.mutation,g,Nn.empty(),ot.now()),wd(t,g)&&(d=d.insert(p,g))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Z.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Pr(o.createTime)}})(t)),Z.resolve()}getNamedQuery(e,t){return Z.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:h2(o.bundledQuery),readTime:Pr(o.readTime)}})(t)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(){this.overlays=new dt(ve.comparator),this.qr=new Map}getOverlay(e,t){return Z.resolve(this.overlays.get(t))}getOverlays(e,t){const r=qi();return Z.forEach(t,(o=>this.getOverlay(e,o).next((a=>{a!==null&&r.set(o,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((o,a)=>{this.St(e,t,a)})),Z.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),Z.resolve()}getOverlaysForCollection(e,t,r){const o=qi(),a=t.length+1,c=new ve(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===a&&p.largestBatchId>r&&o.set(p.getKey(),p)}return Z.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let a=new dt(((g,v)=>g-v));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>r){let v=a.get(g.largestBatchId);v===null&&(v=qi(),a=a.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const d=qi(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,v)=>d.set(g,v))),!(d.size()>=o)););return Z.resolve(d)}St(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new $P(t,r));let a=this.qr.get(t);a===void 0&&(a=Ue(),this.qr.set(t,a)),this.qr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(){this.sessionToken=Gt.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(){this.Qr=new Nt(jt.$r),this.Ur=new Nt(jt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new jt(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new jt(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new ve(new nt([])),r=new jt(t,e),o=new jt(t,e+1),a=[];return this.Ur.forEachInRange([r,o],(c=>{this.Gr(c),a.push(c.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ve(new nt([])),r=new jt(t,e),o=new jt(t,e+1);let a=Ue();return this.Ur.forEachInRange([r,o],(c=>{a=a.add(c.key)})),a}containsKey(e){const t=new jt(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class jt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ve.comparator(e.key,t.key)||je(e.Yr,t.Yr)}static Kr(e,t){return je(e.Yr,t.Yr)||ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Nt(jt.$r)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new UP(a,t,r,o);this.mutationQueue.push(c);for(const d of o)this.Zr=this.Zr.add(new jt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return Z.resolve(c)}lookupMutationBatch(e,t){return Z.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.ei(r),a=o<0?0:o;return Z.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?eg:this.tr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new jt(t,0),o=new jt(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,o],(c=>{const d=this.Xr(c.Yr);a.push(d)})),Z.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Nt(je);return t.forEach((o=>{const a=new jt(o,0),c=new jt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,c],(d=>{r=r.add(d.Yr)}))})),Z.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let a=r;ve.isDocumentKey(a)||(a=a.child(""));const c=new jt(new ve(a),0);let d=new Nt(je);return this.Zr.forEachWhile((p=>{const g=p.key.path;return!!r.isPrefixOf(g)&&(g.length===o&&(d=d.add(p.Yr)),!0)}),c),Z.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((r=>{const o=this.Xr(r);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Qe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Z.forEach(t.mutations,(o=>{const a=new jt(o.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new jt(t,0),o=this.Zr.firstAfterOrEqual(r);return Z.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e){this.ri=e,this.docs=(function(){return new dt(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),a=o?o.size:0,c=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Z.resolve(r?r.document.mutableCopy():nn.newInvalidDocument(t))}getEntries(e,t){let r=ms();return t.forEach((o=>{const a=this.docs.get(o);r=r.insert(o,a?a.document.mutableCopy():nn.newInvalidDocument(o))})),Z.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let a=ms();const c=t.path,d=new ve(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:g,value:{document:v}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||tP(eP(v),r)<=0||(o.has(v.key)||wd(t,v))&&(a=a.insert(v.key,v.mutableCopy()))}return Z.resolve(a)}getAllFromCollectionGroup(e,t,r,o){xe(9500)}ii(e,t){return Z.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new C2(this)}getSize(e){return Z.resolve(this.size)}}class C2 extends v2{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)})),Z.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e){this.persistence=e,this.si=new so((t=>rg(t)),sg),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this.oi=0,this._i=new cg,this.targetCount=0,this.ai=Ea.ur()}forEachTarget(e,t){return this.si.forEach(((r,o)=>t(o))),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),Z.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ea(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Z.resolve()}updateTargetData(e,t){return this.Pr(t),Z.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,t,r){let o=0;const a=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.si.delete(c),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),Z.waitFor(a).next((()=>o))}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return Z.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),Z.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach((c=>{a.push(o.markPotentiallyOrphaned(e,c))})),Z.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Z.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return Z.resolve(r)}containsKey(e,t){return Z.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e,t){this.ui={},this.overlays={},this.ci=new md(0),this.li=!1,this.li=!0,this.hi=new S2,this.referenceDelegate=e(this),this.Pi=new R2(this),this.indexManager=new d2,this.remoteDocumentCache=(function(o){return new x2(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new c2(t),this.Ii=new I2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new T2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new A2(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){de("MemoryPersistence","Starting transaction:",e);const o=new k2(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((a=>this.referenceDelegate.di(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Ai(e,t){return Z.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class k2 extends rP{constructor(e){super(),this.currentSequenceNumber=e}}class hg{constructor(e){this.persistence=e,this.Ri=new cg,this.Vi=null}static mi(e){return new hg(e)}get fi(){if(this.Vi)return this.Vi;throw xe(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),Z.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),Z.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Z.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.fi,(r=>{const o=ve.fromPath(r);return this.gi(e,o).next((a=>{a||t.removeEntry(o,Pe.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return Z.or([()=>Z.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Qh{constructor(e,t){this.persistence=e,this.pi=new so((r=>oP(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=_2(this,t)}static mi(e,t){return new Qh(e,t)}Ei(){}di(e){return Z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((o=>r+o))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return Z.forEach(this.pi,((r,o)=>this.br(e,r,o).next((a=>a?Z.resolve():t(o)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.ii(e,(c=>this.br(e,c,t).next((d=>{d||(r++,a.removeEntry(c,Pe.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Z.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),Z.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Z.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=gh(e.data.value)),t}br(e,t,r){return Z.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return Z.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=o}static As(e,t){let r=Ue(),o=Ue();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new dg(e,t.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return tC()?8:sP(rn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,o){const a={result:null};return this.ys(e,t).next((c=>{a.result=c})).next((()=>{if(!a.result)return this.ws(e,t,o,r).next((c=>{a.result=c}))})).next((()=>{if(a.result)return;const c=new b2;return this.Ss(e,t,c).next((d=>{if(a.result=d,this.Vs)return this.bs(e,t,c,d.size)}))})).next((()=>a.result))}bs(e,t,r,o){return r.documentReadCount<this.fs?(na()<=Fe.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",ra(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Z.resolve()):(na()<=Fe.DEBUG&&de("QueryEngine","Query:",ra(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(na()<=Fe.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",ra(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,br(t))):Z.resolve())}ys(e,t){if(_w(t))return Z.resolve(null);let r=br(t);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=om(t,null,"F"),r=br(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const c=Ue(...a);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,r).next((p=>{const g=this.Ds(t,d);return this.Cs(t,g,c,p.readTime)?this.ys(e,om(t,null,"F")):this.vs(e,g,t,p)}))))})))))}ws(e,t,r,o){return _w(t)||o.isEqual(Pe.min())?Z.resolve(null):this.ps.getDocuments(e,r).next((a=>{const c=this.Ds(t,a);return this.Cs(t,c,r,o)?Z.resolve(null):(na()<=Fe.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ra(t)),this.vs(e,c,t,Zb(o,ou)).next((d=>d)))}))}Ds(e,t){let r=new Nt(vI(e));return t.forEach(((o,a)=>{wd(e,a)&&(r=r.add(a))})),r}Cs(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}Ss(e,t,r){return na()<=Fe.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",ra(t)),this.ps.getDocumentsMatchingQuery(e,t,si.min(),r)}vs(e,t,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next((a=>(t.forEach((c=>{a=a.insert(c.key,c)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg="LocalStore",N2=3e8;class D2{constructor(e,t,r,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new dt(je),this.xs=new so((a=>rg(a)),sg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new E2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function O2(n,e,t,r){return new D2(n,e,t,r)}async function BI(n,e){const t=Ne(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next((a=>(o=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const c=[],d=[];let p=Ue();for(const g of o){c.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}for(const g of a){d.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(r,p).next((g=>({Ls:g,removedBatchIds:c,addedBatchIds:d})))}))}))}function L2(n,e){const t=Ne(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,p,g,v){const E=g.batch,T=E.keys();let x=Z.resolve();return T.forEach((M=>{x=x.next((()=>v.getEntry(p,M))).next((j=>{const V=g.docVersions.get(M);Qe(V!==null,48541),j.version.compareTo(V)<0&&(E.applyToRemoteDocument(j,g),j.isValidDocument()&&(j.setReadTime(g.commitVersion),v.addEntry(j)))}))})),x.next((()=>d.mutationQueue.removeMutationBatch(p,E)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let p=Ue();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(p=p.add(d.batch.mutations[g].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(r,o)))}))}function zI(n){const e=Ne(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function M2(n,e){const t=Ne(n),r=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const d=[];e.targetChanges.forEach(((v,E)=>{const T=o.get(E);if(!T)return;d.push(t.Pi.removeMatchingKeys(a,v.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(a,v.addedDocuments,E))));let x=T.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?x=x.withResumeToken(Gt.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):v.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(v.resumeToken,r)),o=o.insert(E,x),(function(j,V,H){return j.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=N2?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(T,x,v)&&d.push(t.Pi.updateTargetData(a,x))}));let p=ms(),g=Ue();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))})),d.push(V2(a,c,e.documentUpdates).next((v=>{p=v.ks,g=v.qs}))),!r.isEqual(Pe.min())){const v=t.Pi.getLastRemoteSnapshotVersion(a).next((E=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));d.push(v)}return Z.waitFor(d).next((()=>c.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,p,g))).next((()=>p))})).then((a=>(t.Ms=o,a)))}function V2(n,e,t){let r=Ue(),o=Ue();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let c=ms();return t.forEach(((d,p)=>{const g=a.get(d);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(Pe.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):de(fg,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",p.version)})),{ks:c,qs:o}}))}function F2(n,e){const t=Ne(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=eg),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function j2(n,e){const t=Ne(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return t.Pi.getTargetData(r,e).next((a=>a?(o=a,Z.resolve(o)):t.Pi.allocateTargetId(r).next((c=>(o=new Js(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=t.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function hm(n,e,t){const r=Ne(n),o=r.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(c=>r.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!ba(c))throw c;de(fg,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function Pw(n,e,t){const r=Ne(n);let o=Pe.min(),a=Ue();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,g,v){const E=Ne(p),T=E.xs.get(v);return T!==void 0?Z.resolve(E.Ms.get(T)):E.Pi.getTargetData(g,v)})(r,c,br(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,d.targetId).next((p=>{a=p}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,e,t?o:Pe.min(),t?a:Ue()))).next((d=>(U2(r,AP(e),d),{documents:d,Qs:a})))))}function U2(n,e,t){let r=n.Os.get(e)||Pe.min();t.forEach(((o,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.Os.set(e,r)}class Nw{constructor(){this.activeTargetIds=PP()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $2{constructor(){this.Mo=new Nw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Nw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw="ConnectivityMonitor";class Ow{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){de(Dw,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){de(Dw,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let th=null;function dm(){return th===null?th=(function(){return 268435456+Math.round(2147483648*Math.random())})():th++,"0x"+th.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bp="RestConnection",z2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class W2{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===Bh?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,t,r,o,a){const c=dm(),d=this.zo(e,t.toUriEncodedString());de(bp,`Sending RPC '${e}' ${c}:`,d,r);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,a);const{host:g}=new URL(d),v=Aa(g);return this.Jo(e,d,p,r,v).then((E=>(de(bp,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw ya(bp,`RPC '${e}' ${c} failed with error: `,E,"url: ",d,"request:",r),E}))}Ho(e,t,r,o,a,c){return this.Go(e,t,r,o,a)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ra})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,a)=>e[a]=o)),r&&r.headers.forEach(((o,a)=>e[a]=o))}zo(e,t){const r=z2[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="WebChannelConnection";class H2 extends W2{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,o,a){const c=dm();return new Promise(((d,p)=>{const g=new HE;g.setWithCredentials(!0),g.listenOnce(KE.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case mh.NO_ERROR:const E=g.getResponseJson();de(en,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),d(E);break;case mh.TIMEOUT:de(en,`RPC '${e}' ${c} timed out`),p(new he(J.DEADLINE_EXCEEDED,"Request time out"));break;case mh.HTTP_ERROR:const T=g.getStatus();if(de(en,`RPC '${e}' ${c} failed with status:`,T,"response text:",g.getResponseText()),T>0){let x=g.getResponseJson();Array.isArray(x)&&(x=x[0]);const M=x?.error;if(M&&M.status&&M.message){const j=(function(H){const F=H.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(F)>=0?F:J.UNKNOWN})(M.status);p(new he(j,M.message))}else p(new he(J.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new he(J.UNAVAILABLE,"Connection failed."));break;default:xe(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{de(en,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(o);de(en,`RPC '${e}' ${c} sending request:`,o),g.send(t,"POST",v,r,15)}))}T_(e,t,r){const o=dm(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=XE(),d=QE(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const v=a.join("");de(en,`Creating RPC '${e}' stream ${o}: ${v}`,p);const E=c.createWebChannel(v,p);this.I_(E);let T=!1,x=!1;const M=new q2({Yo:V=>{x?de(en,`Not sending because RPC '${e}' stream ${o} is closed:`,V):(T||(de(en,`Opening RPC '${e}' stream ${o} transport.`),E.open(),T=!0),de(en,`RPC '${e}' stream ${o} sending:`,V),E.send(V))},Zo:()=>E.close()}),j=(V,H,F)=>{V.listen(H,(X=>{try{F(X)}catch(re){setTimeout((()=>{throw re}),0)}}))};return j(E,Ol.EventType.OPEN,(()=>{x||(de(en,`RPC '${e}' stream ${o} transport opened.`),M.o_())})),j(E,Ol.EventType.CLOSE,(()=>{x||(x=!0,de(en,`RPC '${e}' stream ${o} transport closed`),M.a_(),this.E_(E))})),j(E,Ol.EventType.ERROR,(V=>{x||(x=!0,ya(en,`RPC '${e}' stream ${o} transport errored. Name:`,V.name,"Message:",V.message),M.a_(new he(J.UNAVAILABLE,"The operation could not be completed")))})),j(E,Ol.EventType.MESSAGE,(V=>{if(!x){const H=V.data[0];Qe(!!H,16349);const F=H,X=F?.error||F[0]?.error;if(X){de(en,`RPC '${e}' stream ${o} received error:`,X);const re=X.status;let _e=(function(A){const R=wt[A];if(R!==void 0)return bI(R)})(re),ge=X.message;_e===void 0&&(_e=J.INTERNAL,ge="Unknown error status: "+re+" with message "+X.message),x=!0,M.a_(new he(_e,ge)),E.close()}else de(en,`RPC '${e}' stream ${o} received:`,H),M.u_(H)}})),j(d,GE.STAT_EVENT,(V=>{V.stat===Zp.PROXY?de(en,`RPC '${e}' stream ${o} detected buffering proxy`):V.stat===Zp.NOPROXY&&de(en,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{M.__()}),0),M}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Pp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sd(n){return new XP(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e,t,r=1e3,o=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=o,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-r);o>0&&de("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw="PersistentStream";class qI{constructor(e,t,r,o,a,c,d,p){this.Mi=e,this.S_=r,this.b_=o,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new WI(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(ps(t.toString()),ps("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===t&&this.G_(r,o)}),(r=>{e((()=>{const o=new he(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return de(Lw,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(de(Lw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class K2 extends qI{constructor(e,t,r,o,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,c),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=ZP(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Pe.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?Pe.min():c.readTime?Pr(c.readTime):Pe.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=cm(this.serializer),t.addTarget=(function(a,c){let d;const p=c.target;if(d=sm(p)?{documents:n2(a,p)}:{query:r2(a,p).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=DI(a,c.resumeToken);const g=am(a,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(Pe.min())>0){d.readTime=Gh(a,c.snapshotVersion.toTimestamp());const g=am(a,c.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const r=i2(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=cm(this.serializer),t.removeTarget=e,this.q_(t)}}class G2 extends qI{constructor(e,t,r,o,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,c),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=t2(e.writeResults,e.commitTime),r=Pr(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=cm(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>e2(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{}class X2 extends Q2{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new he(J.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,c])=>this.connection.Go(e,lm(t,r),o,a,c))).catch((a=>{throw a.name==="FirebaseError"?(a.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new he(J.UNKNOWN,a.toString())}))}Ho(e,t,r,o,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,lm(t,r),o,c,d,a))).catch((c=>{throw c.name==="FirebaseError"?(c.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new he(J.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class J2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ps(t),this.aa=!1):de("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to="RemoteStore";class Y2{constructor(e,t,r,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{io(this)&&(de(to,"Restarting streams for network reachability change."),await(async function(p){const g=Ne(p);g.Ea.add(4),await xu(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Ad(g)})(this))}))})),this.Ra=new J2(r,o)}}async function Ad(n){if(io(n))for(const e of n.da)await e(!0)}async function xu(n){for(const e of n.da)await e(!1)}function HI(n,e){const t=Ne(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),yg(t)?gg(t):Pa(t).O_()&&mg(t,e))}function pg(n,e){const t=Ne(n),r=Pa(t);t.Ia.delete(e),r.O_()&&KI(t,e),t.Ia.size===0&&(r.O_()?r.L_():io(t)&&t.Ra.set("Unknown"))}function mg(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Pa(n).Y_(e)}function KI(n,e){n.Va.Ue(e),Pa(n).Z_(e)}function gg(n){n.Va=new HP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Pa(n).start(),n.Ra.ua()}function yg(n){return io(n)&&!Pa(n).x_()&&n.Ia.size>0}function io(n){return Ne(n).Ea.size===0}function GI(n){n.Va=void 0}async function Z2(n){n.Ra.set("Online")}async function eN(n){n.Ia.forEach(((e,t)=>{mg(n,e)}))}async function tN(n,e){GI(n),yg(n)?(n.Ra.ha(e),gg(n)):n.Ra.set("Unknown")}async function nN(n,e,t){if(n.Ra.set("Online"),e instanceof NI&&e.state===2&&e.cause)try{await(async function(o,a){const c=a.cause;for(const d of a.targetIds)o.Ia.has(d)&&(await o.remoteSyncer.rejectListen(d,c),o.Ia.delete(d),o.Va.removeTarget(d))})(n,e)}catch(r){de(to,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Xh(n,r)}else if(e instanceof vh?n.Va.Ze(e):e instanceof PI?n.Va.st(e):n.Va.tt(e),!t.isEqual(Pe.min()))try{const r=await zI(n.localStore);t.compareTo(r)>=0&&await(function(a,c){const d=a.Va.Tt(c);return d.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const v=a.Ia.get(g);v&&a.Ia.set(g,v.withResumeToken(p.resumeToken,c))}})),d.targetMismatches.forEach(((p,g)=>{const v=a.Ia.get(p);if(!v)return;a.Ia.set(p,v.withResumeToken(Gt.EMPTY_BYTE_STRING,v.snapshotVersion)),KI(a,p);const E=new Js(v.target,p,g,v.sequenceNumber);mg(a,E)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(r){de(to,"Failed to raise snapshot:",r),await Xh(n,r)}}async function Xh(n,e,t){if(!ba(e))throw e;n.Ea.add(1),await xu(n),n.Ra.set("Offline"),t||(t=()=>zI(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{de(to,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Ad(n)}))}function QI(n,e){return e().catch((t=>Xh(n,t,e)))}async function xd(n){const e=Ne(n),t=li(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:eg;for(;rN(e);)try{const o=await F2(e.localStore,r);if(o===null){e.Ta.length===0&&t.L_();break}r=o.batchId,sN(e,o)}catch(o){await Xh(e,o)}XI(e)&&JI(e)}function rN(n){return io(n)&&n.Ta.length<10}function sN(n,e){n.Ta.push(e);const t=li(n);t.O_()&&t.X_&&t.ea(e.mutations)}function XI(n){return io(n)&&!li(n).x_()&&n.Ta.length>0}function JI(n){li(n).start()}async function iN(n){li(n).ra()}async function oN(n){const e=li(n);for(const t of n.Ta)e.ea(t.mutations)}async function aN(n,e,t){const r=n.Ta.shift(),o=ag.from(r,e,t);await QI(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await xd(n)}async function lN(n,e){e&&li(n).X_&&await(async function(r,o){if((function(c){return zP(c)&&c!==J.ABORTED})(o.code)){const a=r.Ta.shift();li(r).B_(),await QI(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,o))),await xd(r)}})(n,e),XI(n)&&JI(n)}async function Mw(n,e){const t=Ne(n);t.asyncQueue.verifyOperationInProgress(),de(to,"RemoteStore received new credentials");const r=io(t);t.Ea.add(3),await xu(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Ad(t)}async function uN(n,e){const t=Ne(n);e?(t.Ea.delete(2),await Ad(t)):e||(t.Ea.add(2),await xu(t),t.Ra.set("Unknown"))}function Pa(n){return n.ma||(n.ma=(function(t,r,o){const a=Ne(t);return a.sa(),new K2(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Xo:Z2.bind(null,n),t_:eN.bind(null,n),r_:tN.bind(null,n),H_:nN.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),yg(n)?gg(n):n.Ra.set("Unknown")):(await n.ma.stop(),GI(n))}))),n.ma}function li(n){return n.fa||(n.fa=(function(t,r,o){const a=Ne(t);return a.sa(),new G2(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:iN.bind(null,n),r_:lN.bind(null,n),ta:oN.bind(null,n),na:aN.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await xd(n)):(await n.fa.stop(),n.Ta.length>0&&(de(to,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e,t,r,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=a,this.deferred=new ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,a){const c=Date.now()+r,d=new _g(e,t,c,o,a);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vg(n,e){if(ps("AsyncQueue",`${e}: ${n}`),ba(n))return new he(J.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{static emptySet(e){return new fa(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ve.comparator(t.key,r.key):(t,r)=>ve.comparator(t.key,r.key),this.keyedMap=Ll(),this.sortedSet=new dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof fa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=r.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new fa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(){this.ga=new dt(ve.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):xe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Ia{constructor(e,t,r,o,a,c,d,p,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,r,o,a){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new Ia(e,t,fa.emptySet(t),c,r,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class hN{constructor(){this.queries=Fw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const o=Ne(t),a=o.queries;o.queries=Fw(),a.forEach(((c,d)=>{for(const p of d.Sa)p.onError(r)}))})(this,new he(J.ABORTED,"Firestore shutting down"))}}function Fw(){return new so((n=>_I(n)),vd)}async function YI(n,e){const t=Ne(n);let r=3;const o=e.query;let a=t.queries.get(o);a?!a.ba()&&e.Da()&&(r=2):(a=new cN,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await t.onListen(o,!0);break;case 1:a.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const d=vg(c,`Initialization of query '${ra(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&wg(t)}async function ZI(n,e){const t=Ne(n),r=e.query;let o=3;const a=t.queries.get(r);if(a){const c=a.Sa.indexOf(e);c>=0&&(a.Sa.splice(c,1),a.Sa.length===0?o=e.Da()?0:1:!a.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function dN(n,e){const t=Ne(n);let r=!1;for(const o of e){const a=o.query,c=t.queries.get(a);if(c){for(const d of c.Sa)d.Fa(o)&&(r=!0);c.wa=o}}r&&wg(t)}function fN(n,e,t){const r=Ne(n),o=r.queries.get(e);if(o)for(const a of o.Sa)a.onError(t);r.queries.delete(e)}function wg(n){n.Ca.forEach((e=>{e.next()}))}var fm,jw;(jw=fm||(fm={})).Ma="default",jw.Cache="cache";class eT{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new Ia(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ia.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==fm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e){this.key=e}}class nT{constructor(e){this.key=e}}class pN{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ue(),this.mutatedKeys=Ue(),this.eu=vI(e),this.tu=new fa(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new Vw,o=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,c=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,E)=>{const T=o.get(v),x=wd(this.query,E)?E:null,M=!!T&&this.mutatedKeys.has(T.key),j=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let V=!1;T&&x?T.data.isEqual(x.data)?M!==j&&(r.track({type:3,doc:x}),V=!0):this.su(T,x)||(r.track({type:2,doc:x}),V=!0,(p&&this.eu(x,p)>0||g&&this.eu(x,g)<0)&&(d=!0)):!T&&x?(r.track({type:0,doc:x}),V=!0):T&&!x&&(r.track({type:1,doc:T}),V=!0,(p||g)&&(d=!0)),V&&(x?(c=c.add(x),a=j?a.add(v):a.delete(v)):(c=c.delete(v),a=a.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),a=a.delete(v.key),r.track({type:1,doc:v})}return{tu:c,iu:r,Cs:d,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,E)=>(function(x,M){const j=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe(20277,{Rt:V})}};return j(x)-j(M)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(r),o=o??!1;const d=t&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,g=p!==this.Za;return this.Za=p,c.length!==0||g?{snapshot:new Ia(this.query,e.tu,a,c,e.mutatedKeys,p===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Vw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ue(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new nT(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new tT(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ue();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ia.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Eg="SyncEngine";class mN{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class gN{constructor(e){this.key=e,this.hu=!1}}class yN{constructor(e,t,r,o,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new so((d=>_I(d)),vd),this.Iu=new Map,this.Eu=new Set,this.du=new dt(ve.comparator),this.Au=new Map,this.Ru=new cg,this.Vu={},this.mu=new Map,this.fu=Ea.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function _N(n,e,t=!0){const r=lT(n);let o;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.lu()):o=await rT(r,e,t,!0),o}async function vN(n,e){const t=lT(n);await rT(t,e,!0,!1)}async function rT(n,e,t,r){const o=await j2(n.localStore,br(e)),a=o.targetId,c=n.sharedClientState.addLocalQueryTarget(a,t);let d;return r&&(d=await wN(n,e,a,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&HI(n.remoteStore,o),d}async function wN(n,e,t,r,o){n.pu=(E,T,x)=>(async function(j,V,H,F){let X=V.view.ru(H);X.Cs&&(X=await Pw(j.localStore,V.query,!1).then((({documents:b})=>V.view.ru(b,X))));const re=F&&F.targetChanges.get(V.targetId),_e=F&&F.targetMismatches.get(V.targetId)!=null,ge=V.view.applyChanges(X,j.isPrimaryClient,re,_e);return $w(j,V.targetId,ge.au),ge.snapshot})(n,E,T,x);const a=await Pw(n.localStore,e,!0),c=new pN(e,a.Qs),d=c.ru(a.documents),p=Au.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",o),g=c.applyChanges(d,n.isPrimaryClient,p);$w(n,t,g.au);const v=new mN(e,t,c);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),g.snapshot}async function EN(n,e,t){const r=Ne(n),o=r.Tu.get(e),a=r.Iu.get(o.targetId);if(a.length>1)return r.Iu.set(o.targetId,a.filter((c=>!vd(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await hm(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),t&&pg(r.remoteStore,o.targetId),pm(r,o.targetId)})).catch(ka)):(pm(r,o.targetId),await hm(r.localStore,o.targetId,!0))}async function IN(n,e){const t=Ne(n),r=t.Tu.get(e),o=t.Iu.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),pg(t.remoteStore,r.targetId))}async function TN(n,e,t){const r=bN(n);try{const o=await(function(c,d){const p=Ne(c),g=ot.now(),v=d.reduce(((x,M)=>x.add(M.key)),Ue());let E,T;return p.persistence.runTransaction("Locally write mutations","readwrite",(x=>{let M=ms(),j=Ue();return p.Ns.getEntries(x,v).next((V=>{M=V,M.forEach(((H,F)=>{F.isValidDocument()||(j=j.add(H))}))})).next((()=>p.localDocuments.getOverlayedDocuments(x,M))).next((V=>{E=V;const H=[];for(const F of d){const X=FP(F,E.get(F.key).overlayedDocument);X!=null&&H.push(new di(F.key,X,cI(X.value.mapValue),Kn.exists(!0)))}return p.mutationQueue.addMutationBatch(x,g,H,d)})).next((V=>{T=V;const H=V.applyToLocalDocumentSet(E,j);return p.documentOverlayCache.saveOverlays(x,V.batchId,H)}))})).then((()=>({batchId:T.batchId,changes:EI(E)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(c,d,p){let g=c.Vu[c.currentUser.toKey()];g||(g=new dt(je)),g=g.insert(d,p),c.Vu[c.currentUser.toKey()]=g})(r,o.batchId,t),await Cu(r,o.changes),await xd(r.remoteStore)}catch(o){const a=vg(o,"Failed to persist write");t.reject(a)}}async function sT(n,e){const t=Ne(n);try{const r=await M2(t.localStore,e);e.targetChanges.forEach(((o,a)=>{const c=t.Au.get(a);c&&(Qe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?Qe(c.hu,14607):o.removedDocuments.size>0&&(Qe(c.hu,42227),c.hu=!1))})),await Cu(t,r,e)}catch(r){await ka(r)}}function Uw(n,e,t){const r=Ne(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.Tu.forEach(((a,c)=>{const d=c.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(c,d){const p=Ne(c);p.onlineState=d;let g=!1;p.queries.forEach(((v,E)=>{for(const T of E.Sa)T.va(d)&&(g=!0)})),g&&wg(p)})(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function SN(n,e,t){const r=Ne(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Au.get(e),a=o&&o.key;if(a){let c=new dt(ve.comparator);c=c.insert(a,nn.newNoDocument(a,Pe.min()));const d=Ue().add(a),p=new Td(Pe.min(),new Map,new dt(je),c,d);await sT(r,p),r.du=r.du.remove(a),r.Au.delete(e),Ig(r)}else await hm(r.localStore,e,!1).then((()=>pm(r,e,t))).catch(ka)}async function AN(n,e){const t=Ne(n),r=e.batch.batchId;try{const o=await L2(t.localStore,e);oT(t,r,null),iT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Cu(t,o)}catch(o){await ka(o)}}async function xN(n,e,t){const r=Ne(n);try{const o=await(function(c,d){const p=Ne(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let v;return p.mutationQueue.lookupMutationBatch(g,d).next((E=>(Qe(E!==null,37113),v=E.keys(),p.mutationQueue.removeMutationBatch(g,E)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,v,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v))).next((()=>p.localDocuments.getDocuments(g,v)))}))})(r.localStore,e);oT(r,e,t),iT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Cu(r,o)}catch(o){await ka(o)}}function iT(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function oT(n,e,t){const r=Ne(n);let o=r.Vu[r.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function pm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||aT(n,r)}))}function aT(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(pg(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Ig(n))}function $w(n,e,t){for(const r of t)r instanceof tT?(n.Ru.addReference(r.key,e),CN(n,r)):r instanceof nT?(de(Eg,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||aT(n,r.key)):xe(19791,{wu:r})}function CN(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(de(Eg,"New document in limbo: "+t),n.Eu.add(r),Ig(n))}function Ig(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ve(nt.fromString(e)),r=n.fu.next();n.Au.set(r,new gN(t)),n.du=n.du.insert(t,r),HI(n.remoteStore,new Js(br(_d(t.path)),r,"TargetPurposeLimboResolution",md.ce))}}async function Cu(n,e,t){const r=Ne(n),o=[],a=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((d,p)=>{c.push(r.pu(p,e,t).then((g=>{if((g||t)&&r.isPrimaryClient){const v=g?!g.fromCache:t?.targetChanges.get(p.targetId)?.current;r.sharedClientState.updateQueryState(p.targetId,v?"current":"not-current")}if(g){o.push(g);const v=dg.As(p.targetId,g);a.push(v)}})))})),await Promise.all(c),r.Pu.H_(o),await(async function(p,g){const v=Ne(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>Z.forEach(g,(T=>Z.forEach(T.Es,(x=>v.persistence.referenceDelegate.addReference(E,T.targetId,x))).next((()=>Z.forEach(T.ds,(x=>v.persistence.referenceDelegate.removeReference(E,T.targetId,x)))))))))}catch(E){if(!ba(E))throw E;de(fg,"Failed to update sequence numbers: "+E)}for(const E of g){const T=E.targetId;if(!E.fromCache){const x=v.Ms.get(T),M=x.snapshotVersion,j=x.withLastLimboFreeSnapshotVersion(M);v.Ms=v.Ms.insert(T,j)}}})(r.localStore,a))}async function RN(n,e){const t=Ne(n);if(!t.currentUser.isEqual(e)){de(Eg,"User change. New user:",e.toKey());const r=await BI(t.localStore,e);t.currentUser=e,(function(a,c){a.mu.forEach((d=>{d.forEach((p=>{p.reject(new he(J.CANCELLED,c))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Cu(t,r.Ls)}}function kN(n,e){const t=Ne(n),r=t.Au.get(e);if(r&&r.hu)return Ue().add(r.key);{let o=Ue();const a=t.Iu.get(e);if(!a)return o;for(const c of a){const d=t.Tu.get(c);o=o.unionWith(d.view.nu)}return o}}function lT(n){const e=Ne(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=sT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=SN.bind(null,e),e.Pu.H_=dN.bind(null,e.eventManager),e.Pu.yu=fN.bind(null,e.eventManager),e}function bN(n){const e=Ne(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=AN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xN.bind(null,e),e}class Jh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Sd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return O2(this.persistence,new P2,e.initialUser,this.serializer)}Cu(e){return new $I(hg.mi,this.serializer)}Du(e){return new $2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Jh.provider={build:()=>new Jh};class PN extends Jh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Qe(this.persistence.referenceDelegate instanceof Qh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new g2(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new $I((r=>Qh.mi(r,t)),this.serializer)}}class mm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Uw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=RN.bind(null,this.syncEngine),await uN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new hN})()}createDatastore(e){const t=Sd(e.databaseInfo.databaseId),r=(function(a){return new H2(a)})(e.databaseInfo);return(function(a,c,d,p){return new X2(a,c,d,p)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,o,a,c,d){return new Y2(r,o,a,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>Uw(this.syncEngine,t,0)),(function(){return Ow.v()?new Ow:new B2})())}createSyncEngine(e,t){return(function(o,a,c,d,p,g,v){const E=new yN(o,a,c,d,p,g);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Ne(t);de(to,"RemoteStore shutting down."),r.Ea.add(5),await xu(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}mm.provider={build:()=>new mm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ps("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ui="FirestoreClient";class NN{constructor(e,t,r,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=tn.UNAUTHENTICATED,this.clientId=Zm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async c=>{de(ui,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(de(ui,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=vg(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Np(n,e){n.asyncQueue.verifyOperationInProgress(),de(ui,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async o=>{r.isEqual(o)||(await BI(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Bw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await DN(n);de(ui,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>Mw(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,o)=>Mw(e.remoteStore,o))),n._onlineComponents=e}async function DN(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){de(ui,"Using user provided OfflineComponentProvider");try{await Np(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===J.FAILED_PRECONDITION||o.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;ya("Error using user provided cache. Falling back to memory cache: "+t),await Np(n,new Jh)}}else de(ui,"Using default OfflineComponentProvider"),await Np(n,new PN(void 0));return n._offlineComponents}async function cT(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(de(ui,"Using user provided OnlineComponentProvider"),await Bw(n,n._uninitializedComponentsProvider._online)):(de(ui,"Using default OnlineComponentProvider"),await Bw(n,new mm))),n._onlineComponents}function ON(n){return cT(n).then((e=>e.syncEngine))}async function gm(n){const e=await cT(n),t=e.eventManager;return t.onListen=_N.bind(null,e.syncEngine),t.onUnlisten=EN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=vN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=IN.bind(null,e.syncEngine),t}function LN(n,e,t={}){const r=new ni;return n.asyncQueue.enqueueAndForget((async()=>(function(a,c,d,p,g){const v=new uT({next:T=>{v.Nu(),c.enqueueAndForget((()=>ZI(a,E)));const x=T.docs.has(d);!x&&T.fromCache?g.reject(new he(J.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&T.fromCache&&p&&p.source==="server"?g.reject(new he(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(T)},error:T=>g.reject(T)}),E=new eT(_d(d.path),v,{includeMetadataChanges:!0,qa:!0});return YI(a,E)})(await gm(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT="firestore.googleapis.com",Ww=!0;class qw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=dT,this.ssl=Ww}else this.host=e.host,this.ssl=e.ssl??Ww;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=UI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<p2)throw new he(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Yb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hT(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new he(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new he(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new he(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Cd{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Bb;switch(r.type){case"firstParty":return new Hb(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new he(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=zw.get(t);r&&(de("ComponentProvider","Removing Datastore"),zw.delete(t),r.terminate())})(this),Promise.resolve()}}function MN(n,e,t,r={}){n=Hn(n,Cd);const o=Aa(e),a=n._getSettings(),c={...a,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;o&&(sE(`https://${d}`),iE("Firestore",!0)),a.host!==dT&&a.host!==d&&ya("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...a,host:d,ssl:o,emulatorOptions:r};if(!Xi(p,c)&&(n._setSettings(p),r.mockUserToken)){let g,v;if(typeof r.mockUserToken=="string")g=r.mockUserToken,v=tn.MOCK_USER;else{g=Hx(r.mockUserToken,n._app?.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new he(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new tn(E)}n._authCredentials=new zb(new YE(g,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Na(this.firestore,e,this._query)}}class pt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ri(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pt(this.firestore,e,this._key)}toJSON(){return{type:pt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Iu(t,pt._jsonSchema))return new pt(e,r||null,new ve(nt.fromString(t.referencePath)))}}pt._jsonSchemaVersion="firestore/documentReference/1.0",pt._jsonSchema={type:It("string",pt._jsonSchemaVersion),referencePath:It("string")};class ri extends Na{constructor(e,t,r){super(e,t,_d(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pt(this.firestore,null,new ve(e))}withConverter(e){return new ri(this.firestore,e,this._path)}}function Dp(n,e,...t){if(n=Tt(n),ZE("collection","path",e),n instanceof Cd){const r=nt.fromString(e,...t);return sw(r),new ri(n,null,r)}{if(!(n instanceof pt||n instanceof ri))throw new he(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(nt.fromString(e,...t));return sw(r),new ri(n.firestore,null,r)}}function Hi(n,e,...t){if(n=Tt(n),arguments.length===1&&(e=Zm.newId()),ZE("doc","path",e),n instanceof Cd){const r=nt.fromString(e,...t);return rw(r),new pt(n,null,new ve(r))}{if(!(n instanceof pt||n instanceof ri))throw new he(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(nt.fromString(e,...t));return rw(r),new pt(n.firestore,n instanceof ri?n.converter:null,new ve(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw="AsyncQueue";class Kw{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new WI(this,"async_queue_retry"),this._c=()=>{const r=Pp();r&&de(Hw,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Pp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Pp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ni;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ba(e))throw e;de(Hw,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,ps("INTERNAL UNHANDLED ERROR: ",Gw(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=_g.createAndSchedule(this,e,t,r,(a=>this.hc(a)));return this.tc.push(o),o}uc(){this.nc&&xe(47125,{Pc:Gw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Gw(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qw(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const o=t;for(const a of r)if(a in o&&typeof o[a]=="function")return!0;return!1})(n,["next","error","complete"])}class ci extends Cd{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new Kw,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Kw(e),this._firestoreClient=void 0,await e}}}function VN(n,e){const t=typeof n=="object"?n:uE(),r=typeof n=="string"?n:Bh,o=$m(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const a=Wx("firestore");a&&MN(o,...a)}return o}function Tg(n){if(n._terminated)throw new he(J.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||FN(n),n._firestoreClient}function FN(n){const e=n._freezeSettings(),t=(function(o,a,c,d){return new uP(o,a,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,hT(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new NN(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(o){const a=o?._online.build();return{_offline:o?._offline.build(a),_online:a}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zn(Gt.fromBase64String(e))}catch(t){throw new he(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new zn(Gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:zn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Iu(e,zn._jsonSchema))return zn.fromBase64String(e.bytes)}}zn._jsonSchemaVersion="firestore/bytes/1.0",zn._jsonSchema={type:It("string",zn._jsonSchemaVersion),bytes:It("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Nr._jsonSchemaVersion}}static fromJSON(e){if(Iu(e,Nr._jsonSchema))return new Nr(e.latitude,e.longitude)}}Nr._jsonSchemaVersion="firestore/geoPoint/1.0",Nr._jsonSchema={type:It("string",Nr._jsonSchemaVersion),latitude:It("number"),longitude:It("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==o[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Dr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Iu(e,Dr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Dr(e.vectorValues);throw new he(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Dr._jsonSchemaVersion="firestore/vectorValue/1.0",Dr._jsonSchema={type:It("string",Dr._jsonSchemaVersion),vectorValues:It("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN=/^__.*__$/;class UN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new di(e,this.data,this.fieldMask,t,this.fieldTransforms):new Su(e,this.data,t,this.fieldTransforms)}}class fT{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new di(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function pT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe(40011,{Ac:n})}}class Ag{constructor(e,t,r,o,a,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ag({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Yh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(pT(this.Ac)&&jN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class $N{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Sd(e)}Cc(e,t,r,o=!1){return new Ag({Ac:e,methodName:t,Dc:r,path:Kt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function kd(n){const e=n._freezeSettings(),t=Sd(n._databaseId);return new $N(n._databaseId,!!e.ignoreUndefinedProperties,t)}function mT(n,e,t,r,o,a={}){const c=n.Cc(a.merge||a.mergeFields?2:0,e,t,o);xg("Data must be an object, but it was:",c,r);const d=gT(r,c);let p,g;if(a.merge)p=new Nn(c.fieldMask),g=c.fieldTransforms;else if(a.mergeFields){const v=[];for(const E of a.mergeFields){const T=ym(e,E,t);if(!c.contains(T))throw new he(J.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);_T(v,T)||v.push(T)}p=new Nn(v),g=c.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,g=c.fieldTransforms;return new UN(new wn(d),p,g)}class bd extends Sg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bd}}function BN(n,e,t,r){const o=n.Cc(1,e,t);xg("Data must be an object, but it was:",o,r);const a=[],c=wn.empty();hi(r,((p,g)=>{const v=Cg(e,p,t);g=Tt(g);const E=o.yc(v);if(g instanceof bd)a.push(v);else{const T=Ru(g,E);T!=null&&(a.push(v),c.set(v,T))}}));const d=new Nn(a);return new fT(c,d,o.fieldTransforms)}function zN(n,e,t,r,o,a){const c=n.Cc(1,e,t),d=[ym(e,r,t)],p=[o];if(a.length%2!=0)throw new he(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<a.length;T+=2)d.push(ym(e,a[T])),p.push(a[T+1]);const g=[],v=wn.empty();for(let T=d.length-1;T>=0;--T)if(!_T(g,d[T])){const x=d[T];let M=p[T];M=Tt(M);const j=c.yc(x);if(M instanceof bd)g.push(x);else{const V=Ru(M,j);V!=null&&(g.push(x),v.set(x,V))}}const E=new Nn(g);return new fT(v,E,c.fieldTransforms)}function WN(n,e,t,r=!1){return Ru(t,n.Cc(r?4:3,e))}function Ru(n,e){if(yT(n=Tt(n)))return xg("Unsupported field value:",e,n),gT(n,e);if(n instanceof Sg)return(function(r,o){if(!pT(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,o){const a=[];let c=0;for(const d of r){let p=Ru(d,o.wc(c));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),c++}return{arrayValue:{values:a}}})(n,e)}return(function(r,o){if((r=Tt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return NP(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=ot.fromDate(r);return{timestampValue:Gh(o.serializer,a)}}if(r instanceof ot){const a=new ot(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Gh(o.serializer,a)}}if(r instanceof Nr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zn)return{bytesValue:DI(o.serializer,r._byteString)};if(r instanceof pt){const a=o.databaseId,c=r.firestore._databaseId;if(!c.isEqual(a))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:ug(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Dr)return(function(c,d){return{mapValue:{fields:{[lI]:{stringValue:uI},[zh]:{arrayValue:{values:c.toArray().map((g=>{if(typeof g!="number")throw d.Sc("VectorValues must only contain numeric values.");return ig(d.serializer,g)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${pd(r)}`)})(n,e)}function gT(n,e){const t={};return nI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hi(n,((r,o)=>{const a=Ru(o,e.mc(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function yT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ot||n instanceof Nr||n instanceof zn||n instanceof pt||n instanceof Sg||n instanceof Dr)}function xg(n,e,t){if(!yT(t)||!eI(t)){const r=pd(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function ym(n,e,t){if((e=Tt(e))instanceof Rd)return e._internalPath;if(typeof e=="string")return Cg(n,e);throw Yh("Field path arguments must be of type string or ",n,!1,void 0,t)}const qN=new RegExp("[~\\*/\\[\\]]");function Cg(n,e,t){if(e.search(qN)>=0)throw Yh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Rd(...e.split("."))._internalPath}catch{throw Yh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Yh(n,e,t,r,o){const a=r&&!r.isEmpty(),c=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(a||c)&&(p+=" (found",a&&(p+=` in field ${r}`),c&&(p+=` in document ${o}`),p+=")"),new he(J.INVALID_ARGUMENT,d+n+p)}function _T(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e,t,r,o,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new HN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Rg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class HN extends vT{data(){return super.data()}}function Rg(n,e){return typeof e=="string"?Cg(n,e):e instanceof Rd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new he(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kg{}class GN extends kg{}function QN(n,e,...t){let r=[];e instanceof kg&&r.push(e),r=r.concat(t),(function(a){const c=a.filter((p=>p instanceof bg)).length,d=a.filter((p=>p instanceof Pd)).length;if(c>1||c>0&&d>0)throw new he(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)n=o._apply(n);return n}class Pd extends GN{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Pd(e,t,r)}_apply(e){const t=this._parse(e);return wT(e._query,t),new Na(e.firestore,e.converter,im(e._query,t))}_parse(e){const t=kd(e.firestore);return(function(a,c,d,p,g,v,E){let T;if(g.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new he(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){Jw(E,v);const M=[];for(const j of E)M.push(Xw(p,a,j));T={arrayValue:{values:M}}}else T=Xw(p,a,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||Jw(E,v),T=WN(d,c,E,v==="in"||v==="not-in");return Et.create(g,v,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function XN(n,e,t){const r=e,o=Rg("where",n);return Pd._create(o,r,t)}class bg extends kg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new bg(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:fr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,a){let c=o;const d=a.getFlattenedFilters();for(const p of d)wT(c,p),c=im(c,p)})(e._query,t),new Na(e.firestore,e.converter,im(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Xw(n,e,t){if(typeof(t=Tt(t))=="string"){if(t==="")throw new he(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yI(e)&&t.indexOf("/")!==-1)throw new he(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(nt.fromString(t));if(!ve.isDocumentKey(r))throw new he(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return dw(n,new ve(r))}if(t instanceof pt)return dw(n,t._key);throw new he(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pd(t)}.`)}function Jw(n,e){if(!Array.isArray(n)||n.length===0)throw new he(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wT(n,e){const t=(function(o,a){for(const c of o)for(const d of c.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new he(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class JN{convertValue(e,t="none"){switch(ai(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(oi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw xe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return hi(e,((o,a)=>{r[o]=this.convertValue(a,t)})),r}convertVectorValue(e){const t=e.fields?.[zh].arrayValue?.values?.map((r=>yt(r.doubleValue)));return new Dr(t)}convertGeoPoint(e){return new Nr(yt(e.latitude),yt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=yd(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(au(e));default:return null}}convertTimestamp(e){const t=ii(e);return new ot(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=nt.fromString(e);Qe(jI(r),9688,{name:e});const o=new lu(r.get(1),r.get(3)),a=new ve(r.popFirst(5));return o.isEqual(t)||ps(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ET(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class Vl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qi extends vT{constructor(e,t,r,o,a,c){super(e,t,r,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new wh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Rg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Qi._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Qi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Qi._jsonSchema={type:It("string",Qi._jsonSchemaVersion),bundleSource:It("string","DocumentSnapshot"),bundleName:It("string"),bundle:It("string")};class wh extends Qi{data(e={}){return super.data(e)}}class pa{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Vl(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new wh(this._firestore,this._userDataWriter,r.key,r,new Vl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,a){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((d=>{const p=new wh(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Vl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const p=new wh(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Vl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,v=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),v=c.indexOf(d.doc.key)),{type:YN(d.type),doc:p,oldIndex:g,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=pa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Zm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],o=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),o.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function YN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(n){n=Hn(n,pt);const e=Hn(n.firestore,ci);return LN(Tg(e),n._key).then((t=>TT(e,n,t)))}pa._jsonSchemaVersion="firestore/querySnapshot/1.0",pa._jsonSchema={type:It("string",pa._jsonSchemaVersion),bundleSource:It("string","QuerySnapshot"),bundleName:It("string"),bundle:It("string")};class IT extends JN{constructor(e){super(),this.firestore=e}convertBytes(e){return new zn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pt(this.firestore,null,t)}}function ZN(n,e,t){n=Hn(n,pt);const r=Hn(n.firestore,ci),o=ET(n.converter,e);return Nd(r,[mT(kd(r),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,Kn.none())])}function Eh(n,e,t,...r){n=Hn(n,pt);const o=Hn(n.firestore,ci),a=kd(o);let c;return c=typeof(e=Tt(e))=="string"||e instanceof Rd?zN(a,"updateDoc",n._key,e,t,r):BN(a,"updateDoc",n._key,e),Nd(o,[c.toMutation(n._key,Kn.exists(!0))])}function eD(n){return Nd(Hn(n.firestore,ci),[new og(n._key,Kn.none())])}function Zw(n,e){const t=Hn(n.firestore,ci),r=Hi(n),o=ET(n.converter,e);return Nd(t,[mT(kd(n.firestore),"addDoc",r._key,o,n.converter!==null,{}).toMutation(r._key,Kn.exists(!1))]).then((()=>r))}function tD(n,...e){n=Tt(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Qw(e[r])||(t=e[r++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Qw(e[r])){const p=e[r];e[r]=p.next?.bind(p),e[r+1]=p.error?.bind(p),e[r+2]=p.complete?.bind(p)}let a,c,d;if(n instanceof pt)c=Hn(n.firestore,ci),d=_d(n._key.path),a={next:p=>{e[r]&&e[r](TT(c,n,p))},error:e[r+1],complete:e[r+2]};else{const p=Hn(n,Na);c=Hn(p.firestore,ci),d=p._query;const g=new IT(c);a={next:v=>{e[r]&&e[r](new pa(c,g,p,v))},error:e[r+1],complete:e[r+2]},KN(n._query)}return(function(g,v,E,T){const x=new uT(T),M=new eT(v,x,E);return g.asyncQueue.enqueueAndForget((async()=>YI(await gm(g),M))),()=>{x.Nu(),g.asyncQueue.enqueueAndForget((async()=>ZI(await gm(g),M)))}})(Tg(c),d,o,a)}function Nd(n,e){return(function(r,o){const a=new ni;return r.asyncQueue.enqueueAndForget((async()=>TN(await ON(r),o,a))),a.promise})(Tg(n),e)}function TT(n,e,t){const r=t.docs.get(e._key),o=new IT(n);return new Qi(n,o,e._key,r,new Vl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){Ra=o})(xa),ma(new Ji("firestore",((r,{instanceIdentifier:o,options:a})=>{const c=r.getProvider("app").getImmediate(),d=new ci(new Wb(r.getProvider("auth-internal")),new Kb(c,r.getProvider("app-check-internal")),(function(g,v){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new he(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lu(g.options.projectId,v)})(c,o),c);return a={useFetchStreams:t,...a},d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),ei(Zv,ew,e),ei(Zv,ew,"esm2020")})();const nD={apiKey:"AIzaSyDRN8LxfXiew_L8PPRDYdrCz7BdI5elp-I",authDomain:"chat-bot-dad1a.firebaseapp.com",projectId:"chat-bot-dad1a",storageBucket:"chat-bot-dad1a.firebasestorage.app",messagingSenderId:"225887978096",appId:"1:225887978096:web:d912e5b5989f45ee3daab5",measurementId:"G-H1LBLHSSRJ"},ST=lE(nD),ns=Fb(ST),is=VN(ST),AT=q.createContext();function Dd(){return q.useContext(AT)}function rD({children:n}){const[e,t]=q.useState(null),[r,o]=q.useState(!0),[a,c]=q.useState(""),[d,p]=q.useState(""),g=()=>{c(""),p("")},v=async(F,X)=>{g(),o(!0);try{return await wk(ns,F,X)}catch(re){throw p(V(re.code)),re}finally{o(!1)}},E=async(F,X)=>{g(),o(!0);try{return await Ek(ns,F,X)}catch(re){throw c(V(re.code)),re}finally{o(!1)}},T=async()=>{g(),o(!0);const F=new os;try{return await Kk(ns,F)}catch(X){throw c(V(X.code)),X}finally{o(!1)}},x=async()=>{o(!0);try{await Ck(ns)}catch(F){console.error("Logout error:",F)}finally{o(!1)}},M=async F=>{g();try{await vk(ns,F)}catch(X){throw new Error(V(X.code))}},j=async(F,X)=>{if(ns.currentUser)try{await Tk(ns.currentUser,{displayName:F,photoURL:X}),t({...ns.currentUser,displayName:F,photoURL:X})}catch(re){throw new Error(V(re.code))}},V=F=>{switch(F){case"auth/user-not-found":return"No user found with this email address.";case"auth/wrong-password":return"Incorrect password.";case"auth/email-already-in-use":return"An account with this email already exists.";case"auth/weak-password":return"Password should be at least 6 characters.";case"auth/invalid-email":return"Invalid email address.";case"auth/user-disabled":return"This account has been disabled.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";case"auth/network-request-failed":return"Network error. Please check your connection.";case"auth/popup-closed-by-user":return"Sign-in popup was closed before completing authentication.";case"auth/popup-blocked":return"Sign-in popup was blocked by your browser.";default:return"An unexpected error occurred. Please try again."}};q.useEffect(()=>xk(ns,X=>{t(X),o(!1)}),[]);const H={user:e,signUp:v,signIn:E,signInWithGoogle:T,logout:x,resetPassword:M,updateUserProfile:j,loading:r,signInError:a,signUpError:d,clearErrors:g,isAuthenticated:!!e};return I.jsx(AT.Provider,{value:H,children:n})}/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sD=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),iD=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),e0=n=>{const e=iD(n);return e.charAt(0).toUpperCase()+e.slice(1)},xT=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),oD=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var aD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lD=q.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:o="",children:a,iconNode:c,...d},p)=>q.createElement("svg",{ref:p,...aD,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:xT("lucide",o),...!a&&!oD(d)&&{"aria-hidden":"true"},...d},[...c.map(([g,v])=>q.createElement(g,v)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=(n,e)=>{const t=q.forwardRef(({className:r,...o},a)=>q.createElement(lD,{ref:a,iconNode:e,className:xT(`lucide-${sD(e0(n))}`,`lucide-${n}`,r),...o}));return t.displayName=e0(n),t};/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Op=Je("bot",uD);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cD=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],hD=Je("calendar",cD);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],fD=Je("camera",dD);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],t0=Je("circle-alert",pD);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],n0=Je("download",mD);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],yD=Je("eye-off",gD);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],vD=Je("eye",_D);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],ED=Je("globe",wD);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ID=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],TD=Je("key",ID);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Wn=Je("loader",SD);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],xD=Je("lock",AD);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],CT=Je("log-out",CD);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RD=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],_m=Je("mail",RD);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kD=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],bD=Je("map-pin",kD);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PD=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],ND=Je("menu",PD);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],r0=Je("message-circle",DD);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OD=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],s0=Je("palette",OD);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],MD=Je("pen-line",LD);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],FD=Je("phone",VD);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],UD=Je("plus",jD);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],i0=Je("save",$D);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BD=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],zD=Je("search",BD);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],qD=Je("send",WD);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],KD=Je("settings",HD);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],o0=Je("shield",GD);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],RT=Je("trash-2",QD);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XD=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Zl=Je("user",XD);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],kT=Je("x",JD),vm=()=>{const[n,e]=q.useState(""),[t,r]=q.useState(""),[o,a]=q.useState(!1),[c,d]=q.useState(!1),[p,g]=q.useState(""),[v,E]=q.useState(!1),[T,x]=q.useState(""),{signIn:M,signUp:j,signInWithGoogle:V,resetPassword:H,user:F,loading:X,signInError:re,signUpError:_e,isAuthenticated:ge,clearErrors:b}=Dd(),A=ld();hv.useEffect(()=>{ge&&F&&A("/home")},[ge,F,A]);const R=async De=>{De.preventDefault(),g(""),x("");try{c?await j(n,t):await M(n,t)}catch(rt){console.error("Authentication error:",rt)}},P=async()=>{g(""),x(""),b();try{await V()}catch(De){console.error("Google auth error:",De)}},N=async De=>{if(De.preventDefault(),!n){g("Please enter your email address first.");return}try{await H(n),x("Password reset email sent! Check your inbox."),E(!1)}catch(rt){g(rt.message)}},U=()=>{e(""),r(""),g(""),x(""),b()},C=()=>{d(!c),E(!1),U()};hv.useEffect(()=>{re&&g(re),_e&&g(_e)},[re,_e]);const Re=X;return I.jsxs("div",{className:"min-h-screen bg-black flex items-center justify-center p-4 relative overflow-hidden",children:[I.jsx("div",{className:"absolute left-1/4 top-1/2 transform -translate-y-1/2",children:I.jsx("div",{className:"w-64 h-64 md:w-80 md:h-80 rounded-full bg-gradient-to-br from-purple-500 via-blue-600 to-pink-500 opacity-80 blur-3xl animate-pulse"})}),I.jsx("div",{className:"absolute right-1/3 top-1/3",children:I.jsx("div",{className:"w-32 h-32 md:w-48 md:h-48 rounded-full bg-gradient-to-br from-blue-400 to-purple-600 opacity-40 blur-2xl animate-pulse delay-1000"})}),I.jsx("div",{className:"absolute left-1/2 bottom-1/4",children:I.jsx("div",{className:"w-24 h-24 md:w-36 md:h-36 rounded-full bg-gradient-to-br from-pink-400 to-red-500 opacity-30 blur-xl animate-pulse delay-2000"})}),I.jsx("div",{className:"relative z-10 w-full max-w-md mx-auto",children:I.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-xl border border-gray-800 rounded-2xl p-8 shadow-2xl",children:[I.jsxs("div",{className:"text-center mb-8",children:[I.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-4",children:"Chatbot"}),I.jsx("p",{className:"text-gray-400 text-lg",children:v?"Reset your password":c?"Create your account":"Welcome back"})]}),T&&I.jsxs("div",{className:"mb-6 p-4 bg-green-500/10 border border-green-500/20 rounded-xl flex items-center gap-3 text-green-400",children:[I.jsx(t0,{className:"h-5 w-5 flex-shrink-0"}),I.jsx("span",{className:"text-sm",children:T})]}),p&&I.jsxs("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/20 rounded-xl flex items-center gap-3 text-red-400",children:[I.jsx(t0,{className:"h-5 w-5 flex-shrink-0"}),I.jsx("span",{className:"text-sm",children:p})]}),v?I.jsxs("form",{onSubmit:N,className:"space-y-6",children:[I.jsxs("div",{className:"relative",children:[I.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:I.jsx(_m,{className:"h-5 w-5 text-gray-500"})}),I.jsx("input",{type:"email",placeholder:"Email",value:n,onChange:De=>e(De.target.value),required:!0,disabled:Re,className:"w-full pl-12 pr-4 py-4 bg-gray-800/50 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"})]}),I.jsx("button",{type:"submit",disabled:Re||!n,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-4 px-6 rounded-xl transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-blue-500/25 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 flex items-center justify-center gap-2",children:Re?I.jsxs(I.Fragment,{children:[I.jsx(Wn,{className:"h-5 w-5 animate-spin"}),"Sending Reset Email..."]}):"Send Reset Email"}),I.jsx("button",{type:"button",onClick:()=>E(!1),disabled:Re,className:"w-full text-gray-400 hover:text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Back to Sign In"})]}):I.jsxs("form",{onSubmit:R,className:"space-y-6",children:[I.jsxs("div",{className:"relative",children:[I.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:I.jsx(_m,{className:"h-5 w-5 text-gray-500"})}),I.jsx("input",{type:"email",placeholder:"Email",value:n,onChange:De=>e(De.target.value),required:!0,disabled:Re,className:"w-full pl-12 pr-4 py-4 bg-gray-800/50 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"})]}),I.jsxs("div",{className:"relative",children:[I.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:I.jsx(xD,{className:"h-5 w-5 text-gray-500"})}),I.jsx("input",{type:o?"text":"password",placeholder:"Password",value:t,onChange:De=>r(De.target.value),required:!0,disabled:Re,className:"w-full pl-12 pr-12 py-4 bg-gray-800/50 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"}),I.jsx("button",{type:"button",onClick:()=>a(!o),disabled:Re,className:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-500 hover:text-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:o?I.jsx(yD,{className:"h-5 w-5"}):I.jsx(vD,{className:"h-5 w-5"})})]}),!c&&I.jsx("div",{className:"text-right",children:I.jsx("button",{type:"button",onClick:()=>E(!0),disabled:Re,className:"text-sm text-blue-400 hover:text-blue-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Forgot password?"})}),I.jsx("button",{type:"submit",disabled:Re||!n||!t,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-4 px-6 rounded-xl transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-blue-500/25 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 flex items-center justify-center gap-2",children:Re?I.jsxs(I.Fragment,{children:[I.jsx(Wn,{className:"h-5 w-5 animate-spin"}),c?"Creating Account...":"Signing In..."]}):c?"Create Account":"Sign In"}),I.jsx("button",{type:"button",onClick:C,disabled:Re,className:"w-full bg-gray-700 hover:bg-gray-600 text-white font-semibold py-4 px-6 rounded-xl transition-all duration-200 transform hover:scale-105 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",children:c?"Already have an account? Sign In":"Don't have an account? Sign Up"}),I.jsxs("div",{className:"relative",children:[I.jsx("div",{className:"absolute inset-0 flex items-center",children:I.jsx("div",{className:"w-full border-t border-gray-700"})}),I.jsx("div",{className:"relative flex justify-center text-sm",children:I.jsx("span",{className:"px-2 bg-gray-900 text-gray-400",children:"Or continue with"})})]}),I.jsxs("button",{type:"button",onClick:P,disabled:Re,className:"w-full bg-gray-800/50 hover:bg-gray-700/50 border border-gray-700 text-white font-medium py-4 px-6 rounded-xl transition-all duration-200 flex items-center justify-center gap-3 group disabled:opacity-50 disabled:cursor-not-allowed",children:[Re?I.jsx(Wn,{className:"h-5 w-5 animate-spin"}):I.jsxs("svg",{className:"h-5 w-5 group-hover:scale-110 transition-transform",viewBox:"0 0 24 24",children:[I.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),I.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),I.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),I.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),I.jsx("span",{children:"Continue with Google"})]})]})]})})]})};function ke(n,e,t,r,o){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t}function W(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)}let bT=function(){const{crypto:n}=globalThis;if(n?.randomUUID)return bT=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^t()&15>>+r/4).toString(16))};function wm(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Em=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};class Se extends Error{}class Qt extends Se{constructor(e,t,r,o){super(`${Qt.makeMessage(e,t,r)}`),this.status=e,this.headers=o,this.requestID=o?.get("x-request-id"),this.error=t;const a=t;this.code=a?.code,this.param=a?.param,this.type=a?.type}static makeMessage(e,t,r){const o=t?.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):r;return e&&o?`${e} ${o}`:e?`${e} status code (no body)`:o||"(no status code or body)"}static generate(e,t,r,o){if(!e||!o)return new Od({message:r,cause:Em(t)});const a=t?.error;return e===400?new PT(e,a,r,o):e===401?new NT(e,a,r,o):e===403?new DT(e,a,r,o):e===404?new OT(e,a,r,o):e===409?new LT(e,a,r,o):e===422?new MT(e,a,r,o):e===429?new VT(e,a,r,o):e>=500?new FT(e,a,r,o):new Qt(e,a,r,o)}}class qn extends Qt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Od extends Qt{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class Pg extends Od{constructor({message:e}={}){super({message:e??"Request timed out."})}}class PT extends Qt{}class NT extends Qt{}class DT extends Qt{}class OT extends Qt{}class LT extends Qt{}class MT extends Qt{}class VT extends Qt{}class FT extends Qt{}class jT extends Se{constructor(){super("Could not parse response content as the length limit was reached")}}class UT extends Se{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class Fl extends Error{constructor(e){super(e)}}const YD=/^[a-z][a-z0-9+.-]*:/i,ZD=n=>YD.test(n);let vn=n=>(vn=Array.isArray,vn(n)),a0=vn;function $T(n){return typeof n!="object"?{}:n??{}}function eO(n){if(!n)return!0;for(const e in n)return!1;return!0}function tO(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Lp(n){return n!=null&&typeof n=="object"&&!Array.isArray(n)}const nO=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Se(`${n} must be an integer`);if(e<0)throw new Se(`${n} must be a positive integer`);return e},rO=n=>{try{return JSON.parse(n)}catch{return}},ku=n=>new Promise(e=>setTimeout(e,n)),oa="5.15.0",sO=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function iO(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const oO=()=>{const n=iO();if(n==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":oa,"X-Stainless-OS":u0(Deno.build.os),"X-Stainless-Arch":l0(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":oa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(n==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":oa,"X-Stainless-OS":u0(globalThis.process.platform??"unknown"),"X-Stainless-Arch":l0(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=aO();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":oa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":oa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function aO(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const r=t.exec(navigator.userAgent);if(r){const o=r[1]||0,a=r[2]||0,c=r[3]||0;return{browser:e,version:`${o}.${a}.${c}`}}}return null}const l0=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",u0=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let c0;const lO=()=>c0??(c0=oO());function uO(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function BT(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function zT(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return BT({start(){},async pull(t){const{done:r,value:o}=await e.next();r?t.close():t.enqueue(o)},async cancel(){await e.return?.()}})}function WT(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t?.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function cO(n){if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await n[Symbol.asyncIterator]().return?.();return}const e=n.getReader(),t=e.cancel();e.releaseLock(),await t}const hO=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),qT="RFC3986",HT=n=>String(n),h0={RFC1738:n=>String(n).replace(/%20/g,"+"),RFC3986:HT},dO="RFC1738";let Im=(n,e)=>(Im=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),Im(n,e));const Ar=(()=>{const n=[];for(let e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n})(),Mp=1024,fO=(n,e,t,r,o)=>{if(n.length===0)return n;let a=n;if(typeof n=="symbol"?a=Symbol.prototype.toString.call(n):typeof n!="string"&&(a=String(n)),t==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(d){return"%26%23"+parseInt(d.slice(2),16)+"%3B"});let c="";for(let d=0;d<a.length;d+=Mp){const p=a.length>=Mp?a.slice(d,d+Mp):a,g=[];for(let v=0;v<p.length;++v){let E=p.charCodeAt(v);if(E===45||E===46||E===95||E===126||E>=48&&E<=57||E>=65&&E<=90||E>=97&&E<=122||o===dO&&(E===40||E===41)){g[g.length]=p.charAt(v);continue}if(E<128){g[g.length]=Ar[E];continue}if(E<2048){g[g.length]=Ar[192|E>>6]+Ar[128|E&63];continue}if(E<55296||E>=57344){g[g.length]=Ar[224|E>>12]+Ar[128|E>>6&63]+Ar[128|E&63];continue}v+=1,E=65536+((E&1023)<<10|p.charCodeAt(v)&1023),g[g.length]=Ar[240|E>>18]+Ar[128|E>>12&63]+Ar[128|E>>6&63]+Ar[128|E&63]}c+=g.join("")}return c};function pO(n){return!n||typeof n!="object"?!1:!!(n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer(n))}function d0(n,e){if(vn(n)){const t=[];for(let r=0;r<n.length;r+=1)t.push(e(n[r]));return t}return e(n)}const KT={brackets(n){return String(n)+"[]"},comma:"comma",indices(n,e){return String(n)+"["+e+"]"},repeat(n){return String(n)}},GT=function(n,e){Array.prototype.push.apply(n,vn(e)?e:[e])};let f0;const Pt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:fO,encodeValuesOnly:!1,format:qT,formatter:HT,indices:!1,serializeDate(n){return(f0??(f0=Function.prototype.call.bind(Date.prototype.toISOString)))(n)},skipNulls:!1,strictNullHandling:!1};function mO(n){return typeof n=="string"||typeof n=="number"||typeof n=="boolean"||typeof n=="symbol"||typeof n=="bigint"}const Vp={};function QT(n,e,t,r,o,a,c,d,p,g,v,E,T,x,M,j,V,H){let F=n,X=H,re=0,_e=!1;for(;(X=X.get(Vp))!==void 0&&!_e;){const P=X.get(n);if(re+=1,typeof P<"u"){if(P===re)throw new RangeError("Cyclic object value");_e=!0}typeof X.get(Vp)>"u"&&(re=0)}if(typeof g=="function"?F=g(e,F):F instanceof Date?F=T?.(F):t==="comma"&&vn(F)&&(F=d0(F,function(P){return P instanceof Date?T?.(P):P})),F===null){if(a)return p&&!j?p(e,Pt.encoder,V,"key",x):e;F=""}if(mO(F)||pO(F)){if(p){const P=j?e:p(e,Pt.encoder,V,"key",x);return[M?.(P)+"="+M?.(p(F,Pt.encoder,V,"value",x))]}return[M?.(e)+"="+M?.(String(F))]}const ge=[];if(typeof F>"u")return ge;let b;if(t==="comma"&&vn(F))j&&p&&(F=d0(F,p)),b=[{value:F.length>0?F.join(",")||null:void 0}];else if(vn(g))b=g;else{const P=Object.keys(F);b=v?P.sort(v):P}const A=d?String(e).replace(/\./g,"%2E"):String(e),R=r&&vn(F)&&F.length===1?A+"[]":A;if(o&&vn(F)&&F.length===0)return R+"[]";for(let P=0;P<b.length;++P){const N=b[P],U=typeof N=="object"&&typeof N.value<"u"?N.value:F[N];if(c&&U===null)continue;const C=E&&d?N.replace(/\./g,"%2E"):N,Re=vn(F)?typeof t=="function"?t(R,C):R:R+(E?"."+C:"["+C+"]");H.set(n,re);const De=new WeakMap;De.set(Vp,H),GT(ge,QT(U,Re,t,r,o,a,c,d,t==="comma"&&j&&vn(F)?null:p,g,v,E,T,x,M,j,V,De))}return ge}function gO(n=Pt){if(typeof n.allowEmptyArrays<"u"&&typeof n.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof n.encodeDotInKeys<"u"&&typeof n.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(n.encoder!==null&&typeof n.encoder<"u"&&typeof n.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=n.charset||Pt.charset;if(typeof n.charset<"u"&&n.charset!=="utf-8"&&n.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let t=qT;if(typeof n.format<"u"){if(!Im(h0,n.format))throw new TypeError("Unknown format option provided.");t=n.format}const r=h0[t];let o=Pt.filter;(typeof n.filter=="function"||vn(n.filter))&&(o=n.filter);let a;if(n.arrayFormat&&n.arrayFormat in KT?a=n.arrayFormat:"indices"in n?a=n.indices?"indices":"repeat":a=Pt.arrayFormat,"commaRoundTrip"in n&&typeof n.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const c=typeof n.allowDots>"u"?n.encodeDotInKeys?!0:Pt.allowDots:!!n.allowDots;return{addQueryPrefix:typeof n.addQueryPrefix=="boolean"?n.addQueryPrefix:Pt.addQueryPrefix,allowDots:c,allowEmptyArrays:typeof n.allowEmptyArrays=="boolean"?!!n.allowEmptyArrays:Pt.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof n.charsetSentinel=="boolean"?n.charsetSentinel:Pt.charsetSentinel,commaRoundTrip:!!n.commaRoundTrip,delimiter:typeof n.delimiter>"u"?Pt.delimiter:n.delimiter,encode:typeof n.encode=="boolean"?n.encode:Pt.encode,encodeDotInKeys:typeof n.encodeDotInKeys=="boolean"?n.encodeDotInKeys:Pt.encodeDotInKeys,encoder:typeof n.encoder=="function"?n.encoder:Pt.encoder,encodeValuesOnly:typeof n.encodeValuesOnly=="boolean"?n.encodeValuesOnly:Pt.encodeValuesOnly,filter:o,format:t,formatter:r,serializeDate:typeof n.serializeDate=="function"?n.serializeDate:Pt.serializeDate,skipNulls:typeof n.skipNulls=="boolean"?n.skipNulls:Pt.skipNulls,sort:typeof n.sort=="function"?n.sort:null,strictNullHandling:typeof n.strictNullHandling=="boolean"?n.strictNullHandling:Pt.strictNullHandling}}function yO(n,e={}){let t=n;const r=gO(e);let o,a;typeof r.filter=="function"?(a=r.filter,t=a("",t)):vn(r.filter)&&(a=r.filter,o=a);const c=[];if(typeof t!="object"||t===null)return"";const d=KT[r.arrayFormat],p=d==="comma"&&r.commaRoundTrip;o||(o=Object.keys(t)),r.sort&&o.sort(r.sort);const g=new WeakMap;for(let T=0;T<o.length;++T){const x=o[T];r.skipNulls&&t[x]===null||GT(c,QT(t[x],x,d,p,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,g))}const v=c.join(r.delimiter);let E=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?E+="utf8=%26%2310003%3B&":E+="utf8=%E2%9C%93&"),v.length>0?E+v:""}function _O(n){let e=0;for(const o of n)e+=o.length;const t=new Uint8Array(e);let r=0;for(const o of n)t.set(o,r),r+=o.length;return t}let p0;function Ng(n){let e;return(p0??(e=new globalThis.TextEncoder,p0=e.encode.bind(e)))(n)}let m0;function g0(n){let e;return(m0??(e=new globalThis.TextDecoder,m0=e.decode.bind(e)))(n)}var Rn,kn;class Ld{constructor(){Rn.set(this,void 0),kn.set(this,void 0),ke(this,Rn,new Uint8Array),ke(this,kn,null)}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Ng(e):e;ke(this,Rn,_O([W(this,Rn,"f"),t]));const r=[];let o;for(;(o=vO(W(this,Rn,"f"),W(this,kn,"f")))!=null;){if(o.carriage&&W(this,kn,"f")==null){ke(this,kn,o.index);continue}if(W(this,kn,"f")!=null&&(o.index!==W(this,kn,"f")+1||o.carriage)){r.push(g0(W(this,Rn,"f").subarray(0,W(this,kn,"f")-1))),ke(this,Rn,W(this,Rn,"f").subarray(W(this,kn,"f"))),ke(this,kn,null);continue}const a=W(this,kn,"f")!==null?o.preceding-1:o.preceding,c=g0(W(this,Rn,"f").subarray(0,a));r.push(c),ke(this,Rn,W(this,Rn,"f").subarray(o.index)),ke(this,kn,null)}return r}flush(){return W(this,Rn,"f").length?this.decode(`
`):[]}}Rn=new WeakMap,kn=new WeakMap;Ld.NEWLINE_CHARS=new Set([`
`,"\r"]);Ld.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function vO(n,e){for(let o=e??0;o<n.length;o++){if(n[o]===10)return{preceding:o,index:o+1,carriage:!1};if(n[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function wO(n){for(let r=0;r<n.length-1;r++){if(n[r]===10&&n[r+1]===10||n[r]===13&&n[r+1]===13)return r+2;if(n[r]===13&&n[r+1]===10&&r+3<n.length&&n[r+2]===13&&n[r+3]===10)return r+4}return-1}const Zh={off:0,error:200,warn:300,info:400,debug:500},y0=(n,e,t)=>{if(n){if(tO(Zh,n))return n;Wt(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Zh))}`)}};function jl(){}function nh(n,e,t){return!e||Zh[n]>Zh[t]?jl:e[n].bind(e)}const EO={error:jl,warn:jl,info:jl,debug:jl};let _0=new WeakMap;function Wt(n){const e=n.logger,t=n.logLevel??"off";if(!e)return EO;const r=_0.get(e);if(r&&r[0]===t)return r[1];const o={error:nh("error",e,t),warn:nh("warn",e,t),info:nh("info",e,t),debug:nh("debug",e,t)};return _0.set(e,[t,o]),o}const Bi=n=>(n.options&&(n.options={...n.options},delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);var bl;class Rr{constructor(e,t,r){this.iterator=e,bl.set(this,void 0),this.controller=t,ke(this,bl,r)}static fromSSEResponse(e,t,r){let o=!1;const a=r?Wt(r):console;async function*c(){if(o)throw new Se("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let d=!1;try{for await(const p of IO(e,t))if(!d){if(p.data.startsWith("[DONE]")){d=!0;continue}if(p.event===null||!p.event.startsWith("thread.")){let g;try{g=JSON.parse(p.data)}catch(v){throw a.error("Could not parse message into JSON:",p.data),a.error("From chunk:",p.raw),v}if(g&&g.error)throw new Qt(void 0,g.error,void 0,e.headers);yield g}else{let g;try{g=JSON.parse(p.data)}catch(v){throw console.error("Could not parse message into JSON:",p.data),console.error("From chunk:",p.raw),v}if(p.event=="error")throw new Qt(void 0,g.error,g.message,void 0);yield{event:p.event,data:g}}}d=!0}catch(p){if(wm(p))return;throw p}finally{d||t.abort()}}return new Rr(c,t,r)}static fromReadableStream(e,t,r){let o=!1;async function*a(){const d=new Ld,p=WT(e);for await(const g of p)for(const v of d.decode(g))yield v;for(const g of d.flush())yield g}async function*c(){if(o)throw new Se("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let d=!1;try{for await(const p of a())d||p&&(yield JSON.parse(p));d=!0}catch(p){if(wm(p))return;throw p}finally{d||t.abort()}}return new Rr(c,t,r)}[(bl=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],t=[],r=this.iterator(),o=a=>({next:()=>{if(a.length===0){const c=r.next();e.push(c),t.push(c)}return a.shift()}});return[new Rr(()=>o(e),this.controller,W(this,bl,"f")),new Rr(()=>o(t),this.controller,W(this,bl,"f"))]}toReadableStream(){const e=this;let t;return BT({async start(){t=e[Symbol.asyncIterator]()},async pull(r){try{const{value:o,done:a}=await t.next();if(a)return r.close();const c=Ng(JSON.stringify(o)+`
`);r.enqueue(c)}catch(o){r.error(o)}},async cancel(){await t.return?.()}})}}async function*IO(n,e){if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Se("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Se("Attempted to iterate over a response with no body");const t=new SO,r=new Ld,o=WT(n.body);for await(const a of TO(o))for(const c of r.decode(a)){const d=t.decode(c);d&&(yield d)}for(const a of r.flush()){const c=t.decode(a);c&&(yield c)}}async function*TO(n){let e=new Uint8Array;for await(const t of n){if(t==null)continue;const r=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?Ng(t):t;let o=new Uint8Array(e.length+r.length);o.set(e),o.set(r,e.length),e=o;let a;for(;(a=wO(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}class SO{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,r,o]=AO(e,":");return o.startsWith(" ")&&(o=o.substring(1)),t==="event"?this.event=o:t==="data"&&this.data.push(o),null}}function AO(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}async function XT(n,e){const{response:t,requestLogID:r,retryOfRequestLogID:o,startTime:a}=e,c=await(async()=>{if(e.options.stream)return Wt(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):Rr.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const p=t.headers.get("content-type")?.split(";")[0]?.trim();if(p?.includes("application/json")||p?.endsWith("+json")){const E=await t.json();return JT(E,t)}return await t.text()})();return Wt(n).debug(`[${r}] response parsed`,Bi({retryOfRequestLogID:o,url:t.url,status:t.status,body:c,durationMs:Date.now()-a})),c}function JT(n,e){return!n||typeof n!="object"||Array.isArray(n)?n:Object.defineProperty(n,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var Ul;class Md extends Promise{constructor(e,t,r=XT){super(o=>{o(null)}),this.responsePromise=t,this.parseResponse=r,Ul.set(this,void 0),ke(this,Ul,e)}_thenUnwrap(e){return new Md(W(this,Ul,"f"),this.responsePromise,async(t,r)=>JT(e(await this.parseResponse(t,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(W(this,Ul,"f"),e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}Ul=new WeakMap;var rh;class Dg{constructor(e,t,r,o){rh.set(this,void 0),ke(this,rh,e),this.options=o,this.response=t,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new Se("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await W(this,rh,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(rh=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class xO extends Md{constructor(e,t,r){super(e,t,async(o,a)=>new r(o,a.response,await XT(o,a),a.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const t of e)yield t}}class Vd extends Dg{constructor(e,t,r,o){super(e,t,r,o),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class St extends Dg{constructor(e,t,r,o){super(e,t,r,o),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.getPaginatedItems(),t=e[e.length-1]?.id;return t?{...this.options,query:{...$T(this.options.query),after:t}}:null}}class CO extends Dg{constructor(e,t,r,o){super(e,t,r,o),this.data=r.data||[],this.has_more=r.has_more||!1,this.last_id=r.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...$T(this.options.query),after:e}}:null}}const YT=()=>{if(typeof File>"u"){const{process:n}=globalThis,e=typeof n?.versions?.node=="string"&&parseInt(n.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function eu(n,e,t){return YT(),new File(n,e??"unknown_file",t)}function Ih(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const ZT=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function",no=async(n,e)=>({...n,body:await kO(n.body,e)}),v0=new WeakMap;function RO(n){const e=typeof n=="function"?n:n.fetch,t=v0.get(e);if(t)return t;const r=(async()=>{try{const o="Response"in e?e.Response:(await e("data:,")).constructor,a=new FormData;return a.toString()!==await new o(a).text()}catch{return!0}})();return v0.set(e,r),r}const kO=async(n,e)=>{if(!await RO(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const t=new FormData;return await Promise.all(Object.entries(n||{}).map(([r,o])=>Tm(t,r,o))),t},bO=n=>n instanceof Blob&&"name"in n,Tm=async(n,e,t)=>{if(t!==void 0){if(t==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")n.append(e,String(t));else if(t instanceof Response)n.append(e,eu([await t.blob()],Ih(t)));else if(ZT(t))n.append(e,eu([await new Response(zT(t)).blob()],Ih(t)));else if(bO(t))n.append(e,t,Ih(t));else if(Array.isArray(t))await Promise.all(t.map(r=>Tm(n,e+"[]",r)));else if(typeof t=="object")await Promise.all(Object.entries(t).map(([r,o])=>Tm(n,`${e}[${r}]`,o)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${t} instead`)}},e1=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",PO=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&e1(n),NO=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function DO(n,e,t){if(YT(),n=await n,PO(n))return n instanceof File?n:eu([await n.arrayBuffer()],n.name);if(NO(n)){const o=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),eu(await Sm(o),e,t)}const r=await Sm(n);if(e||(e=Ih(n)),!t?.type){const o=r.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof o=="string"&&(t={...t,type:o})}return eu(r,e,t)}async function Sm(n){let e=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)e.push(n);else if(e1(n))e.push(n instanceof Blob?n:await n.arrayBuffer());else if(ZT(n))for await(const t of n)e.push(...await Sm(t));else{const t=n?.constructor?.name;throw new Error(`Unexpected data type: ${typeof n}${t?`; constructor: ${t}`:""}${OO(n)}`)}return e}function OO(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}class Ce{constructor(e){this._client=e}}function t1(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const w0=Object.freeze(Object.create(null)),LO=(n=t1)=>function(t,...r){if(t.length===1)return t[0];let o=!1;const a=[],c=t.reduce((v,E,T)=>{/[?#]/.test(E)&&(o=!0);const x=r[T];let M=(o?encodeURIComponent:n)(""+x);return T!==r.length&&(x==null||typeof x=="object"&&x.toString===Object.getPrototypeOf(Object.getPrototypeOf(x.hasOwnProperty??w0)??w0)?.toString)&&(M=x+"",a.push({start:v.length+E.length,length:M.length,error:`Value of type ${Object.prototype.toString.call(x).slice(8,-1)} is not a valid path parameter`})),v+E+(T===r.length?"":M)},""),d=c.split(/[?#]/,1)[0],p=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let g;for(;(g=p.exec(d))!==null;)a.push({start:g.index,length:g[0].length,error:`Value "${g[0]}" can't be safely passed as a path parameter`});if(a.sort((v,E)=>v.start-E.start),a.length>0){let v=0;const E=a.reduce((T,x)=>{const M=" ".repeat(x.start-v),j="^".repeat(x.length);return v=x.start+x.length,T+M+j},"");throw new Se(`Path parameters result in path with invalid segments:
${a.map(T=>T.error).join(`
`)}
${c}
${E}`)}return c},oe=LO(t1);let n1=class extends Ce{list(e,t={},r){return this._client.getAPIList(oe`/chat/completions/${e}/messages`,St,{query:t,...r})}};function ed(n){return n!==void 0&&"function"in n&&n.function!==void 0}function Og(n){return n?.$brand==="auto-parseable-response-format"}function bu(n){return n?.$brand==="auto-parseable-tool"}function MO(n,e){return!e||!r1(e)?{...n,choices:n.choices.map(t=>(s1(t.message.tool_calls),{...t,message:{...t.message,parsed:null,...t.message.tool_calls?{tool_calls:t.message.tool_calls}:void 0}}))}:Lg(n,e)}function Lg(n,e){const t=n.choices.map(r=>{if(r.finish_reason==="length")throw new jT;if(r.finish_reason==="content_filter")throw new UT;return s1(r.message.tool_calls),{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:r.message.tool_calls?.map(o=>FO(e,o))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?VO(e,r.message.content):null}}});return{...n,choices:t}}function VO(n,e){return n.response_format?.type!=="json_schema"?null:n.response_format?.type==="json_schema"?"$parseRaw"in n.response_format?n.response_format.$parseRaw(e):JSON.parse(e):null}function FO(n,e){const t=n.tools?.find(r=>ed(r)&&r.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:bu(t)?t.$parseRaw(e.function.arguments):t?.function.strict?JSON.parse(e.function.arguments):null}}}function jO(n,e){if(!n||!("tools"in n)||!n.tools)return!1;const t=n.tools?.find(r=>ed(r)&&r.function?.name===e.function.name);return ed(t)&&(bu(t)||t?.function.strict||!1)}function r1(n){return Og(n.response_format)?!0:n.tools?.some(e=>bu(e)||e.type==="function"&&e.function.strict===!0)??!1}function s1(n){for(const e of n||[])if(e.type!=="function")throw new Se(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function UO(n){for(const e of n??[]){if(e.type!=="function")throw new Se(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Se(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const td=n=>n?.role==="assistant",i1=n=>n?.role==="tool";var Am,Th,Sh,$l,Bl,Ah,zl,ss,Wl,nd,rd,aa,o1;class Mg{constructor(){Am.add(this),this.controller=new AbortController,Th.set(this,void 0),Sh.set(this,()=>{}),$l.set(this,()=>{}),Bl.set(this,void 0),Ah.set(this,()=>{}),zl.set(this,()=>{}),ss.set(this,{}),Wl.set(this,!1),nd.set(this,!1),rd.set(this,!1),aa.set(this,!1),ke(this,Th,new Promise((e,t)=>{ke(this,Sh,e,"f"),ke(this,$l,t,"f")})),ke(this,Bl,new Promise((e,t)=>{ke(this,Ah,e,"f"),ke(this,zl,t,"f")})),W(this,Th,"f").catch(()=>{}),W(this,Bl,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},W(this,Am,"m",o1).bind(this))},0)}_connected(){this.ended||(W(this,Sh,"f").call(this),this._emit("connect"))}get ended(){return W(this,Wl,"f")}get errored(){return W(this,nd,"f")}get aborted(){return W(this,rd,"f")}abort(){this.controller.abort()}on(e,t){return(W(this,ss,"f")[e]||(W(this,ss,"f")[e]=[])).push({listener:t}),this}off(e,t){const r=W(this,ss,"f")[e];if(!r)return this;const o=r.findIndex(a=>a.listener===t);return o>=0&&r.splice(o,1),this}once(e,t){return(W(this,ss,"f")[e]||(W(this,ss,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,r)=>{ke(this,aa,!0),e!=="error"&&this.once("error",r),this.once(e,t)})}async done(){ke(this,aa,!0),await W(this,Bl,"f")}_emit(e,...t){if(W(this,Wl,"f"))return;e==="end"&&(ke(this,Wl,!0),W(this,Ah,"f").call(this));const r=W(this,ss,"f")[e];if(r&&(W(this,ss,"f")[e]=r.filter(o=>!o.once),r.forEach(({listener:o})=>o(...t))),e==="abort"){const o=t[0];!W(this,aa,"f")&&!r?.length&&Promise.reject(o),W(this,$l,"f").call(this,o),W(this,zl,"f").call(this,o),this._emit("end");return}if(e==="error"){const o=t[0];!W(this,aa,"f")&&!r?.length&&Promise.reject(o),W(this,$l,"f").call(this,o),W(this,zl,"f").call(this,o),this._emit("end")}}_emitFinal(){}}Th=new WeakMap,Sh=new WeakMap,$l=new WeakMap,Bl=new WeakMap,Ah=new WeakMap,zl=new WeakMap,ss=new WeakMap,Wl=new WeakMap,nd=new WeakMap,rd=new WeakMap,aa=new WeakMap,Am=new WeakSet,o1=function(e){if(ke(this,nd,!0),e instanceof Error&&e.name==="AbortError"&&(e=new qn),e instanceof qn)return ke(this,rd,!0),this._emit("abort",e);if(e instanceof Se)return this._emit("error",e);if(e instanceof Error){const t=new Se(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new Se(String(e)))};function $O(n){return typeof n.parse=="function"}var un,xm,sd,Cm,Rm,km,a1,l1;const BO=10;class u1 extends Mg{constructor(){super(...arguments),un.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=e.choices[0]?.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),i1(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(td(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionToolCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Se("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),W(this,un,"m",xm).call(this)}async finalMessage(){return await this.done(),W(this,un,"m",sd).call(this)}async finalFunctionToolCall(){return await this.done(),W(this,un,"m",Cm).call(this)}async finalFunctionToolCallResult(){return await this.done(),W(this,un,"m",Rm).call(this)}async totalUsage(){return await this.done(),W(this,un,"m",km).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=W(this,un,"m",sd).call(this);t&&this._emit("finalMessage",t);const r=W(this,un,"m",xm).call(this);r&&this._emit("finalContent",r);const o=W(this,un,"m",Cm).call(this);o&&this._emit("finalFunctionToolCall",o);const a=W(this,un,"m",Rm).call(this);a!=null&&this._emit("finalFunctionToolCallResult",a),this._chatCompletions.some(c=>c.usage)&&this._emit("totalUsage",W(this,un,"m",km).call(this))}async _createChatCompletion(e,t,r){const o=r?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),W(this,un,"m",a1).call(this,t);const a=await e.chat.completions.create({...t,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Lg(a,t))}async _runChatCompletion(e,t,r){for(const o of t.messages)this._addMessage(o,!1);return await this._createChatCompletion(e,t,r)}async _runTools(e,t,r){const o="tool",{tool_choice:a="auto",stream:c,...d}=t,p=typeof a!="string"&&a.type==="function"&&a?.function?.name,{maxChatCompletions:g=BO}=r||{},v=t.tools.map(x=>{if(bu(x)){if(!x.$callback)throw new Se("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:x.$callback,name:x.function.name,description:x.function.description||"",parameters:x.function.parameters,parse:x.$parseRaw,strict:!0}}}return x}),E={};for(const x of v)x.type==="function"&&(E[x.function.name||x.function.function.name]=x.function);const T="tools"in t?v.map(x=>x.type==="function"?{type:"function",function:{name:x.function.name||x.function.function.name,parameters:x.function.parameters,description:x.function.description,strict:x.function.strict}}:x):void 0;for(const x of t.messages)this._addMessage(x,!1);for(let x=0;x<g;++x){const j=(await this._createChatCompletion(e,{...d,tool_choice:a,tools:T,messages:[...this.messages]},r)).choices[0]?.message;if(!j)throw new Se("missing message in ChatCompletion response");if(!j.tool_calls?.length)return;for(const V of j.tool_calls){if(V.type!=="function")continue;const H=V.id,{name:F,arguments:X}=V.function,re=E[F];if(re){if(p&&p!==F){const A=`Invalid tool_call: ${JSON.stringify(F)}. ${JSON.stringify(p)} requested. Please try again`;this._addMessage({role:o,tool_call_id:H,content:A});continue}}else{const A=`Invalid tool_call: ${JSON.stringify(F)}. Available options are: ${Object.keys(E).map(R=>JSON.stringify(R)).join(", ")}. Please try again`;this._addMessage({role:o,tool_call_id:H,content:A});continue}let _e;try{_e=$O(re)?await re.parse(X):X}catch(A){const R=A instanceof Error?A.message:String(A);this._addMessage({role:o,tool_call_id:H,content:R});continue}const ge=await re.function(_e,this),b=W(this,un,"m",l1).call(this,ge);if(this._addMessage({role:o,tool_call_id:H,content:b}),p)return}}}}un=new WeakSet,xm=function(){return W(this,un,"m",sd).call(this).content??null},sd=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(td(t))return{...t,content:t.content??null,refusal:t.refusal??null}}throw new Se("stream ended without producing a ChatCompletionMessage with role=assistant")},Cm=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(td(t)&&t?.tool_calls?.length)return t.tool_calls.filter(r=>r.type==="function").at(-1)?.function}},Rm=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(i1(t)&&t.content!=null&&typeof t.content=="string"&&this.messages.some(r=>r.role==="assistant"&&r.tool_calls?.some(o=>o.type==="function"&&o.id===t.tool_call_id)))return t.content}},km=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},a1=function(e){if(e.n!=null&&e.n>1)throw new Se("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},l1=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class Vg extends u1{static runTools(e,t,r){const o=new Vg,a={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return o._run(()=>o._runTools(e,t,a)),o}_addMessage(e,t=!0){super._addMessage(e,t),td(e)&&e.content&&this._emit("content",e.content)}}const c1=1,h1=2,d1=4,f1=8,p1=16,m1=32,g1=64,y1=128,_1=256,v1=y1|_1,w1=p1|m1|v1|g1,E1=c1|h1|w1,I1=d1|f1,zO=E1|I1,Ft={STR:c1,NUM:h1,ARR:d1,OBJ:f1,NULL:p1,BOOL:m1,NAN:g1,INFINITY:y1,MINUS_INFINITY:_1,INF:v1,SPECIAL:w1,ATOM:E1,COLLECTION:I1,ALL:zO};class WO extends Error{}class qO extends Error{}function HO(n,e=Ft.ALL){if(typeof n!="string")throw new TypeError(`expecting str, got ${typeof n}`);if(!n.trim())throw new Error(`${n} is empty`);return KO(n.trim(),e)}const KO=(n,e)=>{const t=n.length;let r=0;const o=T=>{throw new WO(`${T} at position ${r}`)},a=T=>{throw new qO(`${T} at position ${r}`)},c=()=>(E(),r>=t&&o("Unexpected end of input"),n[r]==='"'?d():n[r]==="{"?p():n[r]==="["?g():n.substring(r,r+4)==="null"||Ft.NULL&e&&t-r<4&&"null".startsWith(n.substring(r))?(r+=4,null):n.substring(r,r+4)==="true"||Ft.BOOL&e&&t-r<4&&"true".startsWith(n.substring(r))?(r+=4,!0):n.substring(r,r+5)==="false"||Ft.BOOL&e&&t-r<5&&"false".startsWith(n.substring(r))?(r+=5,!1):n.substring(r,r+8)==="Infinity"||Ft.INFINITY&e&&t-r<8&&"Infinity".startsWith(n.substring(r))?(r+=8,1/0):n.substring(r,r+9)==="-Infinity"||Ft.MINUS_INFINITY&e&&1<t-r&&t-r<9&&"-Infinity".startsWith(n.substring(r))?(r+=9,-1/0):n.substring(r,r+3)==="NaN"||Ft.NAN&e&&t-r<3&&"NaN".startsWith(n.substring(r))?(r+=3,NaN):v()),d=()=>{const T=r;let x=!1;for(r++;r<t&&(n[r]!=='"'||x&&n[r-1]==="\\");)x=n[r]==="\\"?!x:!1,r++;if(n.charAt(r)=='"')try{return JSON.parse(n.substring(T,++r-Number(x)))}catch(M){a(String(M))}else if(Ft.STR&e)try{return JSON.parse(n.substring(T,r-Number(x))+'"')}catch{return JSON.parse(n.substring(T,n.lastIndexOf("\\"))+'"')}o("Unterminated string literal")},p=()=>{r++,E();const T={};try{for(;n[r]!=="}";){if(E(),r>=t&&Ft.OBJ&e)return T;const x=d();E(),r++;try{const M=c();Object.defineProperty(T,x,{value:M,writable:!0,enumerable:!0,configurable:!0})}catch(M){if(Ft.OBJ&e)return T;throw M}E(),n[r]===","&&r++}}catch{if(Ft.OBJ&e)return T;o("Expected '}' at end of object")}return r++,T},g=()=>{r++;const T=[];try{for(;n[r]!=="]";)T.push(c()),E(),n[r]===","&&r++}catch{if(Ft.ARR&e)return T;o("Expected ']' at end of array")}return r++,T},v=()=>{if(r===0){n==="-"&&Ft.NUM&e&&o("Not sure what '-' is");try{return JSON.parse(n)}catch(x){if(Ft.NUM&e)try{return n[n.length-1]==="."?JSON.parse(n.substring(0,n.lastIndexOf("."))):JSON.parse(n.substring(0,n.lastIndexOf("e")))}catch{}a(String(x))}}const T=r;for(n[r]==="-"&&r++;n[r]&&!",]}".includes(n[r]);)r++;r==t&&!(Ft.NUM&e)&&o("Unterminated number literal");try{return JSON.parse(n.substring(T,r))}catch{n.substring(T,r)==="-"&&Ft.NUM&e&&o("Not sure what '-' is");try{return JSON.parse(n.substring(T,n.lastIndexOf("e")))}catch(M){a(String(M))}}},E=()=>{for(;r<t&&` 
\r	`.includes(n[r]);)r++};return c()},E0=n=>HO(n,Ft.ALL^Ft.NUM);var bt,rs,Zo,Hs,Fp,sh,jp,Up,$p,ih,Bp,I0;class du extends u1{constructor(e){super(),bt.add(this),rs.set(this,void 0),Zo.set(this,void 0),Hs.set(this,void 0),ke(this,rs,e),ke(this,Zo,[])}get currentChatCompletionSnapshot(){return W(this,Hs,"f")}static fromReadableStream(e){const t=new du(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,r){const o=new du(t);return o._run(()=>o._runChatCompletion(e,{...t,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createChatCompletion(e,t,r){super._createChatCompletion;const o=r?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),W(this,bt,"m",Fp).call(this);const a=await e.chat.completions.create({...t,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const c of a)W(this,bt,"m",jp).call(this,c);if(a.controller.signal?.aborted)throw new qn;return this._addChatCompletion(W(this,bt,"m",ih).call(this))}async _fromReadableStream(e,t){const r=t?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),W(this,bt,"m",Fp).call(this),this._connected();const o=Rr.fromReadableStream(e,this.controller);let a;for await(const c of o)a&&a!==c.id&&this._addChatCompletion(W(this,bt,"m",ih).call(this)),W(this,bt,"m",jp).call(this,c),a=c.id;if(o.controller.signal?.aborted)throw new qn;return this._addChatCompletion(W(this,bt,"m",ih).call(this))}[(rs=new WeakMap,Zo=new WeakMap,Hs=new WeakMap,bt=new WeakSet,Fp=function(){this.ended||ke(this,Hs,void 0)},sh=function(t){let r=W(this,Zo,"f")[t.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},W(this,Zo,"f")[t.index]=r,r)},jp=function(t){if(this.ended)return;const r=W(this,bt,"m",I0).call(this,t);this._emit("chunk",t,r);for(const o of t.choices){const a=r.choices[o.index];o.delta.content!=null&&a.message?.role==="assistant"&&a.message?.content&&(this._emit("content",o.delta.content,a.message.content),this._emit("content.delta",{delta:o.delta.content,snapshot:a.message.content,parsed:a.message.parsed})),o.delta.refusal!=null&&a.message?.role==="assistant"&&a.message?.refusal&&this._emit("refusal.delta",{delta:o.delta.refusal,snapshot:a.message.refusal}),o.logprobs?.content!=null&&a.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:o.logprobs?.content,snapshot:a.logprobs?.content??[]}),o.logprobs?.refusal!=null&&a.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:o.logprobs?.refusal,snapshot:a.logprobs?.refusal??[]});const c=W(this,bt,"m",sh).call(this,a);a.finish_reason&&(W(this,bt,"m",$p).call(this,a),c.current_tool_call_index!=null&&W(this,bt,"m",Up).call(this,a,c.current_tool_call_index));for(const d of o.delta.tool_calls??[])c.current_tool_call_index!==d.index&&(W(this,bt,"m",$p).call(this,a),c.current_tool_call_index!=null&&W(this,bt,"m",Up).call(this,a,c.current_tool_call_index)),c.current_tool_call_index=d.index;for(const d of o.delta.tool_calls??[]){const p=a.message.tool_calls?.[d.index];p?.type&&(p?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:p.function?.name,index:d.index,arguments:p.function.arguments,parsed_arguments:p.function.parsed_arguments,arguments_delta:d.function?.arguments??""}):(p?.type,void 0))}}},Up=function(t,r){if(W(this,bt,"m",sh).call(this,t).done_tool_calls.has(r))return;const a=t.message.tool_calls?.[r];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const c=W(this,rs,"f")?.tools?.find(d=>ed(d)&&d.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:r,arguments:a.function.arguments,parsed_arguments:bu(c)?c.$parseRaw(a.function.arguments):c?.function.strict?JSON.parse(a.function.arguments):null})}else a.type},$p=function(t){const r=W(this,bt,"m",sh).call(this,t);if(t.message.content&&!r.content_done){r.content_done=!0;const o=W(this,bt,"m",Bp).call(this);this._emit("content.done",{content:t.message.content,parsed:o?o.$parseRaw(t.message.content):null})}t.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:t.message.refusal})),t.logprobs?.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:t.logprobs.content})),t.logprobs?.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:t.logprobs.refusal}))},ih=function(){if(this.ended)throw new Se("stream has ended, this shouldn't happen");const t=W(this,Hs,"f");if(!t)throw new Se("request ended without sending any chunks");return ke(this,Hs,void 0),ke(this,Zo,[]),GO(t,W(this,rs,"f"))},Bp=function(){const t=W(this,rs,"f")?.response_format;return Og(t)?t:null},I0=function(t){var r,o,a,c;let d=W(this,Hs,"f");const{choices:p,...g}=t;d?Object.assign(d,g):d=ke(this,Hs,{...g,choices:[]});for(const{delta:v,finish_reason:E,index:T,logprobs:x=null,...M}of t.choices){let j=d.choices[T];if(j||(j=d.choices[T]={finish_reason:E,index:T,message:{},logprobs:x,...M}),x)if(!j.logprobs)j.logprobs=Object.assign({},x);else{const{content:ge,refusal:b,...A}=x;Object.assign(j.logprobs,A),ge&&((r=j.logprobs).content??(r.content=[]),j.logprobs.content.push(...ge)),b&&((o=j.logprobs).refusal??(o.refusal=[]),j.logprobs.refusal.push(...b))}if(E&&(j.finish_reason=E,W(this,rs,"f")&&r1(W(this,rs,"f")))){if(E==="length")throw new jT;if(E==="content_filter")throw new UT}if(Object.assign(j,M),!v)continue;const{content:V,refusal:H,function_call:F,role:X,tool_calls:re,..._e}=v;if(Object.assign(j.message,_e),H&&(j.message.refusal=(j.message.refusal||"")+H),X&&(j.message.role=X),F&&(j.message.function_call?(F.name&&(j.message.function_call.name=F.name),F.arguments&&((a=j.message.function_call).arguments??(a.arguments=""),j.message.function_call.arguments+=F.arguments)):j.message.function_call=F),V&&(j.message.content=(j.message.content||"")+V,!j.message.refusal&&W(this,bt,"m",Bp).call(this)&&(j.message.parsed=E0(j.message.content))),re){j.message.tool_calls||(j.message.tool_calls=[]);for(const{index:ge,id:b,type:A,function:R,...P}of re){const N=(c=j.message.tool_calls)[ge]??(c[ge]={});Object.assign(N,P),b&&(N.id=b),A&&(N.type=A),R&&(N.function??(N.function={name:R.name??"",arguments:""})),R?.name&&(N.function.name=R.name),R?.arguments&&(N.function.arguments+=R.arguments,jO(W(this,rs,"f"),N)&&(N.function.parsed_arguments=E0(N.function.arguments)))}}}return d},Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("chunk",o=>{const a=t.shift();a?a.resolve(o):e.push(o)}),this.on("end",()=>{r=!0;for(const o of t)o.resolve(void 0);t.length=0}),this.on("abort",o=>{r=!0;for(const a of t)a.reject(o);t.length=0}),this.on("error",o=>{r=!0;for(const a of t)a.reject(o);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,c)=>t.push({resolve:a,reject:c})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Rr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function GO(n,e){const{id:t,choices:r,created:o,model:a,system_fingerprint:c,...d}=n,p={...d,id:t,choices:r.map(({message:g,finish_reason:v,index:E,logprobs:T,...x})=>{if(!v)throw new Se(`missing finish_reason for choice ${E}`);const{content:M=null,function_call:j,tool_calls:V,...H}=g,F=g.role;if(!F)throw new Se(`missing role for choice ${E}`);if(j){const{arguments:X,name:re}=j;if(X==null)throw new Se(`missing function_call.arguments for choice ${E}`);if(!re)throw new Se(`missing function_call.name for choice ${E}`);return{...x,message:{content:M,function_call:{arguments:X,name:re},role:F,refusal:g.refusal??null},finish_reason:v,index:E,logprobs:T}}return V?{...x,index:E,finish_reason:v,logprobs:T,message:{...H,role:F,content:M,refusal:g.refusal??null,tool_calls:V.map((X,re)=>{const{function:_e,type:ge,id:b,...A}=X,{arguments:R,name:P,...N}=_e||{};if(b==null)throw new Se(`missing choices[${E}].tool_calls[${re}].id
${oh(n)}`);if(ge==null)throw new Se(`missing choices[${E}].tool_calls[${re}].type
${oh(n)}`);if(P==null)throw new Se(`missing choices[${E}].tool_calls[${re}].function.name
${oh(n)}`);if(R==null)throw new Se(`missing choices[${E}].tool_calls[${re}].function.arguments
${oh(n)}`);return{...A,id:b,type:ge,function:{...N,name:P,arguments:R}}})}}:{...x,message:{...H,content:M,role:F,refusal:g.refusal??null},finish_reason:v,index:E,logprobs:T}}),created:o,model:a,object:"chat.completion",...c?{system_fingerprint:c}:{}};return MO(p,e)}function oh(n){return JSON.stringify(n)}class id extends du{static fromReadableStream(e){const t=new id(null);return t._run(()=>t._fromReadableStream(e)),t}static runTools(e,t,r){const o=new id(t),a={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return o._run(()=>o._runTools(e,t,a)),o}}let Fg=class extends Ce{constructor(){super(...arguments),this.messages=new n1(this._client)}create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}retrieve(e,t){return this._client.get(oe`/chat/completions/${e}`,t)}update(e,t,r){return this._client.post(oe`/chat/completions/${e}`,{body:t,...r})}list(e={},t){return this._client.getAPIList("/chat/completions",St,{query:e,...t})}delete(e,t){return this._client.delete(oe`/chat/completions/${e}`,t)}parse(e,t){return UO(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(r=>Lg(r,e))}runTools(e,t){return e.stream?id.runTools(this._client,e,t):Vg.runTools(this._client,e,t)}stream(e,t){return du.createChatCompletion(this._client,e,t)}};Fg.Messages=n1;class jg extends Ce{constructor(){super(...arguments),this.completions=new Fg(this._client)}}jg.Completions=Fg;const T1=Symbol("brand.privateNullableHeaders");function*QO(n){if(!n)return;if(T1 in n){const{values:r,nulls:o}=n;yield*r.entries();for(const a of o)yield[a,null];return}let e=!1,t;n instanceof Headers?t=n.entries():a0(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let r of t){const o=r[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");const a=a0(r[1])?r[1]:[r[1]];let c=!1;for(const d of a)d!==void 0&&(e&&!c&&(c=!0,yield[o,null]),yield[o,d])}}const we=n=>{const e=new Headers,t=new Set;for(const r of n){const o=new Set;for(const[a,c]of QO(r)){const d=a.toLowerCase();o.has(d)||(e.delete(a),o.add(d)),c===null?(e.delete(a),t.add(d)):(e.append(a,c),t.delete(d))}}return{[T1]:!0,values:e,nulls:t}};class S1 extends Ce{create(e,t){return this._client.post("/audio/speech",{body:e,...t,headers:we([{Accept:"application/octet-stream"},t?.headers]),__binaryResponse:!0})}}class A1 extends Ce{create(e,t){return this._client.post("/audio/transcriptions",no({body:e,...t,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class x1 extends Ce{create(e,t){return this._client.post("/audio/translations",no({body:e,...t,__metadata:{model:e.model}},this._client))}}class Pu extends Ce{constructor(){super(...arguments),this.transcriptions=new A1(this._client),this.translations=new x1(this._client),this.speech=new S1(this._client)}}Pu.Transcriptions=A1;Pu.Translations=x1;Pu.Speech=S1;class C1 extends Ce{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(oe`/batches/${e}`,t)}list(e={},t){return this._client.getAPIList("/batches",St,{query:e,...t})}cancel(e,t){return this._client.post(oe`/batches/${e}/cancel`,t)}}class R1 extends Ce{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:we([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}retrieve(e,t){return this._client.get(oe`/assistants/${e}`,{...t,headers:we([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}update(e,t,r){return this._client.post(oe`/assistants/${e}`,{body:t,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e={},t){return this._client.getAPIList("/assistants",St,{query:e,...t,headers:we([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}delete(e,t){return this._client.delete(oe`/assistants/${e}`,{...t,headers:we([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}}class k1 extends Ce{create(e,t){return this._client.post("/realtime/sessions",{body:e,...t,headers:we([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}}class b1 extends Ce{create(e,t){return this._client.post("/realtime/transcription_sessions",{body:e,...t,headers:we([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}}class Fd extends Ce{constructor(){super(...arguments),this.sessions=new k1(this._client),this.transcriptionSessions=new b1(this._client)}}Fd.Sessions=k1;Fd.TranscriptionSessions=b1;class P1 extends Ce{create(e,t,r){return this._client.post(oe`/threads/${e}/messages`,{body:t,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,t,r){const{thread_id:o}=t;return this._client.get(oe`/threads/${o}/messages/${e}`,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,t,r){const{thread_id:o,...a}=t;return this._client.post(oe`/threads/${o}/messages/${e}`,{body:a,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,t={},r){return this._client.getAPIList(oe`/threads/${e}/messages`,St,{query:t,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,t,r){const{thread_id:o}=t;return this._client.delete(oe`/threads/${o}/messages/${e}`,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}class N1 extends Ce{retrieve(e,t,r){const{thread_id:o,run_id:a,...c}=t;return this._client.get(oe`/threads/${o}/runs/${a}/steps/${e}`,{query:c,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,t,r){const{thread_id:o,...a}=t;return this._client.getAPIList(oe`/threads/${o}/runs/${e}/steps`,St,{query:a,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}const XO=n=>{if(typeof Buffer<"u"){const e=Buffer.from(n,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(n),t=e.length,r=new Uint8Array(t);for(let o=0;o<t;o++)r[o]=e.charCodeAt(o);return Array.from(new Float32Array(r.buffer))}};var JO={};const ea=n=>{if(typeof globalThis.process<"u")return JO?.[n]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(n)?.trim()};var qt,Ki,bm,Cr,xh,cr,Gi,ua,zi,od,bn,Ch,Rh,tu,ql,Hl,T0,S0,A0,x0,C0,R0,k0;class nu extends Mg{constructor(){super(...arguments),qt.add(this),bm.set(this,[]),Cr.set(this,{}),xh.set(this,{}),cr.set(this,void 0),Gi.set(this,void 0),ua.set(this,void 0),zi.set(this,void 0),od.set(this,void 0),bn.set(this,void 0),Ch.set(this,void 0),Rh.set(this,void 0),tu.set(this,void 0)}[(bm=new WeakMap,Cr=new WeakMap,xh=new WeakMap,cr=new WeakMap,Gi=new WeakMap,ua=new WeakMap,zi=new WeakMap,od=new WeakMap,bn=new WeakMap,Ch=new WeakMap,Rh=new WeakMap,tu=new WeakMap,qt=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("event",o=>{const a=t.shift();a?a.resolve(o):e.push(o)}),this.on("end",()=>{r=!0;for(const o of t)o.resolve(void 0);t.length=0}),this.on("abort",o=>{r=!0;for(const a of t)a.reject(o);t.length=0}),this.on("error",o=>{r=!0;for(const a of t)a.reject(o);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,c)=>t.push({resolve:a,reject:c})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new Ki;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){const r=t?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const o=Rr.fromReadableStream(e,this.controller);for await(const a of o)W(this,qt,"m",ql).call(this,a);if(o.controller.signal?.aborted)throw new qn;return this._addRun(W(this,qt,"m",Hl).call(this))}toReadableStream(){return new Rr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,r,o){const a=new Ki;return a._run(()=>a._runToolAssistantStream(e,t,r,{...o,headers:{...o?.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(e,t,r,o){const a=o?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const c={...r,stream:!0},d=await e.submitToolOutputs(t,c,{...o,signal:this.controller.signal});this._connected();for await(const p of d)W(this,qt,"m",ql).call(this,p);if(d.controller.signal?.aborted)throw new qn;return this._addRun(W(this,qt,"m",Hl).call(this))}static createThreadAssistantStream(e,t,r){const o=new Ki;return o._run(()=>o._threadAssistantStream(e,t,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),o}static createAssistantStream(e,t,r,o){const a=new Ki;return a._run(()=>a._runAssistantStream(e,t,r,{...o,headers:{...o?.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return W(this,Ch,"f")}currentRun(){return W(this,Rh,"f")}currentMessageSnapshot(){return W(this,cr,"f")}currentRunStepSnapshot(){return W(this,tu,"f")}async finalRunSteps(){return await this.done(),Object.values(W(this,Cr,"f"))}async finalMessages(){return await this.done(),Object.values(W(this,xh,"f"))}async finalRun(){if(await this.done(),!W(this,Gi,"f"))throw Error("Final run was not received.");return W(this,Gi,"f")}async _createThreadAssistantStream(e,t,r){const o=r?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const a={...t,stream:!0},c=await e.createAndRun(a,{...r,signal:this.controller.signal});this._connected();for await(const d of c)W(this,qt,"m",ql).call(this,d);if(c.controller.signal?.aborted)throw new qn;return this._addRun(W(this,qt,"m",Hl).call(this))}async _createAssistantStream(e,t,r,o){const a=o?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const c={...r,stream:!0},d=await e.create(t,c,{...o,signal:this.controller.signal});this._connected();for await(const p of d)W(this,qt,"m",ql).call(this,p);if(d.controller.signal?.aborted)throw new qn;return this._addRun(W(this,qt,"m",Hl).call(this))}static accumulateDelta(e,t){for(const[r,o]of Object.entries(t)){if(!e.hasOwnProperty(r)){e[r]=o;continue}let a=e[r];if(a==null){e[r]=o;continue}if(r==="index"||r==="type"){e[r]=o;continue}if(typeof a=="string"&&typeof o=="string")a+=o;else if(typeof a=="number"&&typeof o=="number")a+=o;else if(Lp(a)&&Lp(o))a=this.accumulateDelta(a,o);else if(Array.isArray(a)&&Array.isArray(o)){if(a.every(c=>typeof c=="string"||typeof c=="number")){a.push(...o);continue}for(const c of o){if(!Lp(c))throw new Error(`Expected array delta entry to be an object but got: ${c}`);const d=c.index;if(d==null)throw console.error(c),new Error("Expected array delta entry to have an `index` property");if(typeof d!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${d}`);const p=a[d];p==null?a.push(c):a[d]=this.accumulateDelta(p,c)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${o}, accValue: ${a}`);e[r]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,t,r){return await this._createThreadAssistantStream(t,e,r)}async _runAssistantStream(e,t,r,o){return await this._createAssistantStream(t,e,r,o)}async _runToolAssistantStream(e,t,r,o){return await this._createToolAssistantStream(t,e,r,o)}}Ki=nu,ql=function(e){if(!this.ended)switch(ke(this,Ch,e),W(this,qt,"m",A0).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":W(this,qt,"m",k0).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":W(this,qt,"m",S0).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":W(this,qt,"m",T0).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Hl=function(){if(this.ended)throw new Se("stream has ended, this shouldn't happen");if(!W(this,Gi,"f"))throw Error("Final run has not been received");return W(this,Gi,"f")},T0=function(e){const[t,r]=W(this,qt,"m",C0).call(this,e,W(this,cr,"f"));ke(this,cr,t),W(this,xh,"f")[t.id]=t;for(const o of r){const a=t.content[o.index];a?.type=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const o of e.data.delta.content){if(o.type=="text"&&o.text){let a=o.text,c=t.content[o.index];if(c&&c.type=="text")this._emit("textDelta",a,c.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(o.index!=W(this,ua,"f")){if(W(this,zi,"f"))switch(W(this,zi,"f").type){case"text":this._emit("textDone",W(this,zi,"f").text,W(this,cr,"f"));break;case"image_file":this._emit("imageFileDone",W(this,zi,"f").image_file,W(this,cr,"f"));break}ke(this,ua,o.index)}ke(this,zi,t.content[o.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(W(this,ua,"f")!==void 0){const o=e.data.content[W(this,ua,"f")];if(o)switch(o.type){case"image_file":this._emit("imageFileDone",o.image_file,W(this,cr,"f"));break;case"text":this._emit("textDone",o.text,W(this,cr,"f"));break}}W(this,cr,"f")&&this._emit("messageDone",e.data),ke(this,cr,void 0)}},S0=function(e){const t=W(this,qt,"m",x0).call(this,e);switch(ke(this,tu,t),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&t.step_details.type=="tool_calls")for(const a of r.step_details.tool_calls)a.index==W(this,od,"f")?this._emit("toolCallDelta",a,t.step_details.tool_calls[a.index]):(W(this,bn,"f")&&this._emit("toolCallDone",W(this,bn,"f")),ke(this,od,a.index),ke(this,bn,t.step_details.tool_calls[a.index]),W(this,bn,"f")&&this._emit("toolCallCreated",W(this,bn,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":ke(this,tu,void 0),e.data.step_details.type=="tool_calls"&&W(this,bn,"f")&&(this._emit("toolCallDone",W(this,bn,"f")),ke(this,bn,void 0)),this._emit("runStepDone",e.data,t);break}},A0=function(e){W(this,bm,"f").push(e),this._emit("event",e)},x0=function(e){switch(e.event){case"thread.run.step.created":return W(this,Cr,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=W(this,Cr,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const o=Ki.accumulateDelta(t,r.delta);W(this,Cr,"f")[e.data.id]=o}return W(this,Cr,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":W(this,Cr,"f")[e.data.id]=e.data;break}if(W(this,Cr,"f")[e.data.id])return W(this,Cr,"f")[e.data.id];throw new Error("No snapshot available")},C0=function(e,t){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let o=e.data;if(o.delta.content)for(const a of o.delta.content)if(a.index in t.content){let c=t.content[a.index];t.content[a.index]=W(this,qt,"m",R0).call(this,a,c)}else t.content[a.index]=a,r.push(a);return[t,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},R0=function(e,t){return Ki.accumulateDelta(t,e)},k0=function(e){switch(ke(this,Rh,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":ke(this,Gi,e.data),W(this,bn,"f")&&(this._emit("toolCallDone",W(this,bn,"f")),ke(this,bn,void 0));break}};let Ug=class extends Ce{constructor(){super(...arguments),this.steps=new N1(this._client)}create(e,t,r){const{include:o,...a}=t;return this._client.post(oe`/threads/${e}/runs`,{query:{include:o},body:a,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:t.stream??!1})}retrieve(e,t,r){const{thread_id:o}=t;return this._client.get(oe`/threads/${o}/runs/${e}`,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,t,r){const{thread_id:o,...a}=t;return this._client.post(oe`/threads/${o}/runs/${e}`,{body:a,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,t={},r){return this._client.getAPIList(oe`/threads/${e}/runs`,St,{query:t,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(e,t,r){const{thread_id:o}=t;return this._client.post(oe`/threads/${o}/runs/${e}/cancel`,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,t,r){const o=await this.create(e,t,r);return await this.poll(o.id,{thread_id:e},r)}createAndStream(e,t,r){return nu.createAssistantStream(e,this._client.beta.threads.runs,t,r)}async poll(e,t,r){const o=we([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:c}=await this.retrieve(e,t,{...r,headers:{...r?.headers,...o}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let d=5e3;if(r?.pollIntervalMs)d=r.pollIntervalMs;else{const p=c.headers.get("openai-poll-after-ms");if(p){const g=parseInt(p);isNaN(g)||(d=g)}}await ku(d);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,t,r){return nu.createAssistantStream(e,this._client.beta.threads.runs,t,r)}submitToolOutputs(e,t,r){const{thread_id:o,...a}=t;return this._client.post(oe`/threads/${o}/runs/${e}/submit_tool_outputs`,{body:a,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:t.stream??!1})}async submitToolOutputsAndPoll(e,t,r){const o=await this.submitToolOutputs(e,t,r);return await this.poll(o.id,t,r)}submitToolOutputsStream(e,t,r){return nu.createToolAssistantStream(e,this._client.beta.threads.runs,t,r)}};Ug.Steps=N1;class jd extends Ce{constructor(){super(...arguments),this.runs=new Ug(this._client),this.messages=new P1(this._client)}create(e={},t){return this._client.post("/threads",{body:e,...t,headers:we([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}retrieve(e,t){return this._client.get(oe`/threads/${e}`,{...t,headers:we([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}update(e,t,r){return this._client.post(oe`/threads/${e}`,{body:t,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,t){return this._client.delete(oe`/threads/${e}`,{...t,headers:we([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:we([{"OpenAI-Beta":"assistants=v2"},t?.headers]),stream:e.stream??!1})}async createAndRunPoll(e,t){const r=await this.createAndRun(e,t);return await this.runs.poll(r.id,{thread_id:r.thread_id},t)}createAndRunStream(e,t){return nu.createThreadAssistantStream(e,this._client.beta.threads,t)}}jd.Runs=Ug;jd.Messages=P1;class Nu extends Ce{constructor(){super(...arguments),this.realtime=new Fd(this._client),this.assistants=new R1(this._client),this.threads=new jd(this._client)}}Nu.Realtime=Fd;Nu.Assistants=R1;Nu.Threads=jd;class D1 extends Ce{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}class O1 extends Ce{retrieve(e,t,r){const{container_id:o}=t;return this._client.get(oe`/containers/${o}/files/${e}/content`,{...r,headers:we([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}}let $g=class extends Ce{constructor(){super(...arguments),this.content=new O1(this._client)}create(e,t,r){return this._client.post(oe`/containers/${e}/files`,no({body:t,...r},this._client))}retrieve(e,t,r){const{container_id:o}=t;return this._client.get(oe`/containers/${o}/files/${e}`,r)}list(e,t={},r){return this._client.getAPIList(oe`/containers/${e}/files`,St,{query:t,...r})}delete(e,t,r){const{container_id:o}=t;return this._client.delete(oe`/containers/${o}/files/${e}`,{...r,headers:we([{Accept:"*/*"},r?.headers])})}};$g.Content=O1;class Bg extends Ce{constructor(){super(...arguments),this.files=new $g(this._client)}create(e,t){return this._client.post("/containers",{body:e,...t})}retrieve(e,t){return this._client.get(oe`/containers/${e}`,t)}list(e={},t){return this._client.getAPIList("/containers",St,{query:e,...t})}delete(e,t){return this._client.delete(oe`/containers/${e}`,{...t,headers:we([{Accept:"*/*"},t?.headers])})}}Bg.Files=$g;class L1 extends Ce{create(e,t,r){const{include:o,...a}=t;return this._client.post(oe`/conversations/${e}/items`,{query:{include:o},body:a,...r})}retrieve(e,t,r){const{conversation_id:o,...a}=t;return this._client.get(oe`/conversations/${o}/items/${e}`,{query:a,...r})}list(e,t={},r){return this._client.getAPIList(oe`/conversations/${e}/items`,CO,{query:t,...r})}delete(e,t,r){const{conversation_id:o}=t;return this._client.delete(oe`/conversations/${o}/items/${e}`,r)}}class zg extends Ce{constructor(){super(...arguments),this.items=new L1(this._client)}create(e,t){return this._client.post("/conversations",{body:e,...t})}retrieve(e,t){return this._client.get(oe`/conversations/${e}`,t)}update(e,t,r){return this._client.post(oe`/conversations/${e}`,{body:t,...r})}delete(e,t){return this._client.delete(oe`/conversations/${e}`,t)}}zg.Items=L1;class M1 extends Ce{create(e,t){const r=!!e.encoding_format;let o=r?e.encoding_format:"base64";r&&Wt(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const a=this._client.post("/embeddings",{body:{...e,encoding_format:o},...t});return r?a:(Wt(this._client).debug("embeddings/decoding base64 embeddings from base64"),a._thenUnwrap(c=>(c&&c.data&&c.data.forEach(d=>{const p=d.embedding;d.embedding=XO(p)}),c)))}}class V1 extends Ce{retrieve(e,t,r){const{eval_id:o,run_id:a}=t;return this._client.get(oe`/evals/${o}/runs/${a}/output_items/${e}`,r)}list(e,t,r){const{eval_id:o,...a}=t;return this._client.getAPIList(oe`/evals/${o}/runs/${e}/output_items`,St,{query:a,...r})}}class Wg extends Ce{constructor(){super(...arguments),this.outputItems=new V1(this._client)}create(e,t,r){return this._client.post(oe`/evals/${e}/runs`,{body:t,...r})}retrieve(e,t,r){const{eval_id:o}=t;return this._client.get(oe`/evals/${o}/runs/${e}`,r)}list(e,t={},r){return this._client.getAPIList(oe`/evals/${e}/runs`,St,{query:t,...r})}delete(e,t,r){const{eval_id:o}=t;return this._client.delete(oe`/evals/${o}/runs/${e}`,r)}cancel(e,t,r){const{eval_id:o}=t;return this._client.post(oe`/evals/${o}/runs/${e}`,r)}}Wg.OutputItems=V1;class qg extends Ce{constructor(){super(...arguments),this.runs=new Wg(this._client)}create(e,t){return this._client.post("/evals",{body:e,...t})}retrieve(e,t){return this._client.get(oe`/evals/${e}`,t)}update(e,t,r){return this._client.post(oe`/evals/${e}`,{body:t,...r})}list(e={},t){return this._client.getAPIList("/evals",St,{query:e,...t})}delete(e,t){return this._client.delete(oe`/evals/${e}`,t)}}qg.Runs=Wg;let F1=class extends Ce{create(e,t){return this._client.post("/files",no({body:e,...t},this._client))}retrieve(e,t){return this._client.get(oe`/files/${e}`,t)}list(e={},t){return this._client.getAPIList("/files",St,{query:e,...t})}delete(e,t){return this._client.delete(oe`/files/${e}`,t)}content(e,t){return this._client.get(oe`/files/${e}/content`,{...t,headers:we([{Accept:"application/binary"},t?.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:r=1800*1e3}={}){const o=new Set(["processed","error","deleted"]),a=Date.now();let c=await this.retrieve(e);for(;!c.status||!o.has(c.status);)if(await ku(t),c=await this.retrieve(e),Date.now()-a>r)throw new Pg({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return c}};class j1 extends Ce{}let U1=class extends Ce{run(e,t){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...t})}validate(e,t){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...t})}};class Hg extends Ce{constructor(){super(...arguments),this.graders=new U1(this._client)}}Hg.Graders=U1;class $1 extends Ce{create(e,t,r){return this._client.getAPIList(oe`/fine_tuning/checkpoints/${e}/permissions`,Vd,{body:t,method:"post",...r})}retrieve(e,t={},r){return this._client.get(oe`/fine_tuning/checkpoints/${e}/permissions`,{query:t,...r})}delete(e,t,r){const{fine_tuned_model_checkpoint:o}=t;return this._client.delete(oe`/fine_tuning/checkpoints/${o}/permissions/${e}`,r)}}let Kg=class extends Ce{constructor(){super(...arguments),this.permissions=new $1(this._client)}};Kg.Permissions=$1;class B1 extends Ce{list(e,t={},r){return this._client.getAPIList(oe`/fine_tuning/jobs/${e}/checkpoints`,St,{query:t,...r})}}class Gg extends Ce{constructor(){super(...arguments),this.checkpoints=new B1(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(oe`/fine_tuning/jobs/${e}`,t)}list(e={},t){return this._client.getAPIList("/fine_tuning/jobs",St,{query:e,...t})}cancel(e,t){return this._client.post(oe`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},r){return this._client.getAPIList(oe`/fine_tuning/jobs/${e}/events`,St,{query:t,...r})}pause(e,t){return this._client.post(oe`/fine_tuning/jobs/${e}/pause`,t)}resume(e,t){return this._client.post(oe`/fine_tuning/jobs/${e}/resume`,t)}}Gg.Checkpoints=B1;class Da extends Ce{constructor(){super(...arguments),this.methods=new j1(this._client),this.jobs=new Gg(this._client),this.checkpoints=new Kg(this._client),this.alpha=new Hg(this._client)}}Da.Methods=j1;Da.Jobs=Gg;Da.Checkpoints=Kg;Da.Alpha=Hg;class z1 extends Ce{}class Qg extends Ce{constructor(){super(...arguments),this.graderModels=new z1(this._client)}}Qg.GraderModels=z1;class W1 extends Ce{createVariation(e,t){return this._client.post("/images/variations",no({body:e,...t},this._client))}edit(e,t){return this._client.post("/images/edits",no({body:e,...t,stream:e.stream??!1},this._client))}generate(e,t){return this._client.post("/images/generations",{body:e,...t,stream:e.stream??!1})}}class q1 extends Ce{retrieve(e,t){return this._client.get(oe`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",Vd,e)}delete(e,t){return this._client.delete(oe`/models/${e}`,t)}}class H1 extends Ce{create(e,t){return this._client.post("/moderations",{body:e,...t})}}function YO(n,e){return!e||!e4(e)?{...n,output_parsed:null,output:n.output.map(t=>t.type==="function_call"?{...t,parsed_arguments:null}:t.type==="message"?{...t,content:t.content.map(r=>({...r,parsed:null}))}:t)}:K1(n,e)}function K1(n,e){const t=n.output.map(o=>{if(o.type==="function_call")return{...o,parsed_arguments:r4(e,o)};if(o.type==="message"){const a=o.content.map(c=>c.type==="output_text"?{...c,parsed:ZO(e,c.text)}:c);return{...o,content:a}}return o}),r=Object.assign({},n,{output:t});return Object.getOwnPropertyDescriptor(n,"output_text")||Pm(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const o of r.output)if(o.type==="message"){for(const a of o.content)if(a.type==="output_text"&&a.parsed!==null)return a.parsed}return null}}),r}function ZO(n,e){return n.text?.format?.type!=="json_schema"?null:"$parseRaw"in n.text?.format?(n.text?.format).$parseRaw(e):JSON.parse(e)}function e4(n){return!!Og(n.text?.format)}function t4(n){return n?.$brand==="auto-parseable-tool"}function n4(n,e){return n.find(t=>t.type==="function"&&t.name===e)}function r4(n,e){const t=n4(n.tools??[],e.name);return{...e,...e,parsed_arguments:t4(t)?t.$parseRaw(e.arguments):t?.strict?JSON.parse(e.arguments):null}}function Pm(n){const e=[];for(const t of n.output)if(t.type==="message")for(const r of t.content)r.type==="output_text"&&e.push(r.text);n.output_text=e.join("")}var ta,ah,Ks,lh,b0,P0,N0,D0;class Xg extends Mg{constructor(e){super(),ta.add(this),ah.set(this,void 0),Ks.set(this,void 0),lh.set(this,void 0),ke(this,ah,e)}static createResponse(e,t,r){const o=new Xg(t);return o._run(()=>o._createOrRetrieveResponse(e,t,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createOrRetrieveResponse(e,t,r){const o=r?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),W(this,ta,"m",b0).call(this);let a,c=null;"response_id"in t?(a=await e.responses.retrieve(t.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),c=t.starting_after??null):a=await e.responses.create({...t,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const d of a)W(this,ta,"m",P0).call(this,d,c);if(a.controller.signal?.aborted)throw new qn;return W(this,ta,"m",N0).call(this)}[(ah=new WeakMap,Ks=new WeakMap,lh=new WeakMap,ta=new WeakSet,b0=function(){this.ended||ke(this,Ks,void 0)},P0=function(t,r){if(this.ended)return;const o=(c,d)=>{(r==null||d.sequence_number>r)&&this._emit(c,d)},a=W(this,ta,"m",D0).call(this,t);switch(o("event",t),t.type){case"response.output_text.delta":{const c=a.output[t.output_index];if(!c)throw new Se(`missing output at index ${t.output_index}`);if(c.type==="message"){const d=c.content[t.content_index];if(!d)throw new Se(`missing content at index ${t.content_index}`);if(d.type!=="output_text")throw new Se(`expected content to be 'output_text', got ${d.type}`);o("response.output_text.delta",{...t,snapshot:d.text})}break}case"response.function_call_arguments.delta":{const c=a.output[t.output_index];if(!c)throw new Se(`missing output at index ${t.output_index}`);c.type==="function_call"&&o("response.function_call_arguments.delta",{...t,snapshot:c.arguments});break}default:o(t.type,t);break}},N0=function(){if(this.ended)throw new Se("stream has ended, this shouldn't happen");const t=W(this,Ks,"f");if(!t)throw new Se("request ended without sending any events");ke(this,Ks,void 0);const r=s4(t,W(this,ah,"f"));return ke(this,lh,r),r},D0=function(t){let r=W(this,Ks,"f");if(!r){if(t.type!=="response.created")throw new Se(`When snapshot hasn't been set yet, expected 'response.created' event, got ${t.type}`);return r=ke(this,Ks,t.response),r}switch(t.type){case"response.output_item.added":{r.output.push(t.item);break}case"response.content_part.added":{const o=r.output[t.output_index];if(!o)throw new Se(`missing output at index ${t.output_index}`);o.type==="message"&&o.content.push(t.part);break}case"response.output_text.delta":{const o=r.output[t.output_index];if(!o)throw new Se(`missing output at index ${t.output_index}`);if(o.type==="message"){const a=o.content[t.content_index];if(!a)throw new Se(`missing content at index ${t.content_index}`);if(a.type!=="output_text")throw new Se(`expected content to be 'output_text', got ${a.type}`);a.text+=t.delta}break}case"response.function_call_arguments.delta":{const o=r.output[t.output_index];if(!o)throw new Se(`missing output at index ${t.output_index}`);o.type==="function_call"&&(o.arguments+=t.delta);break}case"response.completed":{ke(this,Ks,t.response);break}}return r},Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("event",o=>{const a=t.shift();a?a.resolve(o):e.push(o)}),this.on("end",()=>{r=!0;for(const o of t)o.resolve(void 0);t.length=0}),this.on("abort",o=>{r=!0;for(const a of t)a.reject(o);t.length=0}),this.on("error",o=>{r=!0;for(const a of t)a.reject(o);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,c)=>t.push({resolve:a,reject:c})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=W(this,lh,"f");if(!e)throw new Se("stream ended without producing a ChatCompletion");return e}}function s4(n,e){return YO(n,e)}class G1 extends Ce{list(e,t={},r){return this._client.getAPIList(oe`/responses/${e}/input_items`,St,{query:t,...r})}}class Jg extends Ce{constructor(){super(...arguments),this.inputItems=new G1(this._client)}create(e,t){return this._client.post("/responses",{body:e,...t,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&Pm(r),r))}retrieve(e,t={},r){return this._client.get(oe`/responses/${e}`,{query:t,...r,stream:t?.stream??!1})._thenUnwrap(o=>("object"in o&&o.object==="response"&&Pm(o),o))}delete(e,t){return this._client.delete(oe`/responses/${e}`,{...t,headers:we([{Accept:"*/*"},t?.headers])})}parse(e,t){return this._client.responses.create(e,t)._thenUnwrap(r=>K1(r,e))}stream(e,t){return Xg.createResponse(this._client,e,t)}cancel(e,t){return this._client.post(oe`/responses/${e}/cancel`,t)}}Jg.InputItems=G1;class Q1 extends Ce{create(e,t,r){return this._client.post(oe`/uploads/${e}/parts`,no({body:t,...r},this._client))}}class Yg extends Ce{constructor(){super(...arguments),this.parts=new Q1(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(oe`/uploads/${e}/cancel`,t)}complete(e,t,r){return this._client.post(oe`/uploads/${e}/complete`,{body:t,...r})}}Yg.Parts=Q1;const i4=async n=>{const e=await Promise.allSettled(n),t=e.filter(o=>o.status==="rejected");if(t.length){for(const o of t)console.error(o.reason);throw new Error(`${t.length} promise(s) failed - see the above errors`)}const r=[];for(const o of e)o.status==="fulfilled"&&r.push(o.value);return r};class X1 extends Ce{create(e,t,r){return this._client.post(oe`/vector_stores/${e}/file_batches`,{body:t,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,t,r){const{vector_store_id:o}=t;return this._client.get(oe`/vector_stores/${o}/file_batches/${e}`,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(e,t,r){const{vector_store_id:o}=t;return this._client.post(oe`/vector_stores/${o}/file_batches/${e}/cancel`,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,t,r){const o=await this.create(e,t);return await this.poll(e,o.id,r)}listFiles(e,t,r){const{vector_store_id:o,...a}=t;return this._client.getAPIList(oe`/vector_stores/${o}/file_batches/${e}/files`,St,{query:a,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async poll(e,t,r){const o=we([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:c}=await this.retrieve(t,{vector_store_id:e},{...r,headers:o}).withResponse();switch(a.status){case"in_progress":let d=5e3;if(r?.pollIntervalMs)d=r.pollIntervalMs;else{const p=c.headers.get("openai-poll-after-ms");if(p){const g=parseInt(p);isNaN(g)||(d=g)}}await ku(d);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:t,fileIds:r=[]},o){if(t==null||t.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=o?.maxConcurrency??5,c=Math.min(a,t.length),d=this._client,p=t.values(),g=[...r];async function v(T){for(let x of T){const M=await d.files.create({file:x,purpose:"assistants"},o);g.push(M.id)}}const E=Array(c).fill(p).map(v);return await i4(E),await this.createAndPoll(e,{file_ids:g})}}class J1 extends Ce{create(e,t,r){return this._client.post(oe`/vector_stores/${e}/files`,{body:t,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,t,r){const{vector_store_id:o}=t;return this._client.get(oe`/vector_stores/${o}/files/${e}`,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,t,r){const{vector_store_id:o,...a}=t;return this._client.post(oe`/vector_stores/${o}/files/${e}`,{body:a,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,t={},r){return this._client.getAPIList(oe`/vector_stores/${e}/files`,St,{query:t,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,t,r){const{vector_store_id:o}=t;return this._client.delete(oe`/vector_stores/${o}/files/${e}`,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,t,r){const o=await this.create(e,t,r);return await this.poll(e,o.id,r)}async poll(e,t,r){const o=we([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const a=await this.retrieve(t,{vector_store_id:e},{...r,headers:o}).withResponse(),c=a.data;switch(c.status){case"in_progress":let d=5e3;if(r?.pollIntervalMs)d=r.pollIntervalMs;else{const p=a.response.headers.get("openai-poll-after-ms");if(p){const g=parseInt(p);isNaN(g)||(d=g)}}await ku(d);break;case"failed":case"completed":return c}}}async upload(e,t,r){const o=await this._client.files.create({file:t,purpose:"assistants"},r);return this.create(e,{file_id:o.id},r)}async uploadAndPoll(e,t,r){const o=await this.upload(e,t,r);return await this.poll(e,o.id,r)}content(e,t,r){const{vector_store_id:o}=t;return this._client.getAPIList(oe`/vector_stores/${o}/files/${e}/content`,Vd,{...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}class Ud extends Ce{constructor(){super(...arguments),this.files=new J1(this._client),this.fileBatches=new X1(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:we([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}retrieve(e,t){return this._client.get(oe`/vector_stores/${e}`,{...t,headers:we([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}update(e,t,r){return this._client.post(oe`/vector_stores/${e}`,{body:t,...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e={},t){return this._client.getAPIList("/vector_stores",St,{query:e,...t,headers:we([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}delete(e,t){return this._client.delete(oe`/vector_stores/${e}`,{...t,headers:we([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}search(e,t,r){return this._client.getAPIList(oe`/vector_stores/${e}/search`,Vd,{body:t,method:"post",...r,headers:we([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}Ud.Files=J1;Ud.FileBatches=X1;var la,Y1,kh;class Z1 extends Ce{constructor(){super(...arguments),la.add(this)}async unwrap(e,t,r=this._client.webhookSecret,o=300){return await this.verifySignature(e,t,r,o),JSON.parse(e)}async verifySignature(e,t,r=this._client.webhookSecret,o=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");W(this,la,"m",Y1).call(this,r);const a=we([t]).values,c=W(this,la,"m",kh).call(this,a,"webhook-signature"),d=W(this,la,"m",kh).call(this,a,"webhook-timestamp"),p=W(this,la,"m",kh).call(this,a,"webhook-id"),g=parseInt(d,10);if(isNaN(g))throw new Fl("Invalid webhook timestamp format");const v=Math.floor(Date.now()/1e3);if(v-g>o)throw new Fl("Webhook timestamp is too old");if(g>v+o)throw new Fl("Webhook timestamp is too new");const E=c.split(" ").map(j=>j.startsWith("v1,")?j.substring(3):j),T=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),x=p?`${p}.${d}.${e}`:`${d}.${e}`,M=await crypto.subtle.importKey("raw",T,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const j of E)try{const V=Buffer.from(j,"base64");if(await crypto.subtle.verify("HMAC",M,V,new TextEncoder().encode(x)))return}catch{continue}throw new Fl("The given webhook signature does not match the expected signature")}}la=new WeakSet,Y1=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},kh=function(e,t){if(!e)throw new Error("Headers are required");const r=e.get(t);if(r==null)throw new Error(`Missing required header: ${t}`);return r};var Nm,Zg,bh,eS;class Me{constructor({baseURL:e=ea("OPENAI_BASE_URL"),apiKey:t=ea("OPENAI_API_KEY"),organization:r=ea("OPENAI_ORG_ID")??null,project:o=ea("OPENAI_PROJECT_ID")??null,webhookSecret:a=ea("OPENAI_WEBHOOK_SECRET")??null,...c}={}){if(Nm.add(this),bh.set(this,void 0),this.completions=new D1(this),this.chat=new jg(this),this.embeddings=new M1(this),this.files=new F1(this),this.images=new W1(this),this.audio=new Pu(this),this.moderations=new H1(this),this.models=new q1(this),this.fineTuning=new Da(this),this.graders=new Qg(this),this.vectorStores=new Ud(this),this.webhooks=new Z1(this),this.beta=new Nu(this),this.batches=new C1(this),this.uploads=new Yg(this),this.responses=new Jg(this),this.conversations=new zg(this),this.evals=new qg(this),this.containers=new Bg(this),t===void 0)throw new Se("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const d={apiKey:t,organization:r,project:o,webhookSecret:a,...c,baseURL:e||"https://api.openai.com/v1"};if(!d.dangerouslyAllowBrowser&&sO())throw new Se(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=d.baseURL,this.timeout=d.timeout??Zg.DEFAULT_TIMEOUT,this.logger=d.logger??console;const p="warn";this.logLevel=p,this.logLevel=y0(d.logLevel,"ClientOptions.logLevel",this)??y0(ea("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??p,this.fetchOptions=d.fetchOptions,this.maxRetries=d.maxRetries??2,this.fetch=d.fetch??uO(),ke(this,bh,hO),this._options=d,this.apiKey=t,this.organization=r,this.project=o,this.webhookSecret=a}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){}async authHeaders(e){return we([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return yO(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${oa}`}defaultIdempotencyKey(){return`stainless-node-retry-${bT()}`}makeStatusError(e,t,r,o){return Qt.generate(e,t,r,o)}buildURL(e,t,r){const o=!W(this,Nm,"m",eS).call(this)&&r||this.baseURL,a=ZD(e)?new URL(e):new URL(o+(o.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),c=this.defaultQuery();return eO(c)||(t={...c,...t}),typeof t=="object"&&t&&!Array.isArray(t)&&(a.search=this.stringifyQuery(t)),a.toString()}async prepareOptions(e){}async prepareRequest(e,{url:t,options:r}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,r){return this.request(Promise.resolve(r).then(o=>({method:e,path:t,...o})))}request(e,t=null){return new Md(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,r){const o=await e,a=o.maxRetries??this.maxRetries;t==null&&(t=a),await this.prepareOptions(o);const{req:c,url:d,timeout:p}=await this.buildRequest(o,{retryCount:a-t});await this.prepareRequest(c,{url:d,options:o});const g="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),v=r===void 0?"":`, retryOf: ${r}`,E=Date.now();if(Wt(this).debug(`[${g}] sending request`,Bi({retryOfRequestLogID:r,method:o.method,url:d,options:o,headers:c.headers})),o.signal?.aborted)throw new qn;const T=new AbortController,x=await this.fetchWithTimeout(d,c,p,T).catch(Em),M=Date.now();if(x instanceof Error){const H=`retrying, ${t} attempts remaining`;if(o.signal?.aborted)throw new qn;const F=wm(x)||/timed? ?out/i.test(String(x)+("cause"in x?String(x.cause):""));if(t)return Wt(this).info(`[${g}] connection ${F?"timed out":"failed"} - ${H}`),Wt(this).debug(`[${g}] connection ${F?"timed out":"failed"} (${H})`,Bi({retryOfRequestLogID:r,url:d,durationMs:M-E,message:x.message})),this.retryRequest(o,t,r??g);throw Wt(this).info(`[${g}] connection ${F?"timed out":"failed"} - error; no more retries left`),Wt(this).debug(`[${g}] connection ${F?"timed out":"failed"} (error; no more retries left)`,Bi({retryOfRequestLogID:r,url:d,durationMs:M-E,message:x.message})),F?new Pg:new Od({cause:x})}const j=[...x.headers.entries()].filter(([H])=>H==="x-request-id").map(([H,F])=>", "+H+": "+JSON.stringify(F)).join(""),V=`[${g}${v}${j}] ${c.method} ${d} ${x.ok?"succeeded":"failed"} with status ${x.status} in ${M-E}ms`;if(!x.ok){const H=await this.shouldRetry(x);if(t&&H){const b=`retrying, ${t} attempts remaining`;return await cO(x.body),Wt(this).info(`${V} - ${b}`),Wt(this).debug(`[${g}] response error (${b})`,Bi({retryOfRequestLogID:r,url:x.url,status:x.status,headers:x.headers,durationMs:M-E})),this.retryRequest(o,t,r??g,x.headers)}const F=H?"error; no more retries left":"error; not retryable";Wt(this).info(`${V} - ${F}`);const X=await x.text().catch(b=>Em(b).message),re=rO(X),_e=re?void 0:X;throw Wt(this).debug(`[${g}] response error (${F})`,Bi({retryOfRequestLogID:r,url:x.url,status:x.status,headers:x.headers,message:_e,durationMs:Date.now()-E})),this.makeStatusError(x.status,re,_e,x.headers)}return Wt(this).info(V),Wt(this).debug(`[${g}] response start`,Bi({retryOfRequestLogID:r,url:x.url,status:x.status,headers:x.headers,durationMs:M-E})),{response:x,options:o,controller:T,requestLogID:g,retryOfRequestLogID:r,startTime:E}}getAPIList(e,t,r){return this.requestAPIList(t,{method:"get",path:e,...r})}requestAPIList(e,t){const r=this.makeRequest(t,null,void 0);return new xO(this,r,e)}async fetchWithTimeout(e,t,r,o){const{signal:a,method:c,...d}=t||{};a&&a.addEventListener("abort",()=>o.abort());const p=setTimeout(()=>o.abort(),r),g=globalThis.ReadableStream&&d.body instanceof globalThis.ReadableStream||typeof d.body=="object"&&d.body!==null&&Symbol.asyncIterator in d.body,v={signal:o.signal,...g?{duplex:"half"}:{},method:"GET",...d};c&&(v.method=c.toUpperCase());try{return await this.fetch.call(void 0,e,v)}finally{clearTimeout(p)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,r,o){let a;const c=o?.get("retry-after-ms");if(c){const p=parseFloat(c);Number.isNaN(p)||(a=p)}const d=o?.get("retry-after");if(d&&!a){const p=parseFloat(d);Number.isNaN(p)?a=Date.parse(d)-Date.now():a=p*1e3}if(!(a&&0<=a&&a<60*1e3)){const p=e.maxRetries??this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(t,p)}return await ku(a),this.makeRequest(e,t-1,r)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,c=Math.min(.5*Math.pow(2,a),8),d=1-Math.random()*.25;return c*d*1e3}async buildRequest(e,{retryCount:t=0}={}){const r={...e},{method:o,path:a,query:c,defaultBaseURL:d}=r,p=this.buildURL(a,c,d);"timeout"in r&&nO("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:g,body:v}=this.buildBody({options:r}),E=await this.buildHeaders({options:e,method:o,bodyHeaders:g,retryCount:t});return{req:{method:o,headers:E,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&v instanceof globalThis.ReadableStream&&{duplex:"half"},...v&&{body:v},...this.fetchOptions??{},...r.fetchOptions??{}},url:p,timeout:r.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:r,retryCount:o}){let a={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const c=we([a,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...lO(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(c),c.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=we([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||e instanceof Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:zT(e)}:W(this,bh,"f").call(this,{body:e,headers:r})}}Zg=Me,bh=new WeakMap,Nm=new WeakSet,eS=function(){return this.baseURL!=="https://api.openai.com/v1"};Me.OpenAI=Zg;Me.DEFAULT_TIMEOUT=6e5;Me.OpenAIError=Se;Me.APIError=Qt;Me.APIConnectionError=Od;Me.APIConnectionTimeoutError=Pg;Me.APIUserAbortError=qn;Me.NotFoundError=OT;Me.ConflictError=LT;Me.RateLimitError=VT;Me.BadRequestError=PT;Me.AuthenticationError=NT;Me.InternalServerError=FT;Me.PermissionDeniedError=DT;Me.UnprocessableEntityError=MT;Me.InvalidWebhookSignatureError=Fl;Me.toFile=DO;Me.Completions=D1;Me.Chat=jg;Me.Embeddings=M1;Me.Files=F1;Me.Images=W1;Me.Audio=Pu;Me.Moderations=H1;Me.Models=q1;Me.FineTuning=Da;Me.Graders=Qg;Me.VectorStores=Ud;Me.Webhooks=Z1;Me.Beta=Nu;Me.Batches=C1;Me.Uploads=Yg;Me.Responses=Jg;Me.Conversations=zg;Me.Evals=qg;Me.Containers=Bg;const o4=()=>{const[n,e]=q.useState(!1),[t,r]=q.useState(""),[o,a]=q.useState(null),[c,d]=q.useState(""),[p,g]=q.useState(!1),[v,E]=q.useState([]),[T,x]=q.useState(!0),[M,j]=q.useState(!1),V=q.useRef(null),H=ld(),{user:F,logout:X,loading:re,isAuthenticated:_e}=Dd(),ge=new Me({apiKey:"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",dangerouslyAllowBrowser:!0});q.useEffect(()=>{!re&&!_e&&H("/login")},[_e,re,H]),q.useEffect(()=>{if(!F)return;x(!0);const Y=QN(Dp(is,"chats"),XN("userId","==",F.uid)),ie=tD(Y,O=>{const Q=[];O.forEach(ue=>{Q.push({id:ue.id,...ue.data()})}),Q.sort((ue,Ee)=>new Date(Ee.updatedAt||Ee.createdAt)-new Date(ue.updatedAt||ue.createdAt)),console.log("Loaded chats:",Q),E(Q),x(!1),!o&&Q.length>0&&a(Q[0].id)},O=>{console.error("Error loading chats:",O),x(!1),O.code==="failed-precondition"&&console.error("Index required. Please create the index using the URL in the error message above.")});return()=>ie()},[F,o]),q.useEffect(()=>{F&&!T&&v.length===0&&!M&&(P(),j(!0))},[F,v.length,T,M]);const b=v.find(Y=>Y.id===o),A=v.filter(Y=>Y.title.toLowerCase().includes(c.toLowerCase())),R=()=>{V.current?.scrollIntoView({behavior:"smooth"})};q.useEffect(()=>{R()},[b?.messages]);const P=async()=>{if(F)try{const Y={title:"New Conversation",userId:F.uid,messages:[],lastMessage:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},ie=await Zw(Dp(is,"chats"),Y);a(ie.id),console.log("Initial chat created successfully")}catch(Y){console.error("Error creating initial chat:",Y)}},N=async()=>{try{await X(),E([]),a(null),j(!1),H("/")}catch(Y){console.error("Logout error:",Y),alert("Failed to logout. Please try again.")}};function U(){H("/profile")}const C=async(Y,ie=[])=>{try{console.log("Sending message to OpenAI:",Y);const O=[{role:"system",content:"You are a helpful, knowledgeable, and friendly AI assistant. Provide accurate, informative, and engaging responses. Be conversational but professional. If you're unsure about something, acknowledge it honestly."},...ie.slice(-10).map(Ee=>({role:Ee.isBot?"assistant":"user",content:Ee.text})),{role:"user",content:Y}],ue=(await ge.chat.completions.create({model:"gpt-4o-mini",messages:O,max_tokens:1500,temperature:.7,presence_penalty:.1,frequency_penalty:.1})).choices[0]?.message?.content;if(!ue)throw new Error("No response received from OpenAI");return console.log("OpenAI response received successfully"),ue}catch(O){return console.error("Error calling OpenAI:",O),O.status===401?"I apologize, but there's an authentication issue with the AI service. Please check the API configuration.":O.status===429?"I'm receiving too many requests right now. Please wait a moment and try again.":O.status===500?"The AI service is currently experiencing issues. Please try again in a few moments.":O.name==="NetworkError"||O.message.includes("fetch")?"I'm having trouble connecting to the AI service. Please check your internet connection and try again.":"I encountered an unexpected error. Please try rephrasing your message or try again later."}},Re=async()=>{if(!t.trim()||p||!o){console.log("Cannot send message:",{message:t.trim(),isLoading:p,currentChatId:o});return}const Y=t.trim();r(""),g(!0),console.log("Sending message:",Y),console.log("Current chat ID:",o);const ie={id:`user_${Date.now()}`,text:Y,isBot:!1,timestamp:new Date().toISOString()};try{const O=b?.messages||[];console.log("Current messages before update:",O);const Q=[...O,ie];console.log("Updated messages with user message:",Q),console.log("Updating Firestore with user message...");const ue={messages:Q,lastMessage:Y,updatedAt:new Date().toISOString()};O.length===0&&(ue.title=Y.length>50?Y.substring(0,50)+"...":Y),await Eh(Hi(is,"chats",o),ue),console.log("Firestore updated with user message"),console.log("Calling OpenAI...");const Ee=await C(Y,O);console.log("OpenAI response:",Ee);const Oe={id:`bot_${Date.now()}`,text:Ee,isBot:!0,timestamp:new Date().toISOString()},Ve=[...Q,Oe];console.log("Final messages with bot response:",Ve),console.log("Updating Firestore with bot response..."),await Eh(Hi(is,"chats",o),{messages:Ve,lastMessage:Ee.length>50?Ee.substring(0,50)+"...":Ee,updatedAt:new Date().toISOString()}),console.log("Firestore updated with bot response")}catch(O){console.error("Error in sendMessage:",O);const Q={id:`error_${Date.now()}`,text:"I apologize, but I encountered an error processing your message. Please try again, or if the problem persists, try creating a new chat.",isBot:!0,timestamp:new Date().toISOString()};try{const Ee=[...b?.messages||[],ie,Q];await Eh(Hi(is,"chats",o),{messages:Ee,lastMessage:Q.text,updatedAt:new Date().toISOString()}),console.log("Error message added to Firestore")}catch(ue){console.error("Error updating chat with error message:",ue)}}finally{g(!1)}},De=async()=>{if(F)try{const Y={title:"New Conversation",userId:F.uid,messages:[],lastMessage:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},ie=await Zw(Dp(is,"chats"),Y);a(ie.id),e(!1),console.log("New chat created successfully")}catch(Y){console.error("Error creating new chat:",Y),alert("Failed to create new chat. Please try again.")}},rt=async Y=>{if(v.length===1){alert("You cannot delete your last chat. Create a new chat first.");return}try{if(await eD(Hi(is,"chats",Y)),Y===o){const ie=v.filter(O=>O.id!==Y);ie.length>0&&a(ie[0].id)}console.log("Chat deleted successfully")}catch(ie){console.error("Error deleting chat:",ie),alert("Failed to delete chat. Please try again.")}},Ge=Y=>new Date(Y).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),le=Y=>{Y.key==="Enter"&&!Y.shiftKey&&(Y.preventDefault(),Re())};return re?I.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:I.jsxs("div",{className:"flex flex-col items-center gap-4",children:[I.jsx(Wn,{className:"animate-spin",size:32}),I.jsx("p",{className:"text-gray-400",children:"Loading..."})]})}):I.jsxs("div",{className:"flex h-screen bg-black text-white overflow-hidden",children:[I.jsxs("div",{className:"fixed inset-0 pointer-events-none",children:[I.jsx("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 bg-gradient-to-br from-purple-500/20 to-blue-600/20 rounded-full blur-3xl animate-pulse"}),I.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-48 h-48 bg-gradient-to-br from-pink-500/20 to-purple-600/20 rounded-full blur-2xl animate-pulse delay-1000"})]}),n&&I.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>e(!1)}),I.jsxs("div",{className:`${n?"translate-x-0":"-translate-x-full"} fixed lg:relative lg:translate-x-0 w-80 h-full bg-gray-900/80 backdrop-blur-xl border-r border-gray-800 z-50 transition-transform duration-300 flex flex-col`,children:[I.jsxs("div",{className:"p-6 border-b border-gray-800",children:[I.jsxs("div",{className:"flex items-center justify-between mb-4",children:[I.jsx("h2",{className:"text-2xl font-bold",children:"AI Chat"}),I.jsx("button",{onClick:()=>e(!1),className:"lg:hidden p-2 hover:bg-gray-800 rounded-lg transition-colors",children:I.jsx(kT,{size:20})})]}),I.jsxs("button",{onClick:De,className:"w-full flex items-center gap-3 bg-blue-600 hover:bg-blue-700 px-4 py-3 rounded-xl font-medium transition-all duration-200 transform hover:scale-105",children:[I.jsx(UD,{size:20}),"New Chat"]})]}),I.jsx("div",{className:"p-4 border-b border-gray-800",children:I.jsxs("div",{className:"relative",children:[I.jsx(zD,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",size:20}),I.jsx("input",{type:"text",placeholder:"Search chats...",value:c,onChange:Y=>d(Y.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-800/50 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),I.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:T?I.jsx("div",{className:"flex items-center justify-center py-8",children:I.jsxs("div",{className:"flex flex-col items-center gap-2",children:[I.jsx(Wn,{className:"animate-spin",size:24}),I.jsx("p",{className:"text-gray-400 text-sm",children:"Loading chats..."})]})}):A.length===0?I.jsxs("div",{className:"flex flex-col items-center py-8 text-gray-400",children:[I.jsx(r0,{size:48,className:"mb-4 opacity-50"}),I.jsx("p",{className:"text-center",children:c?"No chats match your search":"Creating your first chat..."}),!c&&I.jsx("p",{className:"text-sm text-center mt-2",children:"Your AI assistant is getting ready"})]}):A.map(Y=>I.jsx("div",{onClick:()=>{a(Y.id),e(!1)},className:`p-4 rounded-xl cursor-pointer transition-all duration-200 group relative ${o===Y.id?"bg-blue-600/20 border border-blue-500/30":"hover:bg-gray-800/50 border border-transparent"}`,children:I.jsxs("div",{className:"flex items-start justify-between",children:[I.jsxs("div",{className:"flex-1 min-w-0",children:[I.jsx("h3",{className:"font-medium truncate mb-1",children:Y.title}),I.jsx("p",{className:"text-sm text-gray-400 truncate",children:Y.lastMessage}),I.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(Y.updatedAt||Y.createdAt).toLocaleDateString()})]}),I.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:I.jsx("button",{onClick:ie=>{ie.stopPropagation(),rt(Y.id)},className:"p-1 hover:bg-red-500/20 text-red-400 hover:text-red-300 rounded transition-colors",children:I.jsx(RT,{size:16})})})]})},Y.id))}),I.jsx("div",{className:"p-4 border-t border-gray-800",children:I.jsxs("div",{className:"flex items-center gap-3",children:[I.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:F?.photoURL?I.jsx("img",{src:F.photoURL,alt:"Profile",className:"w-full h-full rounded-full object-cover"}):I.jsx(Zl,{size:20})}),I.jsxs("div",{className:"flex-1",children:[I.jsx("p",{className:"font-medium",children:F?.displayName||F?.email?.split("@")[0]||"User"}),I.jsx("p",{className:"text-sm text-gray-400 truncate",children:F?.email})]}),I.jsx("button",{onClick:U,className:"p-2 hover:bg-gray-800 rounded-lg transition-colors",children:I.jsx(KD,{size:20})})]})})]}),I.jsxs("div",{className:"flex-1 flex flex-col",children:[I.jsx("div",{className:"p-4 lg:p-6 border-b border-gray-800 bg-gray-900/50 backdrop-blur-xl",children:I.jsxs("div",{className:"flex items-center justify-between",children:[I.jsxs("div",{className:"flex items-center gap-4",children:[I.jsx("button",{onClick:()=>e(!0),className:"lg:hidden p-2 hover:bg-gray-800 rounded-lg transition-colors",children:I.jsx(ND,{size:24})}),I.jsxs("div",{children:[I.jsx("h1",{className:"text-xl lg:text-2xl font-bold",children:b?.title||"AI Chat"}),I.jsx("p",{className:"text-gray-400 text-sm",children:p?"AI is typing...":"Powered by OpenAI GPT-4o-mini"})]})]}),I.jsxs("div",{className:"flex items-center gap-2",children:[I.jsx("button",{onClick:U,className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:I.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:F?.photoURL?I.jsx("img",{src:F.photoURL,alt:"Profile",className:"w-full h-full rounded-full object-cover"}):I.jsx(Zl,{size:18})})}),I.jsx("button",{onClick:N,className:"p-2 hover:bg-gray-800 rounded-lg transition-colors text-red-400",children:I.jsx(CT,{size:20})})]})]})}),I.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6 space-y-4",children:b?I.jsxs(I.Fragment,{children:[b?.messages?.length>0?b.messages.map(Y=>I.jsxs("div",{className:`flex items-start gap-3 ${Y.isBot?"":"flex-row-reverse"}`,children:[I.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${Y.isBot?"bg-gradient-to-br from-blue-500 to-purple-600":"bg-gradient-to-br from-green-500 to-blue-500"}`,children:Y.isBot?I.jsx(Op,{size:16}):I.jsx(Zl,{size:16})}),I.jsxs("div",{className:`max-w-xs lg:max-w-md xl:max-w-lg ${Y.isBot?"":"text-right"}`,children:[I.jsx("div",{className:`p-3 lg:p-4 rounded-2xl ${Y.isBot?"bg-gray-800/50 border border-gray-700":"bg-blue-600/20 border border-blue-500/30"}`,children:I.jsx("p",{className:"text-sm lg:text-base whitespace-pre-wrap",children:Y.text})}),I.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Ge(Y.timestamp)})]})]},Y.id)):I.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[I.jsx(r0,{size:48,className:"mb-4 opacity-50"}),I.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Start a conversation"}),I.jsx("p",{className:"text-center",children:"Send a message to begin chatting with your AI assistant"})]}),p&&I.jsxs("div",{className:"flex items-start gap-3",children:[I.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 bg-gradient-to-br from-blue-500 to-purple-600",children:I.jsx(Op,{size:16})}),I.jsx("div",{className:"max-w-xs lg:max-w-md xl:max-lg",children:I.jsx("div",{className:"p-3 lg:p-4 rounded-2xl bg-gray-800/50 border border-gray-700",children:I.jsxs("div",{className:"flex items-center gap-2",children:[I.jsx(Wn,{className:"animate-spin",size:16}),I.jsx("p",{className:"text-sm lg:text-base",children:"AI is thinking..."})]})})})]}),I.jsx("div",{ref:V})]}):I.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[I.jsx(Op,{size:64,className:"mb-4 opacity-50"}),I.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Setting up your AI Assistant"}),I.jsx("p",{className:"text-center max-w-md",children:"Your personalized AI chat is being prepared..."})]})}),I.jsx("div",{className:"p-4 lg:p-6 border-t border-gray-800 bg-gray-900/50 backdrop-blur-xl",children:I.jsxs("div",{className:"max-w-4xl mx-auto",children:[I.jsx("div",{className:"flex gap-3",children:I.jsxs("div",{className:"flex-1 relative",children:[I.jsx("input",{type:"text",value:t,onChange:Y=>r(Y.target.value),onKeyPress:le,placeholder:b?p?"AI is responding...":"Ask me anything...":"Setting up chat...",disabled:p||!b,className:"w-full px-4 py-3 lg:py-4 pr-12 bg-gray-800/50 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed"}),I.jsx("button",{onClick:Re,disabled:!t.trim()||p||!b,className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 disabled:cursor-not-allowed rounded-lg transition-colors",children:p?I.jsx(Wn,{className:"animate-spin",size:16}):I.jsx(qD,{size:16})})]})}),I.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"Press Enter to send • Powered by OpenAI GPT-4o-mini"})]})})]})]})},O0=({children:n})=>{const{user:e,loading:t,isAuthenticated:r}=Dd();return t?I.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:I.jsxs("div",{className:"flex flex-col items-center gap-4",children:[I.jsx(Wn,{className:"animate-spin text-white",size:32}),I.jsx("div",{className:"text-white text-xl",children:"Loading..."})]})}):!r||!e?I.jsx(vm,{}):n},a4=()=>{const n=ld(),{user:e,logout:t,isAuthenticated:r,loading:o,updateUserProfile:a}=Dd(),[c,d]=q.useState(!0),[p,g]=q.useState(!1),[v,E]=q.useState("profile"),[T,x]=q.useState(!1),[M,j]=q.useState(!1),[V,H]=q.useState({displayName:"",email:"",phoneNumber:"",location:"",bio:"",photoURL:null,timezone:"Pacific Standard Time",language:"English",theme:"dark",createdAt:""}),[F,X]=q.useState(V);q.useEffect(()=>{o||(!r||!e?n("/"):re(),d(!1))},[r,e,o,n]);const re=async()=>{if(e)try{const C=Hi(is,"users",e.uid),Re=await Yw(C);let De={};Re.exists()&&(De=Re.data());const rt={displayName:e.displayName||e.email?.split("@")[0]||"User",email:e.email||"",phoneNumber:De.phoneNumber||"",location:De.location||"",bio:De.bio||"",photoURL:e.photoURL||null,timezone:De.timezone||"Pacific Standard Time",language:De.language||"English",theme:De.theme||"dark",createdAt:e.metadata?.creationTime||new Date().toISOString()};H(rt),X(rt)}catch(C){console.error("Error loading user data:",C)}},_e=async()=>{if(e){j(!0);try{F.displayName!==V.displayName&&await a(F.displayName,F.photoURL);const C=Hi(is,"users",e.uid),Re={displayName:F.displayName,phoneNumber:F.phoneNumber,location:F.location,bio:F.bio,timezone:F.timezone,language:F.language,theme:F.theme,updatedAt:new Date().toISOString()};(await Yw(C)).exists()?await Eh(C,Re):await ZN(C,{...Re,email:e.email,createdAt:e.metadata?.creationTime||new Date().toISOString()}),H(F),g(!1),alert("Profile updated successfully!")}catch(C){console.error("Error updating profile:",C),alert("Failed to update profile. Please try again.")}j(!1)}},ge=()=>{X(V),g(!1)},b=async()=>{try{await t(),x(!1),n("/")}catch(C){console.error("Error logging out:",C),alert("Failed to logout. Please try again.")}};if(c||o)return I.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:I.jsxs("div",{className:"flex flex-col items-center gap-4",children:[I.jsx(Wn,{className:"animate-spin",size:32}),I.jsx("p",{className:"text-gray-400",children:"Loading profile..."})]})});const A=[{id:"profile",label:"Profile",icon:Zl},{id:"security",label:"Security",icon:o0},{id:"preferences",label:"Preferences",icon:s0},{id:"data",label:"Data",icon:n0}],R=()=>I.jsxs("div",{className:"space-y-6",children:[I.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6",children:[I.jsxs("div",{className:"relative",children:[I.jsx("div",{className:"w-24 h-24 sm:w-32 sm:h-32 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-3xl sm:text-4xl font-bold shadow-lg",children:V.photoURL?I.jsx("img",{src:V.photoURL,alt:"Profile",className:"w-full h-full rounded-full object-cover"}):V.displayName.split(" ").map(C=>C[0]).join("").toUpperCase()}),p&&I.jsx("button",{className:"absolute bottom-0 right-0 bg-blue-600 hover:bg-blue-700 p-2 rounded-full shadow-lg transition-colors",children:I.jsx(fD,{size:16})})]}),I.jsxs("div",{className:"text-center sm:text-left",children:[I.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-2",children:V.displayName}),I.jsx("p",{className:"text-gray-400 mb-2",children:V.email}),I.jsxs("p",{className:"text-sm text-gray-500",children:["Member since"," ",new Date(V.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]})]}),I.jsxs("div",{className:"bg-gray-800/30 backdrop-blur-sm border border-gray-700 rounded-xl p-6",children:[I.jsxs("div",{className:"flex items-center justify-between mb-6",children:[I.jsx("h3",{className:"text-xl font-semibold text-white",children:"Personal Information"}),I.jsxs("button",{onClick:()=>{p?ge():g(!0)},disabled:M,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-600/50 text-white rounded-lg transition-colors",children:[M?I.jsx(Wn,{size:16,className:"animate-spin"}):p?I.jsx(kT,{size:16}):I.jsx(MD,{size:16}),p?"Cancel":"Edit"]})]}),I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[I.jsxs("div",{children:[I.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[I.jsx(Zl,{size:16,className:"inline mr-2"}),"Display Name"]}),p?I.jsx("input",{type:"text",value:F.displayName,onChange:C=>X({...F,displayName:C.target.value}),className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}):I.jsx("p",{className:"px-4 py-3 bg-gray-800/20 border border-gray-700 rounded-lg text-white",children:V.displayName||"Not provided"})]}),I.jsxs("div",{children:[I.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[I.jsx(_m,{size:16,className:"inline mr-2"}),"Email Address"]}),I.jsx("p",{className:"px-4 py-3 bg-gray-800/20 border border-gray-700 rounded-lg text-white",children:V.email||"Not provided"}),I.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed here"})]}),I.jsxs("div",{children:[I.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[I.jsx(FD,{size:16,className:"inline mr-2"}),"Phone Number"]}),p?I.jsx("input",{type:"tel",value:F.phoneNumber,onChange:C=>X({...F,phoneNumber:C.target.value}),className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter phone number"}):I.jsx("p",{className:"px-4 py-3 bg-gray-800/20 border border-gray-700 rounded-lg text-white",children:V.phoneNumber||"Not provided"})]}),I.jsxs("div",{children:[I.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[I.jsx(bD,{size:16,className:"inline mr-2"}),"Location"]}),p?I.jsx("input",{type:"text",value:F.location,onChange:C=>X({...F,location:C.target.value}),className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter location"}):I.jsx("p",{className:"px-4 py-3 bg-gray-800/20 border border-gray-700 rounded-lg text-white",children:V.location||"Not provided"})]})]}),I.jsxs("div",{className:"mt-6",children:[I.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"About Me"}),p?I.jsx("textarea",{value:F.bio,onChange:C=>X({...F,bio:C.target.value}),rows:4,className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Tell us about yourself..."}):I.jsx("p",{className:"px-4 py-3 bg-gray-800/20 border border-gray-700 rounded-lg text-white min-h-[100px]",children:V.bio||"No bio provided"})]}),p&&I.jsx("div",{className:"mt-6",children:I.jsxs("button",{onClick:_e,disabled:M,className:"flex items-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 disabled:bg-green-600/50 text-white rounded-lg transition-colors",children:[M?I.jsx(Wn,{size:16,className:"animate-spin"}):I.jsx(i0,{size:16}),M?"Saving...":"Save Changes"]})})]})]}),P=()=>I.jsx("div",{className:"space-y-6",children:I.jsxs("div",{className:"bg-gray-800/30 backdrop-blur-sm border border-gray-700 rounded-xl p-6",children:[I.jsx("h3",{className:"text-xl font-semibold text-white mb-6",children:"Account Security"}),I.jsxs("div",{className:"p-4 bg-gray-800/20 border border-gray-700 rounded-lg mb-6",children:[I.jsx("h4",{className:"font-medium text-white mb-3",children:"Account Details"}),I.jsxs("div",{className:"space-y-2 text-sm",children:[I.jsxs("div",{className:"flex justify-between",children:[I.jsx("span",{className:"text-gray-400",children:"User ID:"}),I.jsx("span",{className:"text-white font-mono text-xs",children:e?.uid})]}),I.jsxs("div",{className:"flex justify-between",children:[I.jsx("span",{className:"text-gray-400",children:"Email Verified:"}),I.jsx("span",{className:e?.emailVerified?"text-green-400":"text-red-400",children:e?.emailVerified?"Yes":"No"})]}),I.jsxs("div",{className:"flex justify-between",children:[I.jsx("span",{className:"text-gray-400",children:"Account Created:"}),I.jsx("span",{className:"text-white",children:e?.metadata?.creationTime?new Date(e.metadata.creationTime).toLocaleDateString():"Unknown"})]}),I.jsxs("div",{className:"flex justify-between",children:[I.jsx("span",{className:"text-gray-400",children:"Last Sign In:"}),I.jsx("span",{className:"text-white",children:e?.metadata?.lastSignInTime?new Date(e.metadata.lastSignInTime).toLocaleDateString():"Unknown"})]})]})]}),I.jsxs("div",{className:"space-y-4",children:[I.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-800/20 border border-gray-700 rounded-lg",children:[I.jsxs("div",{className:"flex items-center gap-3",children:[I.jsx(TD,{size:20,className:"text-blue-400"}),I.jsxs("div",{children:[I.jsx("h4",{className:"font-medium text-white",children:"Password Reset"}),I.jsx("p",{className:"text-sm text-gray-400",children:"Request a password reset email"})]})]}),I.jsx("button",{className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Reset"})]}),I.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-800/20 border border-gray-700 rounded-lg",children:[I.jsxs("div",{className:"flex items-center gap-3",children:[I.jsx(o0,{size:20,className:"text-green-400"}),I.jsxs("div",{children:[I.jsx("h4",{className:"font-medium text-white",children:"Two-Factor Authentication"}),I.jsx("p",{className:"text-sm text-gray-400",children:"Add extra security to your account"})]})]}),I.jsx("button",{className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors",children:"Enable"})]})]})]})}),N=()=>I.jsx("div",{className:"space-y-6",children:I.jsxs("div",{className:"bg-gray-800/30 backdrop-blur-sm border border-gray-700 rounded-xl p-6",children:[I.jsx("h3",{className:"text-xl font-semibold text-white mb-6",children:"Preferences"}),I.jsxs("div",{className:"space-y-6",children:[I.jsxs("div",{children:[I.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[I.jsx(ED,{size:16,className:"inline mr-2"}),"Language"]}),I.jsxs("select",{value:F.language,onChange:C=>X({...F,language:C.target.value}),className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[I.jsx("option",{value:"English",children:"English"}),I.jsx("option",{value:"Spanish",children:"Spanish"}),I.jsx("option",{value:"French",children:"French"}),I.jsx("option",{value:"German",children:"German"})]})]}),I.jsxs("div",{children:[I.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[I.jsx(hD,{size:16,className:"inline mr-2"}),"Timezone"]}),I.jsxs("select",{value:F.timezone,onChange:C=>X({...F,timezone:C.target.value}),className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[I.jsx("option",{value:"Pacific Standard Time",children:"Pacific (PST)"}),I.jsx("option",{value:"Eastern Standard Time",children:"Eastern (EST)"}),I.jsx("option",{value:"Central Standard Time",children:"Central (CST)"}),I.jsx("option",{value:"Mountain Standard Time",children:"Mountain (MST)"})]})]}),I.jsxs("div",{children:[I.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[I.jsx(s0,{size:16,className:"inline mr-2"}),"Theme"]}),I.jsxs("select",{value:F.theme,onChange:C=>X({...F,theme:C.target.value}),className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[I.jsx("option",{value:"dark",children:"Dark"}),I.jsx("option",{value:"light",children:"Light"}),I.jsx("option",{value:"auto",children:"Auto"})]})]})]}),I.jsx("div",{className:"mt-6",children:I.jsxs("button",{onClick:_e,disabled:M,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-600/50 text-white rounded-lg transition-colors",children:[M?I.jsx(Wn,{size:16,className:"animate-spin"}):I.jsx(i0,{size:16}),M?"Saving...":"Save Preferences"]})})]})}),U=()=>I.jsx("div",{className:"space-y-6",children:I.jsxs("div",{className:"bg-gray-800/30 backdrop-blur-sm border border-gray-700 rounded-xl p-6",children:[I.jsx("h3",{className:"text-xl font-semibold text-white mb-6",children:"Data Management"}),I.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[I.jsxs("button",{className:"flex items-center gap-3 p-4 bg-blue-600/20 hover:bg-blue-600/30 border border-blue-500/30 rounded-lg transition-colors",children:[I.jsx(n0,{size:20,className:"text-blue-400"}),I.jsxs("div",{className:"text-left",children:[I.jsx("h4",{className:"font-medium text-white",children:"Export Data"}),I.jsx("p",{className:"text-sm text-gray-400",children:"Download your profile data"})]})]}),I.jsxs("button",{className:"flex items-center gap-3 p-4 bg-red-600/20 hover:bg-red-600/30 border border-red-500/30 rounded-lg transition-colors",children:[I.jsx(RT,{size:20,className:"text-red-400"}),I.jsxs("div",{className:"text-left",children:[I.jsx("h4",{className:"font-medium text-white",children:"Delete Account"}),I.jsx("p",{className:"text-sm text-gray-400",children:"Permanently delete account"})]})]})]})]})});return I.jsxs("div",{className:"min-h-screen bg-black text-white",children:[I.jsxs("div",{className:"fixed inset-0 pointer-events-none",children:[I.jsx("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 bg-gradient-to-br from-purple-500/10 to-blue-600/10 rounded-full blur-3xl animate-pulse"}),I.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-48 h-48 bg-gradient-to-br from-pink-500/10 to-purple-600/10 rounded-full blur-2xl animate-pulse delay-1000"})]}),I.jsxs("div",{className:"relative z-10 max-w-4xl mx-auto px-4 py-8",children:[I.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-8 gap-4",children:[I.jsxs("div",{children:[I.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-2",children:"User Profile"}),I.jsx("p",{className:"text-gray-400",children:"Manage your account information and preferences"})]}),I.jsxs("div",{className:"flex gap-3",children:[I.jsx("button",{onClick:()=>n("/home"),className:"flex items-center gap-2 px-6 py-3 bg-blue-600/20 hover:bg-blue-600/30 border border-blue-500/30 text-blue-400 hover:text-blue-300 rounded-lg transition-all duration-200",children:"Back to Chat"}),I.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-2 px-6 py-3 bg-red-600/20 hover:bg-red-600/30 border border-red-500/30 text-red-400 hover:text-red-300 rounded-lg transition-all duration-200",children:[I.jsx(CT,{size:20}),"Logout"]})]})]}),I.jsx("div",{className:"flex flex-wrap gap-2 mb-8 p-1 bg-gray-800/30 backdrop-blur-sm border border-gray-700 rounded-xl",children:A.map(C=>{const Re=C.icon;return I.jsxs("button",{onClick:()=>E(C.id),className:`flex items-center gap-2 px-4 py-3 rounded-lg transition-all duration-200 ${v===C.id?"bg-blue-600 text-white shadow-lg":"text-gray-400 hover:text-white hover:bg-gray-700/50"}`,children:[I.jsx(Re,{size:18}),I.jsx("span",{className:"hidden sm:inline",children:C.label})]},C.id)})}),I.jsxs("div",{className:"mb-8",children:[v==="profile"&&I.jsx(R,{}),v==="security"&&I.jsx(P,{}),v==="preferences"&&I.jsx(N,{}),v==="data"&&I.jsx(U,{})]})]}),T&&I.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:I.jsxs("div",{className:"bg-gray-900/90 backdrop-blur-xl border border-gray-700 rounded-xl p-6 max-w-md w-full",children:[I.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Confirm Logout"}),I.jsx("p",{className:"text-gray-400 mb-6",children:"Are you sure you want to logout? You'll need to sign in again to access your account."}),I.jsxs("div",{className:"flex gap-3",children:[I.jsx("button",{onClick:b,className:"flex-1 px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:"Yes, Logout"}),I.jsx("button",{onClick:()=>x(!1),className:"flex-1 px-4 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors",children:"Cancel"})]})]})})]})};function l4(){return I.jsx(xx,{children:I.jsx(rD,{children:I.jsxs(rx,{children:[I.jsx(Pl,{path:"/",element:I.jsx(vm,{})}),I.jsx(Pl,{path:"/login",element:I.jsx(vm,{})}),I.jsx(Pl,{path:"/home",element:I.jsx(O0,{children:I.jsx(o4,{})})}),I.jsx(Pl,{path:"/profile",element:I.jsx(O0,{children:I.jsx(a4,{})})})]})})})}fA.createRoot(document.getElementById("root")).render(I.jsx(q.StrictMode,{children:I.jsx(l4,{})}));
